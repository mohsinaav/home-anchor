/* ==========================================================================
   Widget Styles - All Widget Components
   ========================================================================== */

/* Widget Grid Layout - Masonry Style with CSS Columns */
.widget-grid {
    column-count: 3;
    column-gap: var(--space-4);
    column-fill: balance;
}

.widget-grid .widget-card {
    break-inside: avoid;
    page-break-inside: avoid;
    -webkit-column-break-inside: avoid;
    margin-bottom: var(--space-4);
    display: block;
}

.widget-grid--single {
    column-count: 1;
    max-width: 600px;
}

.widget-grid--single .widget-card {
    break-inside: avoid;
    margin-bottom: var(--space-4);
}

.widget-grid--double {
    column-count: 2;
    column-gap: var(--space-4);
    column-fill: balance;
}

.widget-grid--double .widget-card {
    break-inside: avoid;
    page-break-inside: avoid;
    -webkit-column-break-inside: avoid;
    margin-bottom: var(--space-4);
    display: block;
}

/* Member layout with sidebar - 3 columns on wide screens */
.member-layout .widget-grid {
    column-count: 3;
}

/* 2 columns when sidebar is present and screen is narrower */
@media (max-width: 1400px) {
    .member-layout .widget-grid {
        column-count: 2;
    }
}

/* Single column when screen is narrow */
@media (max-width: 1100px) {
    .member-layout .widget-grid {
        column-count: 1;
    }
}

@media (max-width: 1024px) {
    .widget-grid {
        column-count: 2;
    }
}

@media (max-width: 768px) {
    .widget-grid,
    .widget-grid--double {
        column-count: 1;
    }
}

/* ==========================================================================
   Drag and Drop Styles
   ========================================================================== */

.widget-card--draggable {
    cursor: grab;
    user-select: none;
}

.widget-card--draggable:active {
    cursor: grabbing;
}

.widget-card--dragging {
    opacity: 0.5;
    transform: scale(1.02);
    box-shadow: var(--shadow-lg);
    z-index: 100;
}

.widget-card--drag-over {
    border: 2px dashed var(--primary);
    background-color: var(--primary-light);
}

/* Touch drag styles */
.widget-card--placeholder {
    opacity: 0.3;
    background: var(--gray-100);
    border: 2px dashed var(--gray-300);
}

.widget-card--touch-dragging {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    transform-origin: center;
    transition: none;
}

.widget-card__drag-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    color: var(--gray-400);
    cursor: grab;
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.widget-card__drag-handle:active {
    cursor: grabbing;
}

.widget-card:hover .widget-card__drag-handle {
    opacity: 1;
}

.widget-card__drag-handle svg {
    width: 16px;
    height: 16px;
}

/* Show drag handle on mobile/touch devices */
@media (max-width: 768px), (hover: none) {
    .widget-card__drag-handle {
        opacity: 1;
    }
}

/* Drop zone indicator */
.widget-drop-zone {
    min-height: 100px;
    border: 2px dashed var(--gray-300);
    border-radius: var(--radius-xl);
    background-color: var(--gray-50);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gray-400);
    font-size: var(--text-sm);
    transition: all var(--transition-fast);
}

.widget-drop-zone--active {
    border-color: var(--primary);
    background-color: var(--primary-light);
    color: var(--primary);
}

/* Widget Card */
.widget-card {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.widget-card__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--gray-100);
}

.widget-card__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.widget-card__title svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.widget-card__menu {
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

.widget-card:hover .widget-card__menu {
    opacity: 1;
}

/* Widget Card Highlight Animation */
.widget-card--highlight {
    animation: widget-highlight 2s ease-out;
}

@keyframes widget-highlight {
    0% {
        box-shadow: 0 0 0 4px var(--primary), var(--shadow-sm);
        transform: scale(1.01);
    }
    50% {
        box-shadow: 0 0 0 4px var(--primary), var(--shadow-md);
        transform: scale(1.01);
    }
    100% {
        box-shadow: var(--shadow-sm);
        transform: scale(1);
    }
}

.widget-card__body {
    padding: var(--space-4);
}

/* ==========================================================================
   Widget Icon Colors - Match Full Page Views
   ========================================================================== */

/* Meal Plan Widget - Green Icon */
.widget-card[data-widget="meal-plan"] .widget-card__title svg {
    color: var(--green-600, #059669);
}

/* Workout Widget - Blue Icon */
.widget-card[data-widget="workout"] .widget-card__title svg {
    color: var(--blue-600, #3B82F6);
}

/* Journal Widget - Rose/Red Icon */
.widget-card[data-widget="journal"] .widget-card__title svg {
    color: #DC2626;
}

/* Gratitude Widget - Pink Icon */
.widget-card[data-widget="gratitude"] .widget-card__title svg {
    color: #EC4899;
}

/* Habits Widget - Purple Icon */
.widget-card[data-widget="habits"] .widget-card__title svg {
    color: #7C3AED;
}

/* Grocery Widget - Green Icon */
.widget-card[data-widget="grocery"] .widget-card__title svg {
    color: #22C55E;
}

/* Recipes Widget - Orange Icon */
.widget-card[data-widget="recipes"] .widget-card__title svg {
    color: #EA580C;
}

/* Routines Widget - Indigo Icon */
.widget-card[data-widget="routine"] .widget-card__title svg {
    color: #6366F1;
}

/* Widget Placeholder */
.widget-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-8);
    text-align: center;
}

.widget-placeholder__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    margin-bottom: var(--space-4);
}

.widget-placeholder__icon svg {
    width: 24px;
    height: 24px;
    color: var(--gray-400);
}

.widget-placeholder__title {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-1) 0;
}

.widget-placeholder__text {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin: 0 0 var(--space-3) 0;
}

.widget-placeholder__badge {
    display: inline-flex;
    padding: var(--space-1) var(--space-2);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

/* ==========================================================================
   Points Widget
   ========================================================================== */

.points-widget__balance {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-4) 0;
    margin-bottom: var(--space-4);
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    border-radius: var(--radius-lg);
}

.points-widget__stars {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.points-widget__stars svg {
    width: 32px;
    height: 32px;
    color: var(--warning);
    fill: var(--warning);
}

.points-widget__count {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: #92400E;
}

.points-widget__label {
    font-size: var(--text-sm);
    color: #92400E;
    opacity: 0.8;
}

.points-widget__section-title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    margin: 0 0 var(--space-3) 0;
}

.points-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.points-activity {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    text-align: left;
}

.points-activity:hover:not(:disabled) {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.points-activity--completed {
    background-color: var(--success-light);
    border-color: var(--success);
}

.points-activity__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.points-activity__icon svg {
    width: 16px;
    height: 16px;
    color: var(--gray-600);
}

.points-activity__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.points-activity__points {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--warning);
}

.points-activity__check {
    width: 16px;
    height: 16px;
    color: var(--success);
}

.points-widget__footer {
    display: flex;
    justify-content: space-between;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Rewards Widget
   ========================================================================== */

.rewards-widget__balance {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.rewards-widget__label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.rewards-widget__points {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--warning);
}

.rewards-widget__points svg {
    width: 20px;
    height: 20px;
    fill: var(--warning);
}

.rewards-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.reward-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.reward-item--locked {
    opacity: 0.6;
}

.reward-item__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary-light);
    border-radius: var(--radius-md);
}

.reward-item__icon svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.reward-item__info {
    flex: 1;
}

.reward-item__name {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.reward-item__cost {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.reward-item__cost svg {
    width: 12px;
    height: 12px;
    color: var(--warning);
    fill: var(--warning);
}

.rewards-widget__footer {
    display: flex;
    justify-content: space-between;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Tasks Widget
   ========================================================================== */

.tasks-widget__add {
    display: flex;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
}

.tasks-widget__input {
    flex: 1;
}

.tasks-widget__empty {
    text-align: center;
    color: var(--gray-500);
    font-size: var(--text-sm);
    padding: var(--space-4);
}

.tasks-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.task-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
}

.task-item:hover {
    background-color: var(--gray-100);
}

.task-item--completed {
    opacity: 0.6;
}

.task-item--completed .task-item__title {
    text-decoration: line-through;
}

.task-item__checkbox-wrapper {
    position: relative;
    width: 20px;
    height: 20px;
}

.task-item__checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.task-item__content {
    flex: 1;
    min-width: 0;
    cursor: pointer;
    padding: var(--space-1);
    border-radius: var(--radius-sm);
    transition: background-color var(--transition-fast);
}

.task-item__content:hover {
    background-color: var(--gray-100);
}

.task-item__edit-input {
    width: 100%;
    padding: 0;
    font-size: var(--text-sm);
    border: none;
    border-radius: 0;
    outline: none;
    background: transparent;
    font-family: inherit;
    color: inherit;
}

.task-item__title {
    display: block;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.task-item__due {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

.task-item__due svg {
    width: 12px;
    height: 12px;
}

.task-item__due--overdue {
    color: var(--error);
}

.task-item__delete {
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.task-item:hover .task-item__delete {
    opacity: 1;
}

/* Always show delete on touch devices */
@media (hover: none) {
    .task-item__delete {
        opacity: 1;
    }
}

.task-item--high {
    border-left: 3px solid var(--error);
}

.task-item--medium {
    border-left: 3px solid var(--warning);
}

.task-item--low {
    border-left: 3px solid var(--success);
}

.tasks-widget__completed-section {
    margin-top: var(--space-4);
}

.tasks-widget__completed-toggle {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-bottom: var(--space-2);
    background: none;
    border: none;
    cursor: pointer;
}

.tasks-widget__completed-toggle svg {
    width: 16px;
    height: 16px;
    transition: transform var(--transition-fast);
}

.tasks-widget__completed-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.tasks-widget__completed-list--hidden {
    display: none;
}

.rotate-180 {
    transform: rotate(180deg);
}

/* Widget Footer */
.tasks-widget__footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
    margin-top: var(--space-3);
}

.tasks-widget__more {
    font-size: var(--text-sm);
    color: var(--gray-500);
    text-align: center;
    padding: var(--space-2);
    margin: 0;
}

.tasks-widget__more-btn {
    width: 100%;
    background: none;
    border: none;
    padding: var(--space-2);
    font-size: var(--text-sm);
    color: var(--primary);
    cursor: pointer;
    font-weight: var(--font-medium);
    transition: color var(--transition-fast);
    text-align: center;
}

.tasks-widget__more-btn:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

.tasks-widget__completed-count {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--success);
}

.tasks-widget__completed-count svg {
    width: 14px;
    height: 14px;
}

/* ==========================================================================
   Tasks Full Page
   ========================================================================== */

.tasks-page {
    max-width: 800px;
    margin: 0 auto;
}

/* Tasks Page Hero Header */
.tasks-page__hero {
    background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 50%, #93C5FD 100%);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
}

.tasks-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 60%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    pointer-events: none;
}

.tasks-page__back {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    color: #1E40AF;
    z-index: 2;
}

.tasks-page__back:hover {
    background-color: rgba(255, 255, 255, 0.3);
}

.tasks-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.tasks-page__hero-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #1E40AF;
    margin: 0 0 var(--space-2) 0;
}

.tasks-page__hero-title svg {
    width: 32px;
    height: 32px;
    color: #2563EB;
}

.tasks-page__hero-subtitle {
    font-size: var(--text-base);
    color: #1E40AF;
    opacity: 0.8;
    margin: 0;
}

.tasks-page__hero-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.tasks-hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
}

.tasks-hero-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #1E40AF;
}

.tasks-hero-stat__label {
    font-size: var(--text-sm);
    color: #1E40AF;
    opacity: 0.8;
}

.tasks-page__add {
    display: flex;
    gap: var(--space-3);
    margin: var(--space-6) var(--space-4);
}

.tasks-page__add input {
    flex: 1;
}

.tasks-page__section {
    margin-bottom: var(--space-6);
    padding: 0 var(--space-4);
}

.tasks-page__section-title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0 0 var(--space-4) 0;
}

.tasks-page__section-title svg {
    width: 20px;
    height: 20px;
}

.tasks-page__section-title--completed {
    color: var(--success);
    justify-content: space-between;
}

.tasks-page__section--completed {
    opacity: 0.7;
}

.tasks-page__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* Task Page Item */
.task-page-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background-color: var(--white);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
    transition: all var(--transition-fast);
}

.task-page-item:hover {
    border-color: var(--gray-300);
    box-shadow: var(--shadow-sm);
}

.task-page-item--completed {
    background-color: var(--gray-50);
}

.task-page-item--completed .task-page-item__title {
    text-decoration: line-through;
    color: var(--gray-400);
}

.task-page-item--high {
    border-left: 4px solid var(--error);
}

.task-page-item--medium {
    border-left: 4px solid var(--warning);
}

.task-page-item--low {
    border-left: 4px solid var(--success);
}

.task-page-item__checkbox-wrapper {
    position: relative;
    width: 22px;
    height: 22px;
}

.task-page-item__checkbox {
    width: 22px;
    height: 22px;
    cursor: pointer;
}

.task-page-item__content {
    flex: 1;
    min-width: 0;
    cursor: pointer;
    padding: var(--space-2);
    border-radius: var(--radius-sm);
    transition: background-color var(--transition-fast);
}

.task-page-item__content:hover {
    background-color: var(--gray-100);
}

.task-page-item__edit-input {
    width: 100%;
    padding: 0;
    font-size: var(--text-base);
    border: none;
    border-radius: 0;
    outline: none;
    background: transparent;
    font-family: inherit;
    color: inherit;
}

.task-page-item__title {
    display: block;
    font-size: var(--text-base);
    color: var(--gray-800);
    margin-bottom: var(--space-1);
}

.task-page-item__meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
}

.task-page-item__priority {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    text-transform: capitalize;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
}

.task-page-item__priority--high {
    background-color: #FEE2E2;
    color: #DC2626;
}

.task-page-item__priority--medium {
    background-color: #FEF3C7;
    color: #D97706;
}

.task-page-item__priority--low {
    background-color: #D1FAE5;
    color: #059669;
}

.task-page-item__due,
.task-page-item__completed-date {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.task-page-item__due svg,
.task-page-item__completed-date svg {
    width: 12px;
    height: 12px;
}

.task-page-item__due--overdue {
    color: var(--error);
}

.task-page-item__completed-date {
    color: var(--success);
}

.task-page-item__delete {
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.task-page-item:hover .task-page-item__delete {
    opacity: 1;
}

/* Always show delete on touch devices */
@media (hover: none) {
    .task-page-item__delete {
        opacity: 1;
    }
}

/* Empty State */
.tasks-page__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-10);
    text-align: center;
}

.tasks-page__empty-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--primary-light), var(--primary));
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-4);
}

.tasks-page__empty-icon svg {
    width: 40px;
    height: 40px;
    color: white;
}

.tasks-page__empty h2 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-xl);
    color: var(--gray-800);
}

.tasks-page__empty p {
    margin: 0;
    color: var(--gray-500);
}

/* Responsive */
@media (max-width: 600px) {
    .tasks-page__hero {
        padding: var(--space-4);
    }

    .tasks-page__back {
        position: static;
        margin-bottom: var(--space-3);
    }

    .tasks-page__hero-stats {
        gap: var(--space-4);
    }

    .tasks-hero-stat__value {
        font-size: var(--text-xl);
    }
}

/* ==========================================================================
   Meals Widget
   ========================================================================== */

.meals-widget__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.meals-widget__day {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.meals-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.meal-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.meal-item--empty .meal-item__name {
    color: var(--gray-400);
    font-style: italic;
}

.meal-item__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.meal-item__icon svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.meal-item__content {
    flex: 1;
}

.meal-item__type {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.meal-item__name {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    flex-wrap: wrap;
}

/* Inline indicators for prep and kids meal */
.meal-item__indicator {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border-radius: var(--radius-full);
    cursor: help;
    flex-shrink: 0;
    position: relative;
}

.meal-item__indicator svg {
    width: 12px;
    height: 12px;
    pointer-events: none;
}

/* Custom tooltip using data-tooltip attribute */
.meal-item__indicator[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--gray-800, #1F2937);
    color: white;
    padding: 4px 8px;
    border-radius: var(--radius-sm, 4px);
    font-size: 11px;
    white-space: nowrap;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s, visibility 0.15s;
    z-index: 100;
    pointer-events: none;
    margin-bottom: 4px;
}

.meal-item__indicator[data-tooltip]:hover::after {
    opacity: 1;
    visibility: visible;
}

.meal-item__indicator--prep {
    background-color: var(--amber-100, #FEF3C7);
    color: var(--amber-600, #D97706);
}

.meal-item__indicator--kids {
    background-color: var(--blue-100, #DBEAFE);
    color: var(--blue-600, #2563EB);
}

.meals-widget__footer {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

.meal-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.meal-suggestion {
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-100);
    border: none;
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.meal-suggestion:hover {
    background-color: var(--primary-light);
    color: var(--primary);
}

/* Meal Tags Container (for multiple items per meal) */
.meal-tags-container {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-lg);
    min-height: 44px;
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.meal-tags-container:focus-within {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

.meal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.meal-tag {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background-color: var(--primary);
    color: var(--white);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    animation: tagSlideIn 0.2s ease-out;
}

@keyframes tagSlideIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.meal-tag__text {
    max-width: 150px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.meal-tag__remove {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    padding: 0;
    transition: background-color var(--transition-fast);
}

.meal-tag__remove:hover {
    background: rgba(255, 255, 255, 0.4);
}

.meal-tag__remove svg {
    width: 12px;
    height: 12px;
}

.meal-tags-input {
    flex: 1;
    min-width: 120px;
    border: none;
    outline: none;
    background: transparent;
    font-size: var(--text-base);
    padding: var(--space-1) 0;
}

.meal-tags-input::placeholder {
    color: var(--gray-400);
}

/* Planner meal item tags */
.planner-meal__item {
    display: inline-block;
    padding: 2px 8px;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--gray-700);
    margin: 2px 0;
    border: 1px solid color-mix(in srgb, var(--day-border, var(--gray-200)) 50%, transparent);
}

.planner-meal__content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

/* Recipe suggestions in meal modal */
.meal-recipes {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.meal-recipe {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: color-mix(in srgb, var(--recipe-color, var(--primary)) 10%, white);
    border: 1px solid color-mix(in srgb, var(--recipe-color, var(--primary)) 30%, white);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.meal-recipe:hover {
    background-color: color-mix(in srgb, var(--recipe-color, var(--primary)) 20%, white);
    border-color: var(--recipe-color, var(--primary));
    transform: translateY(-1px);
}

.meal-recipe svg {
    width: 16px;
    height: 16px;
    color: var(--recipe-color, var(--primary));
}

.meal-recipe span {
    font-weight: var(--font-medium);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
}

/* Meal Autocomplete Dropdown */
.meal-autocomplete {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    z-index: 100;
    max-height: 240px;
    overflow-y: auto;
    margin-top: 4px;
}

.meal-autocomplete__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    cursor: pointer;
    transition: background-color var(--transition-fast);
}

.meal-autocomplete__item:hover,
.meal-autocomplete__item--selected {
    background-color: var(--gray-50);
}

.meal-autocomplete__item--selected {
    background-color: var(--primary-light);
}

.meal-autocomplete__item svg {
    width: 18px;
    height: 18px;
    color: var(--recipe-color, var(--primary));
    flex-shrink: 0;
}

.meal-autocomplete__item span {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ==========================================================================
   MEAL PLANNER PAGE - TABBED INTERFACE
   ========================================================================== */

/* Tabbed Meals Page */
.meals-page--tabbed {
    padding: 0;
    max-width: 100%;
}

/* Meals Hero Header */
.meals-page__hero {
    background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 50%, #6EE7B7 100%);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
}

.meals-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 60%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    pointer-events: none;
}

.meals-page__back {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    color: #065F46;
    z-index: 2;
}

.meals-page__back:hover {
    background-color: rgba(255, 255, 255, 0.3);
}

.meals-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.meals-page__hero-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #065F46;
    margin: 0 0 var(--space-2) 0;
}

.meals-page__hero-title svg {
    width: 32px;
    height: 32px;
    color: #059669;
}

.meals-page__hero-subtitle {
    font-size: var(--text-base);
    color: #065F46;
    opacity: 0.8;
    margin: 0;
}

.meals-page__hero-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.meals-hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
}

.meals-hero-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #065F46;
}

.meals-hero-stat__label {
    font-size: var(--text-sm);
    color: #065F46;
    opacity: 0.8;
}

/* Meals Tab Navigation */
.meals-page--tabbed .meals-page__tabs {
    display: flex;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-6);
    background: var(--white);
    border-bottom: 1px solid var(--gray-200);
    position: sticky;
    top: 0;
    z-index: 10;
}

.meals-tab {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    border: none;
    background: transparent;
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.meals-tab svg {
    width: 16px;
    height: 16px;
}

.meals-tab:hover {
    background: var(--gray-100);
    color: var(--gray-800);
}

.meals-tab--active {
    background: linear-gradient(135deg, #059669 0%, #10B981 100%);
    color: white;
}

/* Meals Page Content */
.meals-page--tabbed .meals-page__content {
    padding: var(--space-6);
    max-width: 1400px;
    margin: 0 auto;
}

/* Week Tab Section */
.meals-week-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.meals-week-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    flex-wrap: wrap;
}

.meals-week-nav__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border: 1px solid var(--gray-300);
    background: var(--white);
    border-radius: var(--radius-md);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.meals-week-nav__btn:hover {
    background: var(--gray-100);
    color: var(--gray-800);
}

.meals-week-nav__btn svg {
    width: 20px;
    height: 20px;
}

.meals-week-nav__info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
}

.meals-week-nav__label {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.meals-week-nav__badge {
    font-size: var(--text-xs);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
    font-weight: var(--font-medium);
}

.meals-week-nav__badge--current {
    background: #D1FAE5;
    color: #065F46;
}

.meals-week-nav__badge--past {
    background: var(--gray-100);
    color: var(--gray-600);
}

.meals-week-nav__badge--future {
    background: #DBEAFE;
    color: #1E40AF;
}

.meals-copy-prompt {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: #FEF3C7;
    border-radius: var(--radius-lg);
    color: #92400E;
}

.meals-copy-prompt svg {
    width: 18px;
    height: 18px;
    color: #D97706;
}

.meals-prep-alert {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: #FEF3C7;
    border-radius: var(--radius-lg);
    border-left: 4px solid #F59E0B;
}

.meals-prep-alert > svg {
    width: 20px;
    height: 20px;
    color: #D97706;
    flex-shrink: 0;
    margin-top: 2px;
}

.meals-prep-alert strong {
    color: #92400E;
}

.meals-week-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-top: var(--space-4);
}

.meals-week-tip {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0;
}

.meals-week-tip svg {
    width: 16px;
    height: 16px;
    color: #D97706;
}

/* Stats Tab Section */
.meals-stats-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.meals-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: var(--space-4);
}

.meals-stat-card {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
}

.meals-stat-card__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
    flex-shrink: 0;
}

.meals-stat-card__icon svg {
    width: 24px;
    height: 24px;
}

.meals-stat-card--primary .meals-stat-card__icon {
    background: #D1FAE5;
    color: #059669;
}

.meals-stat-card--success .meals-stat-card__icon {
    background: #DCFCE7;
    color: #16A34A;
}

.meals-stat-card--info .meals-stat-card__icon {
    background: #FEE2E2;
    color: #DC2626;
}

.meals-stat-card--warning .meals-stat-card__icon {
    background: #FEF3C7;
    color: #D97706;
}

.meals-stat-card__info {
    display: flex;
    flex-direction: column;
}

.meals-stat-card__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    line-height: 1;
}

.meals-stat-card__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

/* Meals Breakdown Card */
.meals-breakdown-card,
.meals-recipes-card,
.meals-protein-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.meals-breakdown-card__header,
.meals-recipes-card__header,
.meals-protein-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.meals-breakdown-card__header svg,
.meals-recipes-card__header svg,
.meals-protein-card__header svg {
    width: 18px;
    height: 18px;
    color: #059669;
}

.meals-breakdown-card__content,
.meals-recipes-card__content,
.meals-protein-card__content {
    padding: var(--space-4);
}

.meals-breakdown-card__grid {
    display: flex;
    justify-content: space-around;
    gap: var(--space-3);
}

.meals-breakdown-card__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3);
}

.meals-breakdown-card__item svg {
    width: 24px;
    height: 24px;
    color: #059669;
}

.meals-breakdown-card__count {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.meals-breakdown-card__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Recipes Card */
.meals-recipes-card__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.meals-recipes-card__item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2);
    border-radius: var(--radius-md);
    background: var(--gray-50);
}

.meals-recipes-card__rank {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #D1FAE5;
    color: #065F46;
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
}

.meals-recipes-card__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.meals-recipes-card__uses {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-500);
}

/* Protein Chart */
.meals-protein-card__days {
    display: flex;
    justify-content: space-between;
    gap: var(--space-2);
    height: 150px;
}

.meals-protein-card__day {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    flex: 1;
}

.meals-protein-card__day--today {
    font-weight: var(--font-bold);
}

.meals-protein-card__day--today .meals-protein-card__bar {
    background: linear-gradient(180deg, #059669 0%, #10B981 100%);
}

.meals-protein-card__day-name {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.meals-protein-card__bar-container {
    flex: 1;
    width: 24px;
    background: var(--gray-100);
    border-radius: var(--radius-md);
    display: flex;
    align-items: flex-end;
    overflow: hidden;
}

.meals-protein-card__bar {
    width: 100%;
    background: linear-gradient(180deg, #6EE7B7 0%, #A7F3D0 100%);
    border-radius: var(--radius-md);
    transition: height 0.3s ease;
}

.meals-protein-card__day-value {
    font-size: var(--text-xs);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

/* Prep Tab Section */
.meals-prep-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.meals-prep-empty {
    text-align: center;
    padding: var(--space-8);
    background: var(--gray-50);
    border-radius: var(--radius-xl);
    color: var(--gray-500);
}

.meals-prep-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.meals-prep-empty p {
    font-size: var(--text-lg);
    font-weight: var(--font-medium);
    margin: 0 0 var(--space-2) 0;
    color: var(--gray-600);
}

.meals-prep-empty span {
    font-size: var(--text-sm);
}

.meals-prep-intro {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background: #DBEAFE;
    border-radius: var(--radius-lg);
    color: #1E40AF;
}

.meals-prep-intro svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
    margin-top: 2px;
}

.meals-prep-intro p {
    margin: 0;
    font-size: var(--text-sm);
}

.meals-prep-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.meals-prep-day {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.meals-prep-day__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.meals-prep-day__date {
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.meals-prep-day__count {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.meals-prep-day__items {
    padding: var(--space-2);
}

.meals-prep-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.meals-prep-item:hover {
    background: var(--gray-50);
}

.meals-prep-item__checkbox {
    width: 20px;
    height: 20px;
    margin-top: 2px;
    accent-color: #059669;
}

.meals-prep-item__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.meals-prep-item__content--done {
    text-decoration: line-through;
    opacity: 0.6;
}

.meals-prep-item__name {
    font-weight: var(--font-medium);
    color: var(--gray-800);
}

.meals-prep-item__instructions {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.meals-prep-item__meal {
    font-size: var(--text-xs);
    color: var(--gray-500);
    background: var(--gray-100);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    width: fit-content;
}

/* Custom prep notes (user-added, not from recipe) */
.meals-prep-item--custom {
    border-left: 3px solid var(--primary-400);
    background: var(--primary-50);
}

.meals-prep-item--custom:hover {
    background: var(--primary-100);
}

/* Responsive - Tabbed Meals Page */
@media (max-width: 768px) {
    .meals-page__hero {
        padding: var(--space-4);
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .meals-page__back {
        position: static;
        align-self: flex-start;
        margin-bottom: var(--space-2);
    }

    .meals-page__hero-content {
        text-align: center;
    }

    .meals-page__hero-title {
        font-size: var(--text-lg);
        gap: var(--space-2);
    }

    .meals-page__hero-title svg {
        width: 22px;
        height: 22px;
    }

    .meals-page__hero-subtitle {
        font-size: var(--text-sm);
        margin-bottom: var(--space-2);
    }

    .meals-page__hero-stats {
        gap: var(--space-4);
        margin-top: var(--space-3);
    }

    .meals-hero-stat__value {
        font-size: var(--text-xl);
    }

    .meals-hero-stat__label {
        font-size: var(--text-xs);
    }

    .meals-page--tabbed .meals-page__tabs {
        padding: var(--space-2) var(--space-3);
        gap: var(--space-1);
    }

    .meals-tab {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
    }

    .meals-page--tabbed .meals-page__content {
        padding: var(--space-4);
    }

    .meals-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .meals-stat-card {
        flex-direction: column;
        text-align: center;
        padding: var(--space-3);
    }

    .meals-stat-card__icon {
        width: 40px;
        height: 40px;
    }

    .meals-stat-card__icon svg {
        width: 20px;
        height: 20px;
    }

    .meals-stat-card__value {
        font-size: var(--text-xl);
    }

    .meals-week-footer {
        flex-direction: column;
        gap: var(--space-3);
        text-align: center;
    }

    .meals-breakdown-card__grid {
        flex-wrap: wrap;
    }

    .meals-protein-card__bar-container {
        width: 18px;
    }
}

@media (max-width: 480px) {
    .meals-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-3);
    }

    .meals-stats-grid {
        grid-template-columns: 1fr;
    }

    .meals-stat-card {
        flex-direction: row;
        text-align: left;
    }

    .meals-protein-card__days {
        height: 120px;
    }
}

/* ==========================================================================
   Full-Page Weekly Meal Planner (Legacy)
   ========================================================================== */

.weekly-planner {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-4);
}

.weekly-planner__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
    gap: var(--space-4);
}

.weekly-planner__title {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    margin: 0;
}

.weekly-planner__title svg {
    width: 28px;
    height: 28px;
    color: var(--primary);
}

.weekly-planner__week-nav {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.weekly-planner__week-label {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    padding: var(--space-2) var(--space-4);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
}

.weekly-planner__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: var(--space-4);
}

/* Day Column - Colorful */
.planner-day {
    background-color: var(--day-bg, var(--white));
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 2px solid var(--day-border, var(--gray-200));
    overflow: hidden;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.planner-day:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.planner-day--today {
    border-width: 3px;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--day-border, var(--primary)) 30%, transparent);
}

.planner-day__header {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-3);
    background-color: color-mix(in srgb, var(--day-bg, var(--gray-50)) 50%, white);
    border-bottom: 1px solid var(--day-border, var(--gray-200));
    color: var(--day-text, var(--gray-700));
}

.planner-day--today .planner-day__header {
    background-color: var(--day-border, var(--primary));
    color: var(--white);
}

.planner-day__name {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.planner-day__date {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
}

.planner-day__meals {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    padding: var(--space-3);
}

/* Meal Slot */
.planner-meal {
    padding: var(--space-3);
    background-color: color-mix(in srgb, var(--day-bg, var(--gray-50)) 30%, white);
    border: 2px dashed color-mix(in srgb, var(--day-border, var(--gray-300)) 50%, transparent);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    min-height: 80px;
}

.planner-meal:hover {
    background-color: color-mix(in srgb, var(--day-bg, var(--primary-light)) 60%, white);
    border-color: var(--day-border, var(--primary));
    border-style: solid;
}

.planner-meal--filled {
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid color-mix(in srgb, var(--day-border, var(--gray-200)) 40%, transparent);
    border-style: solid;
}

.planner-meal--filled:hover {
    background-color: color-mix(in srgb, var(--day-bg, var(--gray-50)) 40%, white);
}

.planner-meal--editing {
    background-color: var(--white);
    border: 2px solid var(--primary);
    border-style: solid;
}

.planner-meal__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    color: var(--day-text, var(--gray-500));
    opacity: 0.8;
}

.planner-meal__header svg {
    width: 14px;
    height: 14px;
    color: var(--day-text, var(--gray-500));
}

.planner-meal__content {
    font-size: var(--text-sm);
}

.planner-meal__name {
    color: var(--gray-800);
    font-weight: var(--font-medium);
    line-height: 1.4;
}

.planner-meal__add {
    color: var(--gray-400);
    font-style: italic;
}

/* Inline Editor */
.planner-meal--editing {
    min-height: auto;
    padding: var(--space-3);
}

.planner-meal--editing .planner-meal__header {
    display: none;
}

.planner-meal__editor {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

.planner-meal__input {
    flex: 1;
    min-width: 0;
    padding: var(--space-2) var(--space-3);
    border: 2px solid var(--primary);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    background-color: var(--white);
}

.planner-meal__input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

.planner-meal__actions {
    display: flex;
    gap: var(--space-1);
    flex-shrink: 0;
}

.planner-meal__actions .btn {
    width: 32px;
    height: 32px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.planner-meal__actions .btn svg {
    width: 16px;
    height: 16px;
}

.planner-meal__suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
}

.planner-suggestion {
    padding: var(--space-1) var(--space-2);
    background-color: var(--gray-100);
    border: none;
    border-radius: var(--radius-full);
    font-size: 11px;
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.planner-suggestion:hover {
    background-color: var(--primary);
    color: var(--white);
}

/* Footer */
.weekly-planner__footer {
    margin-top: var(--space-6);
    text-align: center;
}

.weekly-planner__tip {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.weekly-planner__tip svg {
    width: 16px;
    height: 16px;
    color: var(--warning);
}

/* Weekly Planner Controls */
.weekly-planner__controls {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

.weekly-planner__view-toggle {
    display: flex;
    background-color: var(--gray-100);
    border-radius: var(--radius-lg);
    padding: 3px;
}

.view-toggle-btn {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.view-toggle-btn:hover {
    color: var(--gray-800);
}

.view-toggle-btn--active {
    background-color: var(--white);
    color: var(--primary);
    box-shadow: var(--shadow-sm);
}

.view-toggle-btn svg {
    width: 16px;
    height: 16px;
}

/* Prep Alert Banner */
.weekly-planner__prep-alert {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background-color: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-200, #FDE68A);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.weekly-planner__prep-alert > svg {
    width: 20px;
    height: 20px;
    color: var(--amber-500, #F59E0B);
    flex-shrink: 0;
    margin-top: 2px;
}

.weekly-planner__prep-alert strong {
    color: var(--amber-800, #92400E);
}

.weekly-planner__prep-alert span {
    color: var(--amber-700, #B45309);
}

/* ==========================================================================
   Weekly Planner Table Layout
   ========================================================================== */

.weekly-planner--table {
    max-width: 100%;
}

.planner-table-wrapper {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-2);
}

.planner-table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
    font-size: var(--text-sm);
}

/* Table Header - Sticky */
.planner-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

.planner-table__corner {
    background-color: var(--gray-50);
    position: sticky;
    left: 0;
    z-index: 12;
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    color: var(--gray-500);
    letter-spacing: 0.05em;
    border: 1px solid var(--gray-200);
}

.planner-table__corner--meal {
    width: 80px;
}

.planner-table__day-header {
    padding: var(--space-2);
    text-align: center;
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
}

/* Today column highlight - subtle for readability */
.planner-table__day-header--today {
    background-color: rgba(99, 102, 241, 0.06);
    border-left: 2px solid var(--primary);
    border-right: 2px solid var(--primary);
    border-top: 2px solid var(--primary);
}

.planner-table__day-header--today .planner-table__day-date {
    background-color: var(--primary);
    color: var(--white);
    border-radius: var(--radius-full);
    width: 24px;
    height: 24px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.planner-table__day-name {
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.planner-table__day-date {
    display: inline-block;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

/* Table Body */
.planner-table__row {
    transition: background-color var(--transition-fast);
}

.planner-table__row:hover {
    background-color: var(--gray-50);
}

.planner-table__row--adult,
.planner-table__row--kids,
.planner-table__row--protein {
    background-color: transparent;
}

.planner-table__row--adult:hover,
.planner-table__row--kids:hover,
.planner-table__row--protein:hover {
    background-color: var(--gray-50);
}

/* Meal Label Column */
.planner-table__meal-label {
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    white-space: nowrap;
    vertical-align: middle;
}

/* Meal type column (first column with icon + meal name) */
.planner-table__meal-label--type {
    position: sticky;
    left: 0;
    z-index: 2;
}

/* Variant column (second column with Adult/Kids) */
.planner-table__meal-label--variant {
    text-align: center;
    padding: var(--space-3);
}

.planner-table__meal-label--adult,
.planner-table__meal-label--kids {
    background-color: var(--gray-50);
}

.planner-table__row--protein .planner-table__meal-label {
    background-color: var(--gray-50);
}

/* Meal Label */
.meal-label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    color: var(--gray-700);
    white-space: nowrap;
}

.meal-label svg {
    width: 16px;
    height: 16px;
    color: var(--gray-400);
}

.planner-table__row--adult .meal-label svg,
.planner-table__row--kids .meal-label svg {
    color: var(--gray-500);
}

.meal-label__variant {
    display: inline-block;
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    background-color: var(--gray-200);
    color: var(--gray-700);
}

.planner-table__meal-label--adult .meal-label__variant,
.planner-table__meal-label--kids .meal-label__variant {
    background-color: var(--gray-200);
    color: var(--gray-700);
}

.meal-label--protein {
    color: var(--green-700, #047857);
}

.meal-label--protein svg {
    color: var(--green-500, #10B981);
}

/* Table Cells */
.planner-cell {
    padding: var(--space-2);
    border: 1px solid var(--gray-200);
    vertical-align: top;
    min-height: 44px;
    cursor: pointer;
    transition: background-color 0.15s ease;
    position: relative;
    background-color: var(--white);
}

.planner-cell:hover {
    background-color: var(--gray-50);
}

.planner-cell--filled {
    background-color: var(--white);
}

.planner-cell--filled:hover {
    background-color: var(--gray-50);
}

.planner-cell--prep {
    border-left: 3px solid var(--amber-400, #FBBF24);
}

/* Today's column cells - base styles */
.planner-cell--today {
    background-color: rgba(99, 102, 241, 0.04);
    border-left: 2px solid var(--primary);
    border-right: 2px solid var(--primary);
}

.planner-cell--today.planner-cell--filled {
    background-color: rgba(99, 102, 241, 0.04);
}

/* Last row of today's column gets bottom border */
tr:last-child .planner-cell--today {
    border-bottom: 2px solid var(--primary);
}

/* Meal items */
.planner-cell__item {
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--font-normal);
    color: var(--gray-600);
    line-height: 1.3;
    max-width: 100%;
    word-wrap: break-word;
    overflow-wrap: break-word;
    white-space: normal;
}

.planner-cell__item::before {
    content: ' ';
    color: var(--gray-300);
}

.planner-cell__item + .planner-cell__item {
    margin-top: 2px;
}

/* Empty cell add prompt */
.planner-cell__add {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gray-300);
    font-size: var(--text-xs);
    height: 100%;
}

.planner-cell:hover .planner-cell__add {
    color: var(--primary);
}

/* Protein badge */
.planner-cell__protein {
    display: inline-flex;
    align-items: center;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--green-700, #047857);
    background-color: var(--green-100, #D1FAE5);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    margin-top: var(--space-2);
}

.planner-cell__protein::before {
    content: none;
    color: var(--green-500, #22C55E);
}

.planner-cell__prep-icon {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 14px;
    height: 14px;
    color: var(--amber-500, #F59E0B);
    background-color: var(--amber-100, #FEF3C7);
    border-radius: var(--radius-full);
    padding: 2px;
}

/* Prep indicator - chef hat icon for meals requiring prep */
.planner-cell__prep-indicator {
    position: absolute;
    top: 4px;
    right: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    color: var(--amber-600, #D97706);
    background-color: var(--amber-100, #FEF3C7);
    border-radius: var(--radius-full);
    cursor: help;
}

.planner-cell__prep-indicator svg {
    width: 12px;
    height: 12px;
    pointer-events: none;
}

/* Tooltip for prep indicator */
.planner-cell__prep-indicator[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--gray-800, #1F2937);
    color: white;
    padding: 4px 8px;
    border-radius: var(--radius-sm, 4px);
    font-size: 11px;
    white-space: nowrap;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s, visibility 0.15s;
    z-index: 100;
    pointer-events: none;
    margin-bottom: 4px;
}

.planner-cell__prep-indicator[data-tooltip]:hover::after {
    opacity: 1;
    visibility: visible;
}

/* Protein total row */
.planner-cell--protein-total {
    text-align: center;
    font-weight: var(--font-bold);
    color: var(--green-700, #047857);
    vertical-align: middle;
}

.planner-cell--protein-total span {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    background: linear-gradient(135deg, var(--green-100, #D1FAE5) 0%, var(--green-50, #ECFDF5) 100%);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-lg);
    border: 1px solid var(--green-200, #A7F3D0);
    font-size: var(--text-base);
}

/* ==========================================================================
   Flipped Table Layout (Days as rows, Meals as columns)
   ========================================================================== */

.planner-table--flipped {
    table-layout: auto;
}

.planner-table--flipped .planner-table__corner--day {
    width: 120px;
    min-width: 120px;
    text-align: left;
}

.planner-table--flipped .planner-table__meal-header {
    padding: var(--space-3);
    text-align: center;
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    color: var(--gray-600);
    letter-spacing: 0.03em;
    white-space: nowrap;
}

.planner-table--flipped .planner-table__meal-header svg {
    width: 16px;
    height: 16px;
    margin-bottom: var(--space-1);
    display: block;
    margin-left: auto;
    margin-right: auto;
    color: var(--gray-400);
}

.planner-table--flipped .planner-table__meal-header span {
    display: block;
}

.planner-table--flipped .planner-table__meal-header--protein {
    background-color: var(--green-50, #F0FDF4);
    color: var(--green-700, #047857);
}

.planner-table--flipped .planner-table__meal-header--protein svg {
    color: var(--green-500, #10B981);
}

.planner-table--flipped .planner-table__day-label {
    padding: var(--space-3);
    background-color: var(--day-bg, var(--gray-50));
    border: 1px solid var(--day-border, var(--gray-200));
    position: sticky;
    left: 0;
    z-index: 2;
}

.planner-table--flipped .planner-table__day-label .planner-table__day-name {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--day-text, var(--gray-700));
    text-transform: none;
    letter-spacing: normal;
}

.planner-table--flipped .planner-table__day-label .planner-table__day-date {
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--font-normal);
    color: var(--gray-500);
    margin-top: 2px;
}

/* Today row highlight */
.planner-table--flipped .planner-table__row--today {
    background-color: rgba(99, 102, 241, 0.04);
}

.planner-table--flipped .planner-table__row--today .planner-table__day-label {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(99, 102, 241, 0.08) 100%);
    border-left: 3px solid var(--primary);
}

.planner-table--flipped .planner-table__row--today .planner-table__day-label .planner-table__day-name {
    color: var(--primary);
}

.planner-table--flipped .planner-table__row--today .planner-cell {
    background-color: rgba(99, 102, 241, 0.02);
}

.planner-table--flipped .planner-table__row--today .planner-cell:hover {
    background-color: rgba(99, 102, 241, 0.06);
}

/* Better cell sizing for flipped layout */
.planner-table--flipped .planner-cell {
    min-width: 100px;
    max-width: 180px;
}

/* Drag indicator on hover */
.planner-cell--filled::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 3px;
    background-color: var(--gray-300);
    border-radius: var(--radius-full);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.planner-cell--filled:hover::after {
    opacity: 1;
}

/* ==========================================================================
   Week Navigation Styles
   ========================================================================== */

.weekly-planner__nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    padding: var(--space-3);
    margin-bottom: var(--space-4);
    background: linear-gradient(135deg, var(--gray-50) 0%, var(--white) 100%);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
    flex-wrap: wrap;
    min-height: 60px;
}

/* Mobile nav styling */
@media (max-width: 768px) {
    .weekly-planner__nav {
        padding: var(--space-2);
        gap: var(--space-2);
    }

    .weekly-planner__nav > button {
        flex-shrink: 0;
    }
}

.weekly-planner__week-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    min-width: 200px;
}

.weekly-planner__current-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: 2px 8px;
    background-color: var(--primary-light, #EEF2FF);
    color: var(--primary);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
}

.weekly-planner__past-badge {
    display: inline-flex;
    padding: 2px 8px;
    background-color: var(--gray-200);
    color: var(--gray-600);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.weekly-planner__future-badge {
    display: inline-flex;
    padding: 2px 8px;
    background-color: var(--green-100, #D1FAE5);
    color: var(--green-700, #047857);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

/* ==========================================================================
   Meal Completion Checkbox Styles
   ========================================================================== */

.planner-cell__content {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    min-width: 0;
    height: 100%;
}

.planner-cell__check {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border: none;
    background: transparent;
    color: var(--gray-400);
    cursor: pointer;
    flex-shrink: 0;
    padding: 0;
    transition: all var(--transition-fast);
    border-radius: var(--radius-full);
    margin-top: 1px;
}

.planner-cell__check:hover {
    color: var(--primary);
    background-color: var(--primary-light, #EEF2FF);
}

.planner-cell__check--done {
    color: var(--green-500, #10B981);
}

.planner-cell__check--done:hover {
    color: var(--green-600, #059669);
    background-color: var(--green-100, #D1FAE5);
}

.planner-cell__check svg {
    width: 16px;
    height: 16px;
}

.planner-cell__items {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0; /* Allow text to truncate properly */
}

.planner-cell__items--done .planner-cell__item {
    text-decoration: line-through;
    color: var(--gray-400);
    opacity: 0.7;
}

.planner-cell--completed {
    background-color: var(--green-50, #ECFDF5) !important;
    border-color: var(--green-200, #A7F3D0);
}

.planner-cell--completed::before {
    background-color: var(--green-200, #A7F3D0) !important;
}

/* Recipe Icon in Cell */
.planner-cell__item-icon {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
    opacity: 0.7;
}

/* ==========================================================================
   Copy from Adult Button
   ========================================================================== */

.planner-cell__copy-adult {
    position: absolute;
    top: 50%;
    right: 4px;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border: 1px dashed var(--gray-300);
    background: var(--white);
    border-radius: var(--radius-md);
    color: var(--gray-400);
    cursor: pointer;
    opacity: 0;
    transition: all var(--transition-fast);
}

.planner-cell:hover .planner-cell__copy-adult {
    opacity: 1;
}

.planner-cell__copy-adult:hover {
    background-color: var(--primary-light, #EEF2FF);
    border-color: var(--primary);
    color: var(--primary);
}

.planner-cell__copy-adult svg {
    width: 14px;
    height: 14px;
}

/* Kids Customization Button */
.planner-cell__kids-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border: none;
    background: var(--gray-100);
    border-radius: var(--radius-md);
    color: var(--gray-400);
    cursor: pointer;
    opacity: 0;
    transition: all var(--transition-fast);
}

.planner-cell:hover .planner-cell__kids-btn {
    opacity: 1;
}

.planner-cell__kids-btn:hover {
    background-color: var(--pink-100, #FCE7F3);
    color: var(--pink-600, #DB2777);
}

.planner-cell__kids-btn--differs {
    opacity: 1;
    background-color: var(--pink-100, #FCE7F3);
    color: var(--pink-600, #DB2777);
}

.planner-cell__kids-btn svg {
    width: 12px;
    height: 12px;
}

.planner-cell__kids-indicator {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background-color: var(--pink-500, #EC4899);
    border-radius: 50%;
    border: 2px solid var(--white);
}

/* Accordion Kids Button */
.accordion-meal__actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.accordion-meal__kids-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border: none;
    background: var(--gray-100);
    border-radius: var(--radius-md);
    color: var(--gray-400);
    cursor: pointer;
    transition: all var(--transition-fast);
    position: relative;
}

.accordion-meal__kids-btn:hover {
    background-color: var(--pink-100, #FCE7F3);
    color: var(--pink-600, #DB2777);
}

.accordion-meal__kids-btn--differs {
    background-color: var(--pink-100, #FCE7F3);
    color: var(--pink-600, #DB2777);
}

.accordion-meal__kids-btn svg {
    width: 14px;
    height: 14px;
}

.accordion-meal__kids-indicator {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background-color: var(--pink-500, #EC4899);
    border-radius: 50%;
    border: 2px solid var(--white);
}

.accordion-meal__kids-info {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    margin-top: var(--space-2);
    background-color: var(--pink-50, #FDF2F8);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--pink-700, #BE185D);
}

.accordion-meal__kids-info svg {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
}

/* ==========================================================================
   Enhanced Empty State with Dashed Border
   ========================================================================== */

.planner-cell__add {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-2);
    min-height: 40px;
    border: 2px dashed var(--gray-200);
    border-radius: var(--radius-md);
    color: var(--gray-400);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    transition: all var(--transition-fast);
}

.planner-cell__add svg {
    width: 14px;
    height: 14px;
}

.planner-cell:hover .planner-cell__add {
    border-color: var(--primary);
    color: var(--primary);
    background-color: var(--primary-light, #EEF2FF);
}


/* Meal Edit Modal Styles */
.meal-variant-selector {
    display: flex;
    gap: var(--space-2);
    margin-top: var(--space-2);
}

.variant-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-100);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.variant-btn:hover {
    background-color: var(--gray-200);
}

.variant-btn--active {
    background-color: var(--primary-light, #EEF2FF);
    border-color: var(--primary);
    color: var(--primary);
}

.variant-btn svg {
    width: 18px;
    height: 18px;
}

/* Indicator dot when kids has different meal */
.variant-btn__indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    background-color: var(--blue-500, #3B82F6);
    border-radius: var(--radius-full);
    margin-left: var(--space-1);
}

/* Protein Input */
.meal-protein-group {
    background-color: var(--green-50, #ECFDF5);
    border: 1px solid var(--green-200, #A7F3D0);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
}

.meal-protein-group .form-label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--green-700, #047857);
}

.meal-protein-group .form-label svg {
    width: 16px;
    height: 16px;
}

.meal-protein-input {
    max-width: 120px;
}

/* Apply to Both Checkbox */
.apply-both-checkbox {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3);
    background-color: var(--blue-50, #EFF6FF);
    border: 1px solid var(--blue-200, #BFDBFE);
    border-radius: var(--radius-lg);
    cursor: pointer;
}

.apply-both-checkbox .form-checkbox__label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--blue-700, #1D4ED8);
    font-weight: var(--font-medium);
}

.apply-both-checkbox .form-checkbox__label svg {
    width: 16px;
    height: 16px;
}

/* Widget prep alert */
.meals-widget__prep-alert {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-200, #FDE68A);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-3);
    font-size: var(--text-xs);
    color: var(--amber-700, #B45309);
}

.meals-widget__prep-alert svg {
    width: 14px;
    height: 14px;
    color: var(--amber-500, #F59E0B);
    flex-shrink: 0;
}

.meals-widget__protein {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--green-600, #059669);
}

.meals-widget__protein svg {
    width: 12px;
    height: 12px;
}

/* ==========================================================================
   Planner Layout with Prep Sidebar
   ========================================================================== */

.planner-layout {
    display: flex;
    gap: var(--space-4);
    align-items: flex-start;
}

.planner-layout .planner-table-wrapper {
    flex: 1;
    min-width: 0;
}

/* Prep Sidebar */
.prep-sidebar {
    width: 280px;
    flex-shrink: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-xl);
    overflow: hidden;
    position: sticky;
    top: var(--space-4);
    max-height: calc(100vh - 200px);
    overflow-y: auto;
}

.prep-sidebar__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background-color: var(--amber-50, #FFFBEB);
    border-bottom: 1px solid var(--amber-200, #FDE68A);
    font-weight: var(--font-semibold);
    color: var(--amber-800, #92400E);
}

.prep-sidebar__header svg {
    width: 18px;
    height: 18px;
    color: var(--amber-500, #F59E0B);
}

.prep-sidebar__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-6);
    text-align: center;
    color: var(--gray-500);
}

.prep-sidebar__empty svg {
    width: 32px;
    height: 32px;
    color: var(--green-400, #4ADE80);
    margin-bottom: var(--space-2);
}

.prep-sidebar__empty p {
    margin: 0;
    font-size: var(--text-sm);
}

.prep-sidebar__content {
    padding: var(--space-3);
}

.prep-sidebar__day {
    margin-bottom: var(--space-4);
}

.prep-sidebar__day:last-child {
    margin-bottom: 0;
}

.prep-sidebar__day-header {
    display: flex;
    align-items: baseline;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--gray-200);
}

.prep-sidebar__day-name {
    font-weight: var(--font-bold);
    color: var(--gray-800);
    font-size: var(--text-sm);
}

.prep-sidebar__for-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-style: italic;
}

.prep-sidebar__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.prep-sidebar__progress {
    margin-left: auto;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    background-color: var(--amber-100, #FEF3C7);
    color: var(--amber-700, #B45309);
    padding: 2px 8px;
    border-radius: var(--radius-full);
}

.prep-sidebar__item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    background-color: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-100, #FEF3C7);
    border-radius: var(--radius-lg);
    padding: var(--space-2) var(--space-3);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.prep-sidebar__item:hover {
    background-color: var(--amber-100, #FEF3C7);
}

.prep-sidebar__checkbox {
    width: 18px;
    height: 18px;
    margin-top: 2px;
    flex-shrink: 0;
    accent-color: var(--green-500, #22C55E);
    cursor: pointer;
}

.prep-sidebar__item-content {
    flex: 1;
    min-width: 0;
}

.prep-sidebar__item--done {
    background-color: var(--green-50, #F0FDF4);
    border-color: var(--green-200, #BBF7D0);
}

.prep-sidebar__item--done .prep-sidebar__item-name {
    text-decoration: line-through;
    color: var(--gray-500);
}

.prep-sidebar__item--done .prep-sidebar__item-name svg {
    color: var(--green-500, #22C55E);
}

.prep-sidebar__item--done .prep-sidebar__item-instructions {
    text-decoration: line-through;
    color: var(--gray-400);
}

.prep-sidebar__item-name {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    font-size: var(--text-sm);
    margin-bottom: var(--space-1);
}

.prep-sidebar__item-name svg {
    width: 14px;
    height: 14px;
    color: var(--amber-500, #F59E0B);
    flex-shrink: 0;
}

.prep-sidebar__item-instructions {
    font-size: var(--text-xs);
    color: var(--gray-600);
    line-height: 1.4;
    padding-left: 22px; /* align with text after icon */
}

/* Responsive - Prep Sidebar */
@media (max-width: 1024px) {
    .planner-layout {
        flex-direction: column;
    }

    .prep-sidebar {
        width: 100%;
        position: static;
        max-height: none;
        order: -1; /* Show prep above table on mobile */
        margin-bottom: var(--space-4);
    }

    .prep-sidebar__content {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-4);
    }

    .prep-sidebar__day {
        flex: 1;
        min-width: 200px;
        margin-bottom: 0;
    }
}

/* Responsive - Table Layout */
@media (max-width: 768px) {
    .weekly-planner__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .weekly-planner__controls {
        flex-wrap: wrap;
        width: 100%;
    }

    .weekly-planner__view-toggle {
        order: -1;
    }

    .view-toggle-btn span {
        display: none;
    }

    /* Table adjustments */
    .planner-table__corner {
        width: 90px;
        min-width: 90px;
    }

    .planner-table__day-header {
        min-width: 80px;
        padding: var(--space-2);
    }

    .planner-table__meal-label {
        padding: var(--space-2);
    }

    .planner-table__meal-label--sub {
        padding-left: var(--space-4);
    }

    .meal-label {
        font-size: var(--text-xs);
    }

    .meal-label svg {
        width: 14px;
        height: 14px;
    }

    .planner-cell {
        padding: var(--space-2);
    }

    .planner-cell__item {
        font-size: var(--text-xs);
    }
}

@media (max-width: 480px) {
    .weekly-planner {
        padding: var(--space-2);
    }

    .weekly-planner__prep-alert {
        font-size: var(--text-xs);
    }

    .variant-btn {
        padding: var(--space-2);
    }

    /* Table - more compact on mobile */
    .planner-table__corner {
        width: 70px;
        min-width: 70px;
    }

    .planner-table__day-header {
        min-width: 60px;
        padding: var(--space-1);
    }

    .planner-table__day-name {
        font-size: 9px;
    }

    .planner-table__day-date {
        font-size: var(--text-base);
    }

    .meal-label span:not(.meal-label__variant) {
        display: none;
    }

    .meal-label__variant {
        margin-left: 0;
    }
}

/* ==========================================================================
   Weekly Planner - Mobile Accordion View
   ========================================================================== */

/* Hide accordion on desktop, show table */
.planner-accordion {
    display: none;
}

@media (max-width: 768px) {
    /* Hide table on mobile, show accordion */
    .planner-table-wrapper {
        display: none !important;
    }

    .planner-accordion {
        display: flex;
        flex-direction: column;
        gap: var(--space-3);
    }
}

/* Accordion Day Card */
.accordion-day {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    border: 2px solid var(--day-border, var(--gray-200));
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-fast);
}

.accordion-day--today {
    border-width: 3px;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--day-border, var(--primary)) 30%, transparent);
}

.accordion-day__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4);
    background-color: var(--day-bg, var(--gray-50));
    border: none;
    width: 100%;
    cursor: pointer;
    transition: background-color var(--transition-fast);
    gap: var(--space-3);
}

.accordion-day__header:active {
    background-color: color-mix(in srgb, var(--day-bg, var(--gray-50)) 80%, black);
}

.accordion-day__header-left {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.accordion-day__chevron {
    width: 20px;
    height: 20px;
    color: var(--day-text, var(--gray-600));
    transition: transform var(--transition-fast);
    flex-shrink: 0;
}

.accordion-day--expanded .accordion-day__chevron {
    transform: rotate(90deg);
}

.accordion-day__date {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.accordion-day__day-name {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--day-text, var(--gray-700));
    letter-spacing: 0.05em;
}

.accordion-day__day-date {
    font-size: var(--text-xs);
    color: var(--day-text, var(--gray-600));
    opacity: 0.8;
}

.accordion-day__header-right {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    flex-shrink: 0;
}

.accordion-day__meal-count {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--day-text, var(--gray-600));
    padding: var(--space-1) var(--space-2);
    background-color: rgba(255, 255, 255, 0.6);
    border-radius: var(--radius-full);
}

.accordion-day__meal-count--empty {
    opacity: 0.6;
}

.accordion-day__today-badge {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--white);
    background-color: var(--primary);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

/* Accordion Content */
.accordion-day__content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    background-color: var(--white);
}

/* Variant Section (for "both" view) */
.accordion-variant {
    padding: var(--space-3) 0;
    border-bottom: 1px solid var(--gray-200);
}

.accordion-variant:last-child {
    border-bottom: none;
}

.accordion-variant__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: 0 var(--space-4) var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
}

.accordion-variant__header svg {
    width: 16px;
    height: 16px;
}

/* Accordion Meal Slot */
.accordion-meal {
    padding: var(--space-3) var(--space-4);
    cursor: pointer;
    transition: background-color var(--transition-fast);
    border-bottom: 1px solid var(--gray-100);
}

.accordion-meal:last-child {
    border-bottom: none;
}

.accordion-meal:active {
    background-color: var(--gray-50);
}

.accordion-meal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-2);
}

.accordion-meal__label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.accordion-meal__label svg {
    width: 16px;
    height: 16px;
    color: var(--day-text, var(--gray-500));
}

.accordion-meal__check {
    width: 32px;
    height: 32px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
    transition: all var(--transition-fast);
    border-radius: var(--radius-md);
}

.accordion-meal__check svg {
    width: 20px;
    height: 20px;
    color: var(--gray-400);
}

.accordion-meal__check--done svg {
    color: var(--success);
}

.accordion-meal__check:active {
    background-color: var(--gray-100);
}

.accordion-meal__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    margin-bottom: var(--space-2);
}

.accordion-meal__items--done {
    opacity: 0.5;
    text-decoration: line-through;
}

.accordion-meal__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-800);
    padding: var(--space-1) 0;
}

.accordion-meal__item svg {
    width: 14px;
    height: 14px;
    color: var(--day-text, var(--gray-500));
    flex-shrink: 0;
}

.accordion-meal__prep-icon {
    width: 14px !important;
    height: 14px !important;
    color: var(--warning) !important;
    margin-left: var(--space-1);
}

.accordion-meal__protein {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-600);
    padding: var(--space-1) 0;
}

.accordion-meal__protein svg {
    width: 12px;
    height: 12px;
}

/* Prep notes display in accordion view */
.accordion-meal__prep-note {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    font-size: var(--text-xs);
    color: var(--amber-700, #B45309);
    background-color: var(--amber-50, #FFFBEB);
    padding: var(--space-2);
    border-radius: var(--radius-sm);
    margin-top: var(--space-1);
}

.accordion-meal__prep-note svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    margin-top: 1px;
}

.accordion-meal__prep-note span {
    line-height: 1.4;
}

.accordion-meal__add {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-400);
    font-style: italic;
}

.accordion-meal__add svg {
    width: 16px;
    height: 16px;
}

.accordion-meal__same-adult {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--primary-light);
    color: var(--primary);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
    margin-bottom: var(--space-2);
    width: fit-content;
}

.accordion-meal__same-adult svg {
    width: 14px;
    height: 14px;
}

.accordion-meal__same-adult:active {
    background-color: var(--primary);
    color: var(--white);
}

.accordion-meal--completed {
    opacity: 0.6;
}

/* Accordion Protein Summary */
.accordion-protein {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background-color: var(--gray-50);
    font-size: var(--text-sm);
    color: var(--gray-700);
    border-top: 1px solid var(--gray-200);
}

.accordion-protein svg {
    width: 16px;
    height: 16px;
    color: var(--gray-600);
}

.accordion-protein strong {
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

/* ==========================================================================
   Workout Widget
   ========================================================================== */

.workout-widget__status {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.workout-widget__status--done {
    background-color: var(--success-light);
}

.workout-widget__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-full);
}

.workout-widget__icon svg {
    width: 24px;
    height: 24px;
    color: var(--gray-500);
}

.workout-widget__status--done .workout-widget__icon svg {
    color: var(--success);
}

.workout-widget__info {
    flex: 1;
}

.workout-widget__label {
    display: block;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.workout-widget__detail {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.workout-widget__week {
    display: flex;
    justify-content: space-between;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.workout-day {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    width: 36px;
    min-height: 48px;
    padding: var(--space-1) 0;
}

.workout-day__name {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.workout-day--today .workout-day__name {
    font-weight: var(--font-bold);
    color: var(--primary);
}

.workout-day__check {
    width: 16px;
    height: 16px;
    color: var(--success);
}

.workout-day--done {
    color: var(--success);
}

.workout-day__miss {
    width: 16px;
    height: 16px;
    color: var(--gray-400);
}

.workout-day--missed {
    opacity: 0.7;
}

/* Steps Tracker */
.workout-widget__steps {
    margin-top: var(--space-4);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.workout-steps__header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-2);
}

.workout-steps__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    border-radius: var(--radius-md);
    color: white;
}

.workout-steps__icon svg {
    width: 18px;
    height: 18px;
}

.workout-steps__info {
    flex: 1;
}

.workout-steps__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    display: block;
    margin-bottom: 2px;
}

.workout-steps__value {
    display: flex;
    align-items: baseline;
    gap: var(--space-1);
}

.workout-steps__count {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.workout-steps__goal {
    font-size: var(--text-sm);
    color: var(--gray-400);
}

.workout-steps__edit {
    width: 32px;
    height: 32px;
    padding: 0;
}

.workout-steps__progress {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.workout-steps__bar {
    flex: 1;
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.workout-steps__fill {
    height: 100%;
    background: linear-gradient(90deg, #10B981 0%, #059669 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

.workout-steps__percent {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-500);
    min-width: 32px;
    text-align: right;
}

/* Simple Steps Input */
.workout-widget__steps-simple {
    margin-top: var(--space-4);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
}

.workout-steps-simple__label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.workout-steps-simple__label svg {
    width: 18px;
    height: 18px;
    color: #10B981;
}

.workout-steps-simple__input-wrap {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.workout-steps-simple__input {
    width: 100px;
    text-align: right;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    padding: var(--space-2) var(--space-3);
}

.workout-steps-simple__input::placeholder {
    color: var(--gray-300);
    font-weight: var(--font-normal);
}

.workout-steps-simple__save {
    padding: var(--space-2);
}

.workout-steps-simple__save svg {
    width: 14px;
    height: 14px;
}

.workout-widget__routines {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

.workout-widget__section-title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    margin: 0 0 var(--space-3) 0;
}

.workout-widget__list {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-2);
}

.workout-routine {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-2);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    cursor: pointer;
    width: 100%;
    min-height: 70px;
    font-family: inherit;
    font-size: inherit;
}

.workout-routine:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.workout-routine:active {
    transform: scale(0.97);
    background-color: var(--primary);
    color: var(--white);
}

.workout-routine__icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-full);
}

.workout-routine__icon svg {
    width: 14px;
    height: 14px;
    color: var(--primary);
}

.workout-routine__name {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    text-align: center;
    line-height: 1.2;
}

.workout-routine__duration {
    font-size: 10px;
    color: var(--gray-500);
}

.workout-widget__footer {
    display: flex;
    justify-content: space-between;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* Mobile: Better spacing for footer buttons */
@media (max-width: 768px) {
    .workout-widget__footer {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-2);
    }

    .workout-widget__footer .btn {
        width: 100%;
        justify-content: center;
    }
}

/* Workout History Modal */
.workout-history-modal {
    max-height: 60vh;
    overflow-y: auto;
}

.workout-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-3);
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--gray-200);
}

.workout-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.workout-stat__value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.workout-stat__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

.workout-history-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.workout-history-day {
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.workout-history-day--today {
    border-color: var(--primary);
}

.workout-history-day__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.workout-history-day--today .workout-history-day__header {
    background-color: var(--primary-light);
}

.workout-history-day__date {
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.workout-history-day--today .workout-history-day__date {
    color: var(--primary);
}

.workout-history-day__count {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.workout-history-day__items {
    padding: var(--space-2);
}

.workout-history-entry {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    transition: background-color var(--transition-fast);
}

.workout-history-entry:hover {
    background-color: var(--gray-50);
}

.workout-history-entry__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary-light);
    border-radius: var(--radius-full);
    flex-shrink: 0;
}

.workout-history-entry__icon svg {
    width: 16px;
    height: 16px;
    color: var(--primary);
}

.workout-history-entry__info {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.workout-history-entry__name {
    font-weight: var(--font-medium);
    color: var(--gray-800);
}

.workout-history-entry__duration {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.workout-history-entry__delete {
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.workout-history-entry:hover .workout-history-entry__delete {
    opacity: 1;
}

.workout-history-entry__delete:hover {
    color: var(--danger);
}

/* Manage Routines Modal */
.manage-routines__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.manage-routines__item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.manage-routines__item svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.manage-routines__item span:first-of-type {
    flex: 1;
    font-weight: var(--font-medium);
}

/* ==========================================================================
   Workout History Page (Full Page Weekly View)
   ========================================================================== */

.workout-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: var(--space-6);
}

/* Tabbed Workout Page with Hero */
.workout-page--tabbed {
    padding: 0;
    max-width: 100%;
}

.workout-page__hero {
    background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 50%, #93C5FD 100%);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
}

.workout-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 60%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
    pointer-events: none;
}

.workout-page__back {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    color: #1E40AF;
    z-index: 10;
    cursor: pointer;
}

.workout-page__back:hover {
    background-color: rgba(255, 255, 255, 0.3);
}

.workout-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.workout-page__hero-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #1E40AF;
    margin: 0 0 var(--space-2) 0;
}

.workout-page__hero-title svg {
    width: 32px;
    height: 32px;
    color: #3B82F6;
}

.workout-page__hero-subtitle {
    font-size: var(--text-base);
    color: #1E40AF;
    opacity: 0.8;
    margin: 0;
}

.workout-page__hero-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.workout-hero-stat {
    text-align: center;
}

.workout-hero-stat__value {
    display: block;
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #1E40AF;
}

.workout-hero-stat__label {
    display: block;
    font-size: var(--text-sm);
    color: #1E40AF;
    opacity: 0.8;
}

/* Workout Tab Navigation */
.workout-page--tabbed .workout-page__tabs {
    display: flex;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-6);
    background: var(--white);
    border-bottom: 1px solid var(--gray-200);
}

.workout-tab {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    border: none;
    border-radius: var(--radius-full);
    background: transparent;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-tab svg {
    width: 18px;
    height: 18px;
}

.workout-tab:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.workout-tab--active {
    background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%);
    color: white;
}

.workout-tab--active:hover {
    background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%);
    color: white;
}

/* Workout Page Content */
.workout-page--tabbed .workout-page__content {
    padding: var(--space-6);
    max-width: 1100px;
    margin: 0 auto;
}

/* History Section */
.workout-history-section {
    max-width: 100%;
}

.workout-week-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    margin-bottom: var(--space-6);
}

.workout-week-nav__btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-week-nav__btn:hover:not(:disabled) {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.workout-week-nav__btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.workout-week-nav__btn svg {
    width: 18px;
    height: 18px;
}

.workout-week-nav__text {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 200px;
    text-align: center;
}

/* Workout Goal Buttons */
.workout-goal-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
}

.workout-goal-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-md);
    background: var(--white);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-goal-btn:hover {
    border-color: #3B82F6;
    color: #3B82F6;
}

.workout-goal-btn--active {
    background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%);
    border-color: #3B82F6;
    color: white;
}

.workout-goal-btn--active:hover {
    color: white;
}

/* Responsive - Tabbed Workout Page */
@media (max-width: 768px) {
    .workout-page__hero {
        padding: var(--space-3);
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .workout-page__back {
        position: static;
        align-self: flex-start;
        margin-bottom: var(--space-2);
    }

    .workout-page__hero-content {
        text-align: center;
    }

    .workout-page__hero-title {
        font-size: var(--text-lg);
        gap: var(--space-2);
    }

    .workout-page__hero-title svg {
        width: 22px;
        height: 22px;
    }

    .workout-page__hero-subtitle {
        font-size: var(--text-sm);
        margin-bottom: var(--space-2);
    }

    .workout-page__hero-stats {
        gap: var(--space-4);
        margin-top: var(--space-3);
    }

    .workout-hero-stat__value {
        font-size: var(--text-lg);
    }

    .workout-hero-stat__label {
        font-size: var(--text-xs);
    }

    .workout-page--tabbed .workout-page__tabs {
        padding: var(--space-2) var(--space-3);
        gap: var(--space-1);
    }

    .workout-tab {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
    }

    .workout-page--tabbed .workout-page__content {
        padding: var(--space-4);
    }

    .workout-week-nav__text {
        font-size: var(--text-sm);
        min-width: 160px;
    }

    /* Goal buttons on mobile */
    .workout-goal-box__setting {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .workout-goal-buttons {
        width: 100%;
        justify-content: space-between;
    }

    .workout-goal-btn {
        flex: 1;
        max-width: 45px;
    }
}

@media (max-width: 480px) {
    .workout-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-3);
    }

    .workout-hero-stat {
        min-width: 80px;
    }

    .workout-tab {
        padding: var(--space-2);
        flex: 1;
        justify-content: center;
    }

    .workout-tab span {
        display: none;
    }
}

.workout-page__header {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.workout-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    flex: 1;
    margin: 0;
}

.workout-page__title svg {
    width: 24px;
    height: 24px;
    color: var(--primary);
}

.workout-page__nav {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.workout-page__nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-page__nav-btn:hover:not(:disabled) {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.workout-page__nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.workout-page__nav-btn svg {
    width: 18px;
    height: 18px;
}

.workout-page__week {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 180px;
    text-align: center;
}

/* Workout Stats Row */
.workout-page__stats {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.workout-stat-card {
    flex: 1;
    min-width: 140px;
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
}

.workout-stat-card__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
}

.workout-stat-card__icon svg {
    width: 24px;
    height: 24px;
}

.workout-stat-card__icon--flame {
    background-color: #FEF3C7;
}

.workout-stat-card__icon--flame svg {
    color: #F59E0B;
}

.workout-stat-card__icon--target {
    background-color: #DBEAFE;
}

.workout-stat-card__icon--target svg {
    color: #3B82F6;
}

.workout-stat-card__icon--clock {
    background-color: #D1FAE5;
}

.workout-stat-card__icon--clock svg {
    color: #10B981;
}

.workout-stat-card__icon--total {
    background-color: #FCE7F3;
}

.workout-stat-card__icon--total svg {
    color: #EC4899;
}

.workout-stat-card__info {
    display: flex;
    flex-direction: column;
}

.workout-stat-card__value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    line-height: 1.2;
}

.workout-stat-card__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Weekly Grid Layout */
.workout-page__content {
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: var(--space-6);
}

.workout-week {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(2, auto);
    gap: var(--space-4);
}

/* Day Cards */
.workout-day-card {
    background-color: var(--day-bg);
    border: 2px solid var(--day-border);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    min-height: 160px;
    display: flex;
    flex-direction: column;
    position: relative;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.workout-day-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.workout-day-card--today {
    box-shadow: 0 0 0 3px var(--primary), var(--shadow-md);
}

.workout-day-card--today:hover {
    box-shadow: 0 0 0 3px var(--primary), var(--shadow-lg);
}

.workout-day-card--has-workouts {
    border-style: solid;
}

.workout-day-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-3);
}

.workout-day-card__title {
    display: flex;
    flex-direction: column;
}

.workout-day-card__name {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--day-text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.workout-day-card__date {
    font-size: var(--text-xs);
    color: var(--day-text);
    opacity: 0.7;
}

.workout-day-card__summary {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--day-text);
    padding: var(--space-1) var(--space-2);
    background-color: rgba(255, 255, 255, 0.6);
    border-radius: var(--radius-full);
}

.workout-day-card__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.workout-day-card__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2);
    background-color: rgba(255, 255, 255, 0.6);
    border-radius: var(--radius-md);
    transition: background-color var(--transition-fast);
}

.workout-day-card__item:hover {
    background-color: rgba(255, 255, 255, 0.9);
}

.workout-day-card__item svg {
    width: 14px;
    height: 14px;
    color: var(--day-text);
    flex-shrink: 0;
}

.workout-day-card__item-name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--day-text);
    font-weight: var(--font-medium);
}

.workout-day-card__item-duration {
    font-size: var(--text-xs);
    color: var(--day-text);
    opacity: 0.8;
}

.workout-day-card__item-delete {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0.5;
    transition: opacity var(--transition-fast);
    color: var(--day-text);
    padding: 0;
    flex-shrink: 0;
}

.workout-day-card__item:hover .workout-day-card__item-delete {
    opacity: 0.8;
}

.workout-day-card__item-delete:hover {
    opacity: 1 !important;
    color: var(--error);
}

.workout-day-card__item-delete svg {
    width: 14px;
    height: 14px;
    pointer-events: none;
}

.workout-day-card__empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    opacity: 0.6;
}

.workout-day-card__empty svg {
    width: 24px;
    height: 24px;
    color: var(--day-text);
    margin-bottom: var(--space-2);
}

.workout-day-card__empty span {
    font-size: var(--text-xs);
    color: var(--day-text);
}

.workout-day-card__steps {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2);
    margin-top: var(--space-2);
    background-color: rgba(16, 185, 129, 0.1);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: #059669;
}

.workout-day-card__steps svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

.workout-day-card__add {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    width: 100%;
    padding: var(--space-2);
    margin-top: var(--space-2);
    background-color: rgba(255, 255, 255, 0.5);
    border: 1px dashed var(--day-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--day-text);
    transition: all var(--transition-fast);
}

.workout-day-card__add:hover {
    background-color: rgba(255, 255, 255, 0.9);
    border-style: solid;
}

.workout-day-card__add svg {
    width: 14px;
    height: 14px;
}

/* Workout Goal Box */
.workout-goal-box {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    padding: var(--space-4);
    height: fit-content;
}

.workout-goal-box__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--gray-200);
}

.workout-goal-box__header svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.workout-goal-box__header span {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.workout-goal-box__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.workout-goal-box__progress {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.workout-goal-box__bar {
    height: 12px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.workout-goal-box__fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), #10B981);
    border-radius: var(--radius-full);
    transition: width var(--transition-normal);
}

.workout-goal-box__text {
    font-size: var(--text-sm);
    color: var(--gray-600);
    text-align: center;
}

.workout-goal-box__setting {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-2);
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
}

.workout-goal-box__setting label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.workout-goal-box__setting select {
    width: 70px;
}

/* Quick Add Section */
.workout-quick-add {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

.workout-quick-add__title {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-3) 0;
}

.workout-quick-add__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.workout-quick-add__btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    font-size: var(--text-sm);
    color: var(--gray-700);
    transition: all var(--transition-fast);
    text-align: left;
}

.workout-quick-add__btn:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.workout-quick-add__btn svg {
    width: 16px;
    height: 16px;
}

/* Add Workout Modal */
.add-workout-modal__date {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    margin: 0 0 var(--space-4) 0;
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--gray-200);
}

.add-workout-modal__date svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.add-workout-modal__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.add-workout-modal__routine {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
}

.add-workout-modal__routine:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.add-workout-modal__routine-icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-full);
}

.add-workout-modal__routine-icon svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.add-workout-modal__routine-name {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.add-workout-modal__routine-duration {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Add Workout Modal - Steps Section */
.add-workout-modal__steps {
    margin-bottom: var(--space-4);
}

.add-workout-modal__steps-label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    margin-bottom: var(--space-2);
}

.add-workout-modal__steps-label svg {
    width: 16px;
    height: 16px;
    color: var(--primary);
}

.add-workout-modal__steps-input {
    display: flex;
    gap: var(--space-2);
    align-items: center;
}

.add-workout-modal__steps-input .form-input {
    flex: 1;
}

.add-workout-modal__divider {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin: var(--space-4) 0;
    color: var(--gray-500);
    font-size: var(--text-sm);
}

.add-workout-modal__divider::before,
.add-workout-modal__divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--gray-200);
}

/* Workout Widget Header with Streak */
.workout-widget__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
}

.workout-widget__streak {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.workout-widget__streak svg {
    width: 14px;
    height: 14px;
}

.workout-widget__streak--active {
    background-color: #FEF3C7;
    color: #92400E;
}

.workout-widget__streak--active svg {
    color: #F59E0B;
}

.workout-widget__badge {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--success);
}

.workout-widget__badge svg {
    width: 14px;
    height: 14px;
}

/* Weekly Goal Met State */
.workout-widget--goal-met {
    position: relative;
}

.workout-widget--goal-met::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #10B981, #059669, #10B981);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

/* Empty State / Motivational Message */
.workout-widget__empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-4);
    text-align: center;
    background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-3);
}

.workout-widget__empty-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--primary) 0%, #8B5CF6 100%);
    border-radius: var(--radius-full);
    margin-bottom: var(--space-3);
}

.workout-widget__empty-icon svg {
    width: 24px;
    height: 24px;
    color: white;
}

.workout-widget__motivation {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0;
    line-height: 1.5;
    max-width: 280px;
}

/* Weekly Progress Bar */
.workout-widget__weekly-progress {
    margin-bottom: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.workout-weekly-progress__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.workout-weekly-progress__label {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-weight: var(--font-medium);
}

.workout-weekly-progress__label svg {
    width: 12px;
    height: 12px;
}

.workout-weekly-progress__count {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.workout-weekly-progress__count--complete {
    color: var(--success);
}

.workout-weekly-progress__bar {
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.workout-weekly-progress__fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary) 0%, #8B5CF6 100%);
    border-radius: var(--radius-full);
    transition: width 0.4s ease;
}

.workout-weekly-progress__fill--complete {
    background: linear-gradient(90deg, #10B981 0%, #059669 100%);
}

/* Weekly View with Date Numbers */
.workout-day__date {
    font-size: 10px;
    font-weight: var(--font-semibold);
    color: var(--gray-400);
    margin-top: -2px;
}

.workout-day--today .workout-day__date {
    color: var(--primary);
}

.workout-day--done .workout-day__date {
    color: var(--success);
}

/* Steps Goal Section */
.workout-widget__steps-goal {
    margin-bottom: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.workout-steps-goal__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.workout-steps-goal__label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.workout-steps-goal__label svg {
    width: 16px;
    height: 16px;
    color: #10B981;
}

.workout-steps-goal__edit {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
}

.workout-steps-goal__edit:hover {
    color: var(--gray-600);
    background-color: var(--gray-100);
}

.workout-steps-goal__edit svg {
    width: 14px;
    height: 14px;
}

.workout-steps-goal__input-row {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.workout-steps-goal__input {
    flex: 1;
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    text-align: center;
    border: 1px solid var(--gray-200);
    background-color: white;
    padding: var(--space-2);
}

.workout-steps-goal__input:focus {
    border-color: #10B981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.workout-steps-goal__target {
    font-size: var(--text-sm);
    color: var(--gray-400);
    white-space: nowrap;
}

.workout-steps-goal__bar {
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--space-1);
}

.workout-steps-goal__fill {
    height: 100%;
    background: linear-gradient(90deg, #10B981 0%, #059669 100%);
    border-radius: var(--radius-full);
    transition: width 0.4s ease;
}

.workout-steps-goal__fill--complete {
    background: linear-gradient(90deg, #10B981 0%, #34D399 100%);
    animation: pulse-glow 1.5s ease-in-out infinite;
}

@keyframes pulse-glow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.workout-steps-goal__success {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--success);
    margin-top: var(--space-1);
}

.workout-steps-goal__success svg {
    width: 12px;
    height: 12px;
}

/* Steps Goal Presets */
.steps-goal-presets {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: var(--space-2);
    justify-content: center;
}

/* Celebration Animation */
.workout-celebration {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 10000;
    animation: celebration-fade-in 0.2s ease;
}

@keyframes celebration-fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}

.workout-celebration--fade {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.workout-celebration__content {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-6);
}

.workout-celebration__message {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    animation: celebration-bounce 0.5s ease;
}

@keyframes celebration-bounce {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
}

.workout-celebration__confetti {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200px;
    height: 200px;
    transform: translate(-50%, -50%);
    pointer-events: none;
}

.workout-celebration__confetti span {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    animation: confetti-fall 1.5s ease-out forwards;
}

.workout-celebration__confetti span:nth-child(1) { background: #FFD700; left: 50%; animation-delay: 0s; }
.workout-celebration__confetti span:nth-child(2) { background: #FF6B6B; left: 30%; animation-delay: 0.1s; }
.workout-celebration__confetti span:nth-child(3) { background: #4ECDC4; left: 70%; animation-delay: 0.05s; }
.workout-celebration__confetti span:nth-child(4) { background: #45B7D1; left: 20%; animation-delay: 0.15s; }
.workout-celebration__confetti span:nth-child(5) { background: #96CEB4; left: 80%; animation-delay: 0.08s; }
.workout-celebration__confetti span:nth-child(6) { background: #FFEAA7; left: 40%; animation-delay: 0.12s; }
.workout-celebration__confetti span:nth-child(7) { background: #DDA0DD; left: 60%; animation-delay: 0.03s; }
.workout-celebration__confetti span:nth-child(8) { background: #98D8C8; left: 10%; animation-delay: 0.18s; }
.workout-celebration__confetti span:nth-child(9) { background: #F7DC6F; left: 90%; animation-delay: 0.07s; }
.workout-celebration__confetti span:nth-child(10) { background: #BB8FCE; left: 45%; animation-delay: 0.13s; }
.workout-celebration__confetti span:nth-child(11) { background: #85C1E9; left: 55%; animation-delay: 0.02s; }
.workout-celebration__confetti span:nth-child(12) { background: #F8B500; left: 35%; animation-delay: 0.16s; }

@keyframes confetti-fall {
    0% {
        top: 50%;
        opacity: 1;
        transform: rotate(0deg) scale(1);
    }
    100% {
        top: 150%;
        opacity: 0;
        transform: rotate(720deg) scale(0.5);
    }
}

/* ========================
   Workout Suggestion System
   ======================== */

/* Suggest Workout Button */
.workout-suggest-btn {
    width: 100%;
    margin-top: var(--space-4);
    gap: var(--space-2);
    padding: var(--space-3);
    background: linear-gradient(135deg, var(--primary), #8B5CF6);
    border: none;
    font-weight: var(--font-semibold);
}

.workout-suggest-btn:hover {
    background: linear-gradient(135deg, #4F46E5, #7C3AED);
}

/* Card-style Questionnaire */
.suggest-cards {
    position: relative;
    overflow: hidden;
    min-height: 300px;
}

.suggest-card {
    position: absolute;
    width: 100%;
    padding: var(--space-6);
    text-align: center;
    transition: transform 0.35s ease, opacity 0.35s ease;
}

.suggest-card--active {
    transform: translateX(0);
    opacity: 1;
    position: relative;
}

.suggest-card--prev {
    transform: translateX(-100%);
    opacity: 0;
}

.suggest-card--next {
    transform: translateX(100%);
    opacity: 0;
}

.suggest-card__icon {
    font-size: 56px;
    margin-bottom: var(--space-4);
}

.suggest-card h3 {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    margin: 0 0 var(--space-2) 0;
}

.suggest-card__hint {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin: 0 0 var(--space-5) 0;
}

.suggest-card__options {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    justify-content: center;
}

.suggest-card__option {
    padding: var(--space-3) var(--space-5);
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-xl);
    background: var(--white);
    cursor: pointer;
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    transition: all 0.2s ease;
}

.suggest-card__option:hover {
    border-color: var(--primary);
    background: var(--primary-light);
}

.suggest-card__option--selected {
    background: var(--primary);
    color: var(--white);
    border-color: var(--primary);
}

.suggest-card__option--selected:hover {
    background: var(--primary);
    color: var(--white);
}

/* Day options for rest days */
.suggest-card__options--days .suggest-card__option {
    min-width: 50px;
}

.suggest-card__options--week .suggest-card__option {
    min-width: 60px;
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-sm);
}

.suggest-card__options--time .suggest-card__option {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-4);
}

.suggest-card__option-icon {
    font-size: 24px;
}

/* Goal options - vertical list style */
.suggest-card__options--goals {
    flex-direction: column;
    gap: var(--space-3);
    max-width: 320px;
    margin: 0 auto;
}

.suggest-card__option--goal {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    width: 100%;
    text-align: left;
}

.suggest-card__option--goal .suggest-card__option-icon {
    font-size: 28px;
    flex-shrink: 0;
}

.suggest-card__option--goal .suggest-card__option-label {
    font-weight: var(--font-semibold);
    display: block;
}

.suggest-card__option--goal .suggest-card__option-desc {
    font-size: var(--text-xs);
    color: var(--gray-500);
    display: block;
    margin-top: 2px;
}

.suggest-card__option--goal.suggest-card__option--selected .suggest-card__option-desc {
    color: rgba(255, 255, 255, 0.8);
}

/* Navigation */
.suggest-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-4);
    border-top: 1px solid var(--gray-200);
    margin-top: var(--space-4);
}

.suggest-nav__dots {
    display: flex;
    gap: var(--space-2);
}

.suggest-nav__dot {
    width: 10px;
    height: 10px;
    border-radius: var(--radius-full);
    background: var(--gray-300);
    transition: all 0.2s ease;
}

.suggest-nav__dot--active {
    background: var(--primary);
    width: 24px;
}

/* Plan Approval Screen */
.suggest-approval {
    padding: var(--space-6);
    text-align: center;
}

.suggest-approval__header {
    margin-bottom: var(--space-6);
}

.suggest-approval__header svg {
    width: 48px;
    height: 48px;
    color: var(--primary);
    margin-bottom: var(--space-3);
}

.suggest-approval__header h3 {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    margin: 0 0 var(--space-2) 0;
}

.suggest-approval__header p {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin: 0;
}

.suggest-preview-week {
    display: flex;
    gap: var(--space-2);
    justify-content: center;
    margin-bottom: var(--space-5);
    flex-wrap: wrap;
}

.suggest-preview-day {
    padding: var(--space-3) var(--space-2);
    border-radius: var(--radius-lg);
    min-width: 70px;
    text-align: center;
}

.suggest-preview-day--rest {
    background: var(--gray-100);
    color: var(--gray-400);
}

.suggest-preview-day--workout {
    background: #D1FAE5;
    color: #065F46;
}

.suggest-preview-day--today {
    box-shadow: 0 0 0 2px var(--primary);
}

.suggest-preview-day__name {
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    margin-bottom: var(--space-1);
}

.suggest-preview-day__status {
    display: block;
    font-size: var(--text-xs);
}

.suggest-preview-day__workout {
    display: block;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.suggest-approval__summary {
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-5);
    display: flex;
    justify-content: center;
    gap: var(--space-6);
}

.suggest-approval__summary p {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.suggest-approval__actions {
    display: flex;
    gap: var(--space-3);
    justify-content: center;
}

/* Suggestion on Day Card */
.workout-day-card__suggestion {
    margin-top: var(--space-2);
    padding: var(--space-2);
    border: 2px dashed var(--day-border);
    border-radius: var(--radius-lg);
    background: rgba(255, 255, 255, 0.6);
}

.workout-day-card__suggestion-label {
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--gray-500);
    margin-bottom: var(--space-1);
    font-weight: var(--font-semibold);
}

.workout-day-card__suggestion-content {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
    font-size: var(--text-sm);
    color: var(--day-text);
}

.workout-day-card__suggestion-content svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

.workout-day-card__suggestion-content span:last-child {
    margin-left: auto;
    color: var(--gray-500);
    font-size: var(--text-xs);
}

.suggestion-done-btn {
    width: 100%;
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-xs);
    gap: var(--space-1);
}

.suggestion-done-btn svg {
    width: 12px;
    height: 12px;
}

.suggestion-done-btn:disabled {
    background: var(--color-gray-200);
    color: var(--color-gray-500);
    cursor: not-allowed;
    opacity: 0.7;
}

.suggestion-done-btn:disabled:hover {
    background: var(--color-gray-200);
    transform: none;
}

/* Responsive - Workout Page */
@media (max-width: 1024px) {
    .workout-page__content {
        grid-template-columns: 1fr;
    }

    .workout-goal-box {
        order: -1;
    }

    .workout-week {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 768px) {
    .workout-page {
        padding: var(--space-4);
    }

    .workout-page__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .workout-page__nav {
        width: 100%;
        justify-content: center;
    }

    .workout-page__stats {
        flex-wrap: wrap;
    }

    .workout-stat-card {
        flex: 1 1 calc(50% - var(--space-2));
        min-width: 140px;
    }

    .workout-week {
        grid-template-columns: repeat(2, 1fr);
    }

    .workout-day-card {
        min-height: 140px;
    }
}

@media (max-width: 480px) {
    .workout-stat-card {
        flex: 1 1 100%;
    }

    .workout-week {
        grid-template-columns: 1fr;
    }

    .workout-day-card {
        min-height: 120px;
    }
}

/* ==========================================================================
   Achievements Widget
   ========================================================================== */

.achievements-widget__summary {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    padding: var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.achievements-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.achievements-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.achievements-stat__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.achievements-section {
    margin-bottom: var(--space-4);
}

.achievements-section__title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    margin: 0 0 var(--space-3) 0;
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-2);
}

.achievement-badge {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2);
    text-align: center;
}

.achievement-badge__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
}

.achievement-badge__icon svg {
    width: 20px;
    height: 20px;
    color: var(--gray-400);
}

.achievement-badge--earned .achievement-badge__icon {
    background-color: var(--warning-light);
}

.achievement-badge--earned .achievement-badge__icon svg {
    color: var(--warning);
}

.achievement-badge--locked .achievement-badge__icon {
    opacity: 0.5;
}

.achievement-badge__name {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

.achievement-badge__progress {
    font-size: 10px;
    color: var(--gray-400);
}

.achievements-widget__footer {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
    text-align: center;
}

/* ==========================================================================
   Chores Widget
   ========================================================================== */

.chores-widget__progress {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.chores-progress {
    flex: 1;
    height: 8px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.chores-progress__bar {
    height: 100%;
    background: linear-gradient(90deg, var(--success) 0%, #34D399 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

.chores-widget__count {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    white-space: nowrap;
}

.chores-widget__section {
    margin-bottom: var(--space-4);
}

.chores-widget__title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    margin: 0 0 var(--space-2) 0;
}

.chores-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.chore-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    text-align: left;
}

.chore-item:hover:not(.chore-item--done) {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.chore-item--done {
    background-color: var(--success-light);
    border-color: var(--success);
    opacity: 0.7;
}

.chore-item__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.chore-item__icon svg {
    width: 16px;
    height: 16px;
    color: var(--gray-600);
}

.chore-item--done .chore-item__icon svg {
    color: var(--success);
}

.chore-item__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.chore-item__points {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--warning);
}

.chores-widget__complete {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-6);
    background-color: var(--success-light);
    border-radius: var(--radius-lg);
    color: var(--success);
    font-weight: var(--font-semibold);
}

.chores-widget__complete svg {
    width: 32px;
    height: 32px;
}

.chores-widget__footer {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
    text-align: center;
}

/* ==========================================================================
   Activities Widget (Toddler)
   ========================================================================== */

.activities-widget__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.activities-widget__label {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.activities-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.activity-card {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.activity-card--done {
    background-color: var(--success-light);
}

.activity-card__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
}

.activity-card__icon svg {
    width: 20px;
    height: 20px;
    color: var(--white);
}

.activity-card__content {
    flex: 1;
}

.activity-card__name {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.activity-card__category {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.activities-widget__footer {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
    text-align: center;
}

/* All Activities Modal */
.all-activities__category {
    margin-bottom: var(--space-4);
}

.all-activities__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-2) 0;
}

.all-activities__title svg {
    width: 16px;
    height: 16px;
    color: var(--primary);
}

.all-activities__list {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.all-activities__item {
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

/* ==========================================================================
   Daily Log Widget (Toddler)
   ========================================================================== */

.daily-log-widget__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.daily-log-widget__date {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.daily-log-widget__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.log-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.log-item__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.log-item__icon svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.log-item__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.log-item__counter {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.log-counter__btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-200);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.log-counter__btn:hover {
    background-color: var(--primary);
    color: var(--white);
}

.log-counter__value {
    min-width: 24px;
    text-align: center;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.log-item__time {
    width: 100px;
    padding: var(--space-2);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
}

.log-item__moods {
    display: flex;
    gap: var(--space-1);
}

.mood-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border: 2px solid transparent;
    border-radius: var(--radius-md);
    font-size: var(--text-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.mood-btn:hover {
    transform: scale(1.1);
}

.mood-btn--active {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.daily-log-widget__footer {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

.daily-log-widget__notes {
    margin-top: var(--space-3);
    padding: var(--space-3);
    background-color: var(--warning-light);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: #92400E;
}

/* Daily Log History Full Page */
.daily-log-history {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    max-width: 600px;
    margin: 0 auto;
}

.daily-log-history__card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-100);
}

.daily-log-history__card--today {
    border-color: var(--primary);
    border-width: 2px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.02) 0%, rgba(99, 102, 241, 0.05) 100%);
}

.daily-log-history__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-3);
}

.daily-log-history__date {
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    font-size: var(--text-base);
}

.daily-log-history__card--today .daily-log-history__date {
    color: var(--primary);
}

.daily-log-history__mood {
    font-size: 1.5rem;
}

.daily-log-history__stats {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
}

.daily-log-history__stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.daily-log-history__stat svg {
    width: 16px;
    height: 16px;
    color: var(--gray-500);
}

.daily-log-history__notes {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    margin-top: var(--space-3);
    padding: var(--space-3);
    background-color: var(--warning-light);
    border-radius: var(--radius-lg);
}

.daily-log-history__notes svg {
    width: 16px;
    height: 16px;
    color: #92400E;
    flex-shrink: 0;
    margin-top: 2px;
}

.daily-log-history__notes p {
    margin: 0;
    font-size: var(--text-sm);
    color: #92400E;
    line-height: 1.5;
}

/* ==========================================================================
   Gratitude Widget
   ========================================================================== */

.gratitude-widget__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-4);
}

.gratitude-widget__streak {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-500);
}

.gratitude-widget__streak--active {
    background-color: var(--warning-light);
    color: #92400E;
}

.gratitude-widget__streak svg {
    width: 14px;
    height: 14px;
    color: var(--gray-400);
}

.gratitude-widget__streak--active svg {
    color: var(--warning);
}

.gratitude-widget__badge {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--success);
}

.gratitude-widget__badge svg {
    width: 14px;
    height: 14px;
}

.gratitude-widget__prompt {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.gratitude-widget__prompt svg {
    width: 20px;
    height: 20px;
    color: var(--warning);
    flex-shrink: 0;
    margin-top: 2px;
}

.gratitude-widget__prompt span {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-style: italic;
}

.gratitude-widget__today {
    padding: var(--space-3);
    background-color: var(--success-light);
    border-radius: var(--radius-lg);
}

.gratitude-widget__today-label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--success);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-2);
}

.gratitude-widget__today-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.gratitude-widget__item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
}

.gratitude-widget__item svg {
    width: 14px;
    height: 14px;
    color: var(--error);
    flex-shrink: 0;
    margin-top: 2px;
}

.gratitude-widget__item span {
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.gratitude-widget__footer {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* Gratitude Write Modal */
.gratitude-write__prompt {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3);
    background-color: var(--warning-light);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.gratitude-write__prompt svg {
    width: 20px;
    height: 20px;
    color: var(--warning);
    flex-shrink: 0;
}

.gratitude-write__prompt span {
    font-size: var(--text-sm);
    color: #92400E;
    font-style: italic;
}

.gratitude-write__instruction {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-3) 0;
}

.gratitude-write__inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.gratitude-write__input-row {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.gratitude-write__number {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-300);
    width: 24px;
}

.gratitude-write__input-row .form-input {
    flex: 1;
}

/* Gratitude History Modal */
.gratitude-history__stats {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.gratitude-history__stat {
    flex: 1;
    text-align: center;
}

.gratitude-history__stat-value {
    display: block;
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.gratitude-history__stat-label {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: var(--space-1);
}

.gratitude-history__empty {
    text-align: center;
    padding: var(--space-8);
    color: var(--gray-400);
}

.gratitude-history__empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.gratitude-history__empty p {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    margin: 0 0 var(--space-1) 0;
}

.gratitude-history__empty span {
    font-size: var(--text-sm);
}

.gratitude-history__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    max-height: 400px;
    overflow-y: auto;
}

.gratitude-history__month-title {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 0 0 var(--space-3) 0;
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--gray-200);
}

.gratitude-history__entries {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.gratitude-history__entry {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    transition: background-color var(--transition-fast);
}

.gratitude-history__entry:hover {
    background-color: var(--gray-100);
}

.gratitude-history__entry--today {
    background-color: var(--success-light);
}

.gratitude-history__entry--today:hover {
    background-color: var(--success-light);
}

.gratitude-history__entry-date {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 40px;
}

.gratitude-history__day-name {
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
}

.gratitude-history__day-num {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-700);
}

.gratitude-history__entry-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.gratitude-history__item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
}

.gratitude-history__item svg {
    width: 14px;
    height: 14px;
    color: var(--error);
    flex-shrink: 0;
    margin-top: 2px;
}

.gratitude-history__item span {
    font-size: var(--text-sm);
    color: var(--gray-700);
}

/* Gratitude Widget Input Section */
.gratitude-widget__input-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.gratitude-widget__input-row {
    display: flex;
    align-items: center;
}

.gratitude-widget__input-row .form-input {
    flex: 1;
    font-size: var(--text-sm);
}

/* ==========================================================================
   Gratitude Journal Page (Weekly View)
   ========================================================================== */

.gratitude-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: var(--space-6);
}

.gratitude-page__header {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.gratitude-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    flex: 1;
    margin: 0;
}

.gratitude-page__title svg {
    width: 24px;
    height: 24px;
    color: var(--error);
}

.gratitude-page__nav {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.gratitude-page__nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.gratitude-page__nav-btn:hover:not(:disabled) {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.gratitude-page__nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.gratitude-page__nav-btn svg {
    width: 18px;
    height: 18px;
}

.gratitude-page__week {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 180px;
    text-align: center;
}

/* Gratitude Stats Row */
.gratitude-page__stats {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
}

.gratitude-stat {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
}

.gratitude-stat__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
}

.gratitude-stat__icon svg {
    width: 24px;
    height: 24px;
}

.gratitude-stat__icon--flame {
    background-color: #FEF3C7;
}

.gratitude-stat__icon--flame svg {
    color: #F59E0B;
}

.gratitude-stat__icon--target {
    background-color: #DBEAFE;
}

.gratitude-stat__icon--target svg {
    color: #3B82F6;
}

.gratitude-stat__icon--book {
    background-color: #FCE7F3;
}

.gratitude-stat__icon--book svg {
    color: #EC4899;
}

.gratitude-stat__info {
    display: flex;
    flex-direction: column;
}

.gratitude-stat__value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    line-height: 1.2;
}

.gratitude-stat__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Weekly Grid */
.gratitude-page__content {
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: var(--space-6);
}

.gratitude-week {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(2, auto);
    gap: var(--space-4);
}

/* Day Cards */
.gratitude-day {
    background-color: var(--day-bg);
    border: 2px solid var(--day-border);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    min-height: 160px;
    display: flex;
    flex-direction: column;
    position: relative;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.gratitude-day:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.gratitude-day--today {
    cursor: pointer;
    box-shadow: 0 0 0 3px var(--primary), var(--shadow-md);
}

.gratitude-day--today:hover {
    box-shadow: 0 0 0 3px var(--primary), var(--shadow-lg);
}

.gratitude-day__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-3);
}

.gratitude-day__name {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--day-text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.gratitude-day__date {
    font-size: var(--text-xs);
    color: var(--day-text);
    opacity: 0.7;
}

.gratitude-day__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.gratitude-day__item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
}

.gratitude-day__item svg {
    width: 14px;
    height: 14px;
    color: var(--day-text);
    opacity: 0.7;
    flex-shrink: 0;
    margin-top: 2px;
}

.gratitude-day__item span {
    font-size: var(--text-sm);
    color: var(--day-text);
    line-height: 1.4;
}

.gratitude-day__empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    opacity: 0.6;
}

.gratitude-day__empty svg {
    width: 24px;
    height: 24px;
    color: var(--day-text);
    margin-bottom: var(--space-2);
}

.gratitude-day__empty span {
    font-size: var(--text-xs);
    color: var(--day-text);
}

.gratitude-day__edit {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border: 1px solid var(--day-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.gratitude-day:hover .gratitude-day__edit {
    opacity: 1;
}

.gratitude-day__edit svg {
    width: 14px;
    height: 14px;
    color: var(--day-text);
}

.gratitude-day__edit:hover {
    background-color: var(--day-border);
}

/* Goal Box */
.gratitude-goal-box {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    padding: var(--space-4);
    height: fit-content;
}

.gratitude-goal-box__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--gray-200);
}

.gratitude-goal-box__header svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.gratitude-goal-box__header span {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.gratitude-goal-box__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.gratitude-goal-box__progress {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.gratitude-goal-box__bar {
    height: 12px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.gratitude-goal-box__fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    border-radius: var(--radius-full);
    transition: width var(--transition-normal);
}

.gratitude-goal-box__text {
    font-size: var(--text-sm);
    color: var(--gray-600);
    text-align: center;
}

.gratitude-goal-box__setting {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
}

.gratitude-goal-box__setting label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.gratitude-goal-box__setting select {
    width: 70px;
}

/* ==========================================================================
   Gratitude Page - Tabbed Layout
   ========================================================================== */

.gratitude-page--tabbed {
    padding: 0;
}

/* Hero Header */
.gratitude-page__hero {
    background: linear-gradient(135deg, #FDF2F8 0%, #FCE7F3 50%, #FBCFE8 100%);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
}

.gratitude-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 60%;
    height: 200%;
    background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
    pointer-events: none;
}

.gratitude-page__back {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    z-index: 10;
}

.gratitude-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.gratitude-page__hero-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    margin: 0 0 var(--space-2) 0;
}

.gratitude-page__hero-title svg {
    width: 32px;
    height: 32px;
    color: #EC4899;
}

.gratitude-page__hero-subtitle {
    font-size: var(--text-base);
    color: var(--gray-600);
    margin: 0;
}

.gratitude-page__hero-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.gratitude-hero-stat {
    text-align: center;
}

.gratitude-hero-stat__value {
    display: block;
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.gratitude-hero-stat__label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

/* Tab Navigation */
.gratitude-page__tabs {
    display: flex;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-6);
    background: var(--white);
    border-bottom: 1px solid var(--gray-200);
    overflow-x: auto;
}

.gratitude-tab {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    background: transparent;
    border: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.gratitude-tab:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.gratitude-tab--active {
    background: linear-gradient(135deg, #FCE7F3 0%, #FBCFE8 100%);
    color: #BE185D;
}

.gratitude-tab--active:hover {
    background: linear-gradient(135deg, #FCE7F3 0%, #FBCFE8 100%);
}

.gratitude-tab svg {
    width: 18px;
    height: 18px;
}

/* Tab Content Area */
.gratitude-page--tabbed .gratitude-page__content {
    display: block;
    padding: var(--space-6);
    max-width: 1100px;
    margin: 0 auto;
}

/* Write Tab Styles */
.gratitude-write-section {
    max-width: 600px;
    margin: 0 auto;
}

.gratitude-write-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    padding: var(--space-6);
    border: 1px solid var(--gray-200);
}

.gratitude-write-card__date {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    text-align: center;
    margin-bottom: var(--space-4);
}

.gratitude-write-card__prompt {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: linear-gradient(135deg, #FDF2F8 0%, #FCE7F3 100%);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-5);
}

.gratitude-write-card__prompt svg {
    width: 20px;
    height: 20px;
    color: #EC4899;
}

.gratitude-write-card__prompt span {
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--gray-700);
}

.gratitude-write-card__current {
    background: #ECFDF5;
    border: 1px solid #A7F3D0;
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-5);
}

.gratitude-write-card__current-label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: #059669;
    margin-bottom: var(--space-3);
}

.gratitude-write-card__current-label svg {
    width: 18px;
    height: 18px;
}

.gratitude-write-card__current-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.gratitude-write-card__item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.gratitude-write-card__item svg {
    width: 16px;
    height: 16px;
    color: #EC4899;
    flex-shrink: 0;
    margin-top: 2px;
}

.gratitude-write-card__form {
    border-top: 1px solid var(--gray-200);
    padding-top: var(--space-5);
}

.gratitude-write-card__instruction {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-4) 0;
    text-align: center;
}

.gratitude-write-card__inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    margin-bottom: var(--space-5);
}

.gratitude-write-card__input-row {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.gratitude-write-card__number {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: #EC4899;
    width: 24px;
}

.gratitude-write-card__input-row .form-input {
    flex: 1;
}

.gratitude-write-card__save {
    width: 100%;
}

/* Week Tab Styles */
.gratitude-week-section {
    max-width: 100%;
}

.gratitude-week-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    margin-bottom: var(--space-6);
}

.gratitude-week-nav__btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.gratitude-week-nav__btn:hover:not(:disabled) {
    background: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.gratitude-week-nav__btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.gratitude-week-nav__btn svg {
    width: 20px;
    height: 20px;
}

.gratitude-week-nav__text {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 200px;
    text-align: center;
}

/* Stats Tab Styles */
.gratitude-stats-section {
    max-width: 800px;
    margin: 0 auto;
}

.gratitude-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
    margin-bottom: var(--space-6);
}

.gratitude-stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-5);
    background: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    text-align: center;
}

.gratitude-stat-card__icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-xl);
}

.gratitude-stat-card__icon svg {
    width: 28px;
    height: 28px;
}

.gratitude-stat-card--primary .gratitude-stat-card__icon {
    background: #FEF3C7;
    color: #F59E0B;
}

.gratitude-stat-card--success .gratitude-stat-card__icon {
    background: #D1FAE5;
    color: #10B981;
}

.gratitude-stat-card--info .gratitude-stat-card__icon {
    background: #FCE7F3;
    color: #EC4899;
}

.gratitude-stat-card--warning .gratitude-stat-card__icon {
    background: #DBEAFE;
    color: #3B82F6;
}

.gratitude-stat-card__info {
    display: flex;
    flex-direction: column;
}

.gratitude-stat-card__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.gratitude-stat-card__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Goal Card */
.gratitude-goal-card,
.gratitude-month-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    padding: var(--space-5);
    margin-bottom: var(--space-4);
}

.gratitude-goal-card__header,
.gratitude-month-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-4);
}

.gratitude-goal-card__header svg,
.gratitude-month-card__header svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.gratitude-goal-card__progress,
.gratitude-month-card__progress {
    margin-bottom: var(--space-3);
}

.gratitude-goal-card__bar,
.gratitude-month-card__bar {
    height: 12px;
    background: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--space-2);
}

.gratitude-goal-card__fill,
.gratitude-month-card__fill {
    height: 100%;
    background: linear-gradient(90deg, #EC4899 0%, #F472B6 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

.gratitude-goal-card__text,
.gratitude-month-card__text {
    font-size: var(--text-sm);
    color: var(--gray-600);
    text-align: center;
}

.gratitude-goal-card__setting {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

.gratitude-goal-card__setting label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

/* Goal buttons - replacing select dropdown */
.gratitude-goal-buttons {
    display: flex;
    gap: var(--space-2);
}

.gratitude-goal-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-lg);
    background: var(--white);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.gratitude-goal-btn:hover {
    border-color: #EC4899;
    color: #EC4899;
}

.gratitude-goal-btn--active {
    background: linear-gradient(135deg, #EC4899 0%, #F472B6 100%);
    border-color: #EC4899;
    color: white;
}

.gratitude-goal-btn--active:hover {
    color: white;
}

/* Responsive - Tabbed Gratitude Page */
@media (max-width: 768px) {
    .gratitude-page__hero {
        padding: var(--space-3);
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .gratitude-page__back {
        position: static;
        align-self: flex-start;
        margin-bottom: var(--space-2);
    }

    .gratitude-page__hero-content {
        text-align: center;
    }

    .gratitude-page__hero-title {
        font-size: var(--text-lg);
        gap: var(--space-2);
    }

    .gratitude-page__hero-title svg {
        width: 22px;
        height: 22px;
    }

    .gratitude-page__hero-subtitle {
        font-size: var(--text-sm);
        margin-bottom: var(--space-2);
    }

    .gratitude-page__hero-stats {
        gap: var(--space-4);
        margin-top: var(--space-3);
    }

    .gratitude-hero-stat__value {
        font-size: var(--text-lg);
    }

    .gratitude-hero-stat__label {
        font-size: var(--text-xs);
    }

    .gratitude-page__tabs {
        padding: var(--space-2) var(--space-3);
        gap: var(--space-1);
    }

    .gratitude-tab {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
    }

    .gratitude-page--tabbed .gratitude-page__content {
        padding: var(--space-4);
    }

    .gratitude-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .gratitude-write-card {
        padding: var(--space-4);
    }

    .gratitude-week-nav {
        margin-bottom: var(--space-4);
    }

    .gratitude-week-nav__text {
        font-size: var(--text-sm);
        min-width: 160px;
    }

    /* Goal card setting - stack on mobile */
    .gratitude-goal-card__setting {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .gratitude-goal-buttons {
        width: 100%;
        justify-content: space-between;
    }

    .gratitude-goal-btn {
        flex: 1;
        max-width: 50px;
    }
}

@media (max-width: 480px) {
    .gratitude-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-3);
    }

    .gratitude-hero-stat {
        min-width: 80px;
    }

    .gratitude-stats-grid {
        grid-template-columns: 1fr;
    }

    .gratitude-tab {
        padding: var(--space-2);
        flex: 1;
        justify-content: center;
    }

    .gratitude-tab span:not(.gratitude-tab svg) {
        display: none;
    }

    /* Fix goal card select on small mobile */
    .gratitude-goal-card__setting {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-2);
    }

    .gratitude-goal-card__setting select {
        width: 100%;
        font-size: 16px; /* Prevents iOS zoom on focus */
        padding: var(--space-3);
        border-radius: var(--radius-lg);
        border: 1px solid var(--gray-300);
        background-color: var(--white);
        -webkit-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748B' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right var(--space-3) center;
    }
}

/* Responsive - Gratitude Page */
@media (max-width: 1024px) {
    .gratitude-page__content {
        grid-template-columns: 1fr;
    }

    .gratitude-goal-box {
        order: -1;
    }

    .gratitude-week {
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 768px) {
    .gratitude-page {
        padding: var(--space-4);
    }

    .gratitude-page__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .gratitude-page__nav {
        width: 100%;
        justify-content: center;
    }

    .gratitude-page__stats {
        flex-wrap: wrap;
    }

    .gratitude-stat {
        flex: 1 1 calc(50% - var(--space-2));
        min-width: 140px;
    }

    .gratitude-week {
        grid-template-columns: repeat(2, 1fr);
    }

    .gratitude-day {
        min-height: 140px;
    }
}

@media (max-width: 480px) {
    .gratitude-stat {
        flex: 1 1 100%;
    }

    .gratitude-week {
        grid-template-columns: 1fr;
    }

    .gratitude-day {
        min-height: 120px;
    }
}

/* ==========================================================================
   Habits Widget
   ========================================================================== */

/* Habits Widget Quote */
.habits-widget__quote {
    padding: var(--space-3);
    background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
    text-align: center;
    border-left: 3px solid var(--primary);
}

.habits-widget__quote-text {
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--gray-700);
    margin: 0 0 var(--space-1) 0;
    line-height: 1.5;
}

.habits-widget__quote-author {
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-weight: var(--font-medium);
}

/* Habits Widget Streak Badge */
.habits-widget__streak {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: var(--space-1) var(--space-2);
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: #B45309;
    flex-shrink: 0;
}

.habits-widget__streak svg {
    width: 14px;
    height: 14px;
    color: #F59E0B;
}

/* Habits Widget Header */
.habits-widget__header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
}

.habits-widget__progress {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex: 1;
}

.habits-progress {
    flex: 1;
    height: 8px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.habits-progress__bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary) 0%, #818CF8 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

.habits-widget__count {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.habits-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.habit-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    text-align: left;
}

.habit-item:hover:not(.habit-item--done) {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.habit-item--done {
    background-color: var(--success-light);
    border-color: var(--success);
}

.habit-item__checkbox {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border: 2px solid currentColor;
    border-radius: var(--radius-md);
    opacity: 0.6;
}

.habit-item--done .habit-item__checkbox {
    background-color: var(--success);
    border-color: var(--success);
    opacity: 1;
    color: var(--success) !important;
}

.habit-item__checkbox svg {
    width: 14px;
    height: 14px;
    color: inherit;
}

.habit-item--done .habit-item__checkbox svg {
    color: var(--white);
}

.habit-item__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: var(--radius-md);
}

.habit-item__icon svg {
    width: 18px;
    height: 18px;
    color: inherit;
}

.habit-item__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.habits-widget__footer {
    display: flex;
    justify-content: space-between;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Screen Time Widget
   ========================================================================== */

.screen-time-widget__gauge {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto var(--space-4);
}

.screen-time-gauge {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
}

.screen-time-gauge__bg {
    fill: none;
    stroke: var(--gray-200);
    stroke-width: 8;
}

.screen-time-gauge__fill {
    fill: none;
    stroke: var(--success);
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dasharray var(--transition-base);
}

.screen-time-gauge__fill--warning {
    stroke: var(--warning);
}

.screen-time-widget__center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.screen-time-widget__time {
    display: block;
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-700);
}

.screen-time-widget__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.screen-time-widget__info {
    display: flex;
    justify-content: space-around;
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.screen-time-stat {
    text-align: center;
}

.screen-time-stat__label {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.screen-time-stat__value {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.screen-time-widget__actions {
    text-align: center;
    margin-bottom: var(--space-4);
}

.screen-time-widget__footer {
    display: flex;
    justify-content: space-between;
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Milestones Widget
   ========================================================================== */

.milestones-widget__summary {
    margin-bottom: var(--space-4);
}

.milestones-progress {
    height: 8px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--space-2);
}

.milestones-progress__bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary) 0%, #818CF8 100%);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

.milestones-widget__count {
    font-size: var(--text-sm);
    color: var(--gray-600);
    text-align: center;
    display: block;
}

.milestones-widget__recent {
    margin-bottom: var(--space-4);
}

.milestones-widget__title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    margin: 0 0 var(--space-2) 0;
}

.milestone-recent {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) 0;
    border-bottom: 1px solid var(--gray-100);
}

.milestone-recent:last-child {
    border-bottom: none;
}

.milestone-recent__icon {
    width: 16px;
    height: 16px;
    color: var(--success);
}

.milestone-recent__name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.milestone-recent__date {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.milestones-widget__empty {
    text-align: center;
    color: var(--gray-500);
    padding: var(--space-4);
}

.milestones-widget__footer {
    text-align: center;
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* All Milestones Modal */
.all-milestones__category {
    margin-bottom: var(--space-4);
}

.all-milestones__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-2) 0;
}

.all-milestones__title svg {
    width: 16px;
    height: 16px;
    color: var(--primary);
}

.all-milestones__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.milestone-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2);
    border-radius: var(--radius-md);
}

.milestone-item--achieved {
    background-color: var(--success-light);
}

.milestone-item__checkbox {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border: 2px solid var(--gray-300);
    border-radius: var(--radius-full);
    cursor: pointer;
}

.milestone-item--achieved .milestone-item__checkbox {
    background-color: var(--success);
    border-color: var(--success);
}

.milestone-item__checkbox svg {
    width: 14px;
    height: 14px;
    color: var(--white);
}

.milestone-item__content {
    flex: 1;
}

.milestone-item__name {
    display: block;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.milestone-item__age {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

/* ==========================================================================
   Accomplishments Widget
   ========================================================================== */

.accomplishments-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.accomplishment-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2);
}

.accomplishment-item__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
}

.accomplishment-item__icon svg {
    width: 18px;
    height: 18px;
    color: var(--white);
}

.accomplishment-item__content {
    flex: 1;
}

.accomplishment-item__title {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.accomplishment-item__date {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.accomplishments-widget__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-6);
    color: var(--gray-400);
}

.accomplishments-widget__empty svg {
    width: 32px;
    height: 32px;
    margin-bottom: var(--space-2);
}

.accomplishments-widget__footer {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-100);
}

/* Category Picker */
.category-picker {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-2);
}

.category-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.category-option input {
    display: none;
}

.category-option--selected,
.category-option:hover {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.category-option__icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
}

.category-option__icon svg {
    width: 18px;
    height: 18px;
    color: var(--white);
}

.category-option__name {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* ==========================================================================
   Add Widget Section & Modal
   ========================================================================== */

.add-widget-section {
    margin-top: var(--space-6);
    padding-top: var(--space-4);
    border-top: 2px dashed var(--gray-200);
    display: flex;
    justify-content: center;
}

.add-widget-btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    background-color: var(--white);
    border: 2px dashed var(--gray-300);
    border-radius: var(--radius-xl);
    color: var(--gray-500);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.add-widget-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background-color: var(--primary-light);
}

.add-widget-btn svg {
    width: 20px;
    height: 20px;
}

/* Add Widget Modal */
.add-widget-modal__intro {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-4) 0;
}

.add-widget-modal__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 400px;
    overflow-y: auto;
}

.add-widget-option {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.add-widget-option:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.add-widget-option:has(.add-widget-option__checkbox:checked) {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.add-widget-option__checkbox {
    width: 20px;
    height: 20px;
    accent-color: var(--primary);
    cursor: pointer;
}

.add-widget-option__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
    flex-shrink: 0;
}

.add-widget-option__icon svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.add-widget-option__info {
    flex: 1;
    min-width: 0;
}

.add-widget-option__name {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.add-widget-option__desc {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: 2px;
}

/* Utility Classes */
.text-center {
    text-align: center;
}

.text-muted {
    color: var(--gray-500);
}

.text-success {
    color: var(--success);
}

.form-row {
    display: flex;
    align-items: center;
}

/* ==========================================================================
   Grocery Widget & Page Styles
   ========================================================================== */

/* Grocery Widget (in dashboard) */
.grocery-widget {
    padding: var(--space-2);
}

.grocery-widget__summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-3);
}

.grocery-widget__count {
    display: flex;
    align-items: baseline;
    gap: var(--space-2);
}

.grocery-widget__count-number {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.grocery-widget__count-label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.grocery-widget__checked {
    font-size: var(--text-xs);
    color: var(--gray-400);
    background-color: var(--gray-100);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

.grocery-widget__preview {
    margin-bottom: var(--space-3);
}

.grocery-widget__empty {
    text-align: center;
    color: var(--gray-400);
    font-size: var(--text-sm);
    padding: var(--space-4) 0;
}

.grocery-widget__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.grocery-widget__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.grocery-widget__item-bullet {
    width: 6px;
    height: 6px;
    background-color: var(--primary);
    border-radius: var(--radius-full);
    flex-shrink: 0;
}

.grocery-widget__item-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.grocery-widget__item-qty {
    font-size: var(--text-xs);
    color: var(--gray-400);
}

.grocery-widget__more {
    font-size: var(--text-xs);
    color: var(--gray-400);
    padding-left: calc(6px + var(--space-2));
}

/* Store-organized widget view */
.grocery-widget__stores {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.grocery-widget__store {
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    border: 1px solid var(--gray-200);
}

.grocery-widget__store-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.grocery-widget__store-icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
    flex-shrink: 0;
}

.grocery-widget__store-icon i {
    width: 16px;
    height: 16px;
}

.grocery-widget__store-name {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.grocery-widget__store-count {
    font-size: var(--text-xs);
    color: var(--gray-500);
    background: white;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

.grocery-widget__store-items {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.grocery-widget__store-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-700);
    padding: var(--space-1);
}

.grocery-widget__checkbox-wrapper {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    cursor: pointer;
}

.grocery-widget__checkbox {
    width: 16px;
    height: 16px;
    cursor: pointer;
    flex-shrink: 0;
}

.grocery-widget__item-content {
    flex: 1;
    cursor: pointer;
    min-width: 0; /* Allow text truncation */
}

.grocery-widget__item-text {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: color var(--transition-fast);
}

.grocery-widget__item-content:hover .grocery-widget__item-text {
    color: var(--primary);
}

.grocery-widget__item-input {
    width: 100%;
    padding: var(--space-1) var(--space-2);
    border: 1px solid var(--primary);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    outline: none;
    background: white;
    box-sizing: border-box;
}

.grocery-widget__store-more {
    font-size: var(--text-xs);
    color: var(--gray-400);
    padding-left: calc(16px + var(--space-2));
}

.grocery-widget__view-all-btn {
    background: none;
    border: none;
    padding: 0;
    font-size: var(--text-xs);
    color: var(--primary);
    cursor: pointer;
    font-weight: var(--font-medium);
    transition: color var(--transition-fast);
}

.grocery-widget__view-all-btn:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

.grocery-widget__actions {
    display: flex;
    justify-content: center;
}

.grocery-widget__actions--top {
    margin-bottom: var(--space-3);
}

/* Grocery Full Page */
.grocery-page {
    max-width: 900px;
    margin: 0 auto;
    padding: var(--space-6);
}

.grocery-page__header {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-4);
    flex-wrap: wrap;
}

.grocery-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    flex: 1;
}

.grocery-page__title svg {
    width: 28px;
    height: 28px;
    color: var(--primary);
}

.grocery-page__actions {
    display: flex;
    gap: var(--space-2);
}

/* Stats bar showing totals */
.grocery-page__stats {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-3) var(--space-4);
    background: linear-gradient(135deg, var(--primary-light) 0%, #E0E7FF 100%);
    border-radius: var(--radius-xl);
    margin-bottom: var(--space-4);
}

.grocery-page__stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.grocery-page__stat-number {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.grocery-page__stat-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.grocery-page__content {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

/* Grocery Add Section */
.grocery-page__add-section {
    padding: var(--space-5);
    background: linear-gradient(180deg, var(--gray-50) 0%, var(--white) 100%);
    border-bottom: 1px solid var(--gray-200);
}

.grocery-add-section__title {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin-bottom: var(--space-3);
}

.grocery-add-form {
    display: flex;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

.grocery-add-form__input {
    flex: 1;
}

.grocery-quick-adds {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.grocery-quick-add {
    padding: var(--space-1) var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.grocery-quick-add:hover {
    border-color: var(--primary);
    color: var(--primary);
    background-color: var(--primary-light);
}

/* Grocery List */
.grocery-page__list {
    padding: var(--space-4);
}

.grocery-empty {
    text-align: center;
    padding: var(--space-8);
    color: var(--gray-400);
}

.grocery-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.grocery-empty p {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    margin: 0 0 var(--space-1) 0;
}

.grocery-empty span {
    font-size: var(--text-sm);
}

/* Grocery Category */
.grocery-category {
    margin-bottom: var(--space-5);
    background: var(--gray-50);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
}

.grocery-category:last-child {
    margin-bottom: 0;
}

.grocery-category__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-base);
    font-weight: var(--font-bold);
    color: var(--gray-700);
    background: var(--white);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-3);
    box-shadow: var(--shadow-sm);
}

.grocery-category__header svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.grocery-category__count {
    margin-left: auto;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--white);
    background-color: var(--primary);
    padding: 4px 12px;
    border-radius: var(--radius-full);
}

.grocery-category__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* ========== Store Sections ========== */

.grocery-store {
    margin-bottom: var(--space-6);
}

.grocery-store__header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-4);
    background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-xl);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    cursor: pointer;
    transition: all var(--transition-normal);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.grocery-store__header:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
}

.grocery-store__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
    flex-shrink: 0;
}

.grocery-store__icon i {
    width: 24px;
    height: 24px;
}

.grocery-store__name {
    flex: 1;
}

.grocery-store__count {
    padding: var(--space-1) var(--space-3);
    background: var(--primary);
    color: white;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    border-radius: var(--radius-full);
}

.grocery-store__toggle-icon {
    width: 20px;
    height: 20px;
    color: var(--gray-400);
    transition: transform var(--transition-fast);
}

.grocery-store__content {
    padding: var(--space-3) var(--space-4);
}

/* Inline input for adding items */
.grocery-store__input-wrapper {
    margin-bottom: var(--space-3);
}

.grocery-store__input {
    width: 100%;
    padding: var(--space-3);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-lg);
    font-size: var(--text-base);
    transition: all var(--transition-fast);
}

.grocery-store__input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.grocery-store__input::placeholder {
    color: var(--gray-400);
}

/* Task-list style items */
.grocery-store__items {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.grocery-store-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-2) var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-md);
    transition: background-color var(--transition-fast);
}

.grocery-store-item:hover {
    background: var(--gray-100);
}

.grocery-store-item__checkbox-wrapper {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    cursor: pointer;
}

.grocery-store-item__checkbox-wrapper input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    flex-shrink: 0;
}

.grocery-store-item__content {
    flex: 1;
    cursor: pointer;
    min-width: 0; /* Allow text truncation */
    margin: 0 var(--space-3);
}

.grocery-store-item__name {
    display: block;
    font-size: var(--text-base);
    color: var(--gray-800);
    transition: all var(--transition-fast);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.grocery-store-item__content:hover .grocery-store-item__name {
    color: var(--primary);
}

.grocery-store-item__name--checked {
    text-decoration: line-through;
    color: var(--gray-400);
}

.grocery-store-item__edit-input {
    width: 100%;
    padding: var(--space-1) var(--space-2);
    border: 1px solid var(--primary);
    border-radius: var(--radius-md);
    font-size: var(--text-base);
    outline: none;
    background: white;
    box-sizing: border-box;
}

.grocery-store-item__actions {
    display: flex;
    gap: var(--space-1);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.grocery-store-item:hover .grocery-store-item__actions {
    opacity: 1;
}

.grocery-category--in-store {
    margin-bottom: var(--space-3);
    background: white;
}

.grocery-category--in-store .grocery-category__header {
    padding: var(--space-3);
    font-size: var(--text-sm);
}

/* ========== Unassigned Items Section ========== */

.grocery-unassigned-section {
    margin-top: var(--space-6);
    padding-top: var(--space-6);
    border-top: 2px dashed var(--gray-300);
}

.grocery-unassigned-section__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-700);
    margin-bottom: var(--space-4);
}

.grocery-unassigned-section__title i {
    width: 24px;
    height: 24px;
    color: var(--gray-400);
}

/* ========== Store Management Modal ========== */

.manage-stores-modal {
    min-height: 200px;
}

.stores-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-6);
    color: var(--gray-400);
    text-align: center;
}

.stores-empty i {
    width: 64px;
    height: 64px;
    margin-bottom: var(--space-3);
}

.stores-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
}

.store-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
}

.store-item:hover {
    background: var(--gray-100);
    border-color: var(--gray-300);
}

.store-item.dragging {
    opacity: 0.5;
}

.store-item__drag-handle {
    cursor: grab;
    color: var(--gray-400);
}

.store-item__drag-handle:active {
    cursor: grabbing;
}

.store-item__drag-handle i {
    width: 20px;
    height: 20px;
}

.store-item__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
    flex-shrink: 0;
}

.store-item__icon i {
    width: 20px;
    height: 20px;
}

.store-item__name {
    flex: 1;
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.store-item__actions {
    display: flex;
    gap: var(--space-1);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .grocery-store__header {
        padding: var(--space-3);
        font-size: var(--text-base);
    }

    .grocery-store__icon {
        width: 40px;
        height: 40px;
    }

    .grocery-store__icon i {
        width: 20px;
        height: 20px;
    }

    .grocery-store__content {
        padding: var(--space-2) var(--space-3);
    }

    .grocery-store__input {
        padding: var(--space-2);
        font-size: var(--text-sm);
    }

    .grocery-store-item {
        padding: var(--space-2);
    }

    .grocery-store-item__name {
        font-size: var(--text-sm);
    }

    .grocery-store-item__actions {
        opacity: 1; /* Always show on mobile */
    }

    .store-item {
        padding: var(--space-2);
    }
}

/* Grocery Item */
.grocery-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background-color: var(--white);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    border: 1px solid var(--gray-100);
}

.grocery-item:hover {
    background-color: var(--gray-50);
    border-color: var(--gray-200);
    box-shadow: var(--shadow-sm);
}

.grocery-item--checked {
    opacity: 0.6;
}

.grocery-item--checked .grocery-item__name {
    text-decoration: line-through;
    color: var(--gray-400);
}

.grocery-item__check {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--gray-400);
    transition: color var(--transition-fast);
}

.grocery-item__check:hover {
    color: var(--primary);
}

.grocery-item--checked .grocery-item__check {
    color: var(--success);
}

.grocery-item__check svg {
    width: 20px;
    height: 20px;
}

.grocery-item__content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.grocery-item__name {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-800);
}

.grocery-item__quantity {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.grocery-item__note {
    font-size: var(--text-xs);
    color: var(--gray-400);
    font-style: italic;
}

.grocery-item__actions {
    display: flex;
    gap: var(--space-1);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.grocery-item:hover .grocery-item__actions {
    opacity: 1;
}

/* Checked Section */
.grocery-checked-section {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px dashed var(--gray-200);
}

.grocery-checked-toggle {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2);
    background: none;
    border: none;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-500);
    cursor: pointer;
    transition: color var(--transition-fast);
}

.grocery-checked-toggle:hover {
    color: var(--gray-700);
}

.grocery-checked-toggle svg {
    width: 16px;
    height: 16px;
    transition: transform var(--transition-fast);
}

.grocery-checked-list {
    margin-top: var(--space-2);
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.grocery-checked-list--collapsed {
    display: none;
}

/* Generate from Meals Modal */
.generate-grocery-modal__intro {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-4) 0;
}

.generate-grocery-modal__meals {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 350px;
    overflow-y: auto;
    margin-bottom: var(--space-4);
}

.generate-meal-option {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.generate-meal-option:hover {
    background-color: var(--gray-100);
}

.generate-meal-option--has-recipe {
    background-color: color-mix(in srgb, var(--success-light) 50%, white);
    border-color: var(--success-light);
}

.generate-meal-option--has-recipe:hover {
    background-color: var(--success-light);
    border-color: var(--success);
}

.generate-meal-checkbox {
    width: 18px;
    height: 18px;
    accent-color: var(--primary);
    margin-top: 2px;
}

.generate-meal-option__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    min-width: 0;
}

.generate-meal-option__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    flex-wrap: wrap;
}

.generate-meal-option__day {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--primary);
    min-width: 32px;
}

.generate-meal-option__type {
    font-size: var(--text-xs);
    color: var(--gray-400);
    text-transform: capitalize;
    min-width: 60px;
}

.generate-meal-option__name {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.generate-meal-option__badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    padding: 2px 8px;
    background-color: var(--success-light);
    color: var(--success-dark);
    border-radius: var(--radius-full);
    margin-left: auto;
}

.generate-meal-option__badge svg {
    width: 12px;
    height: 12px;
}

.generate-meal-option__badge--none {
    background-color: var(--gray-200);
    color: var(--gray-500);
}

.generate-meal-option__ingredients {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
}

.generate-meal-option__ingredient {
    font-size: var(--text-xs);
    padding: 2px 8px;
    background-color: var(--white);
    color: var(--gray-600);
    border-radius: var(--radius-md);
    border: 1px solid var(--gray-200);
}

.generate-meal-option__more {
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-style: italic;
}

/* Responsive */
@media (max-width: 768px) {
    .grocery-page {
        padding: var(--space-4);
    }

    .grocery-page__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .grocery-page__title {
        order: -1;
    }

    .grocery-page__actions {
        width: 100%;
        justify-content: flex-end;
    }

    .grocery-item__actions {
        opacity: 1;
    }

    .grocery-quick-adds {
        display: none;
    }
}

/* ==========================================================================
   Grocery Widget Enhancements - New Features
   ========================================================================== */

/* Hero Header with Gradient */
.grocery-page__hero {
    background: linear-gradient(135deg, #10B981 0%, #059669 50%, #047857 100%);
    padding: var(--space-6) var(--space-6) var(--space-8);
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
}

.grocery-page__hero::before {
    content: '';
    position: absolute;
    top: -60%;
    right: -10%;
    width: 250px;
    height: 250px;
    background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
    border-radius: 50%;
}

.grocery-page__hero::after {
    content: '';
    position: absolute;
    bottom: -40%;
    left: 5%;
    width: 180px;
    height: 180px;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
    border-radius: 50%;
}

/* Floating Shapes Animation */
.grocery-hero-shape {
    position: absolute;
    opacity: 0.4;
    animation: grocery-float 8s ease-in-out infinite;
}

.grocery-hero-shape--1 {
    top: 20%;
    left: 8%;
    width: 60px;
    height: 60px;
    background: rgba(255,255,255,0.25);
    border-radius: 50%;
    animation-delay: 0s;
}

.grocery-hero-shape--2 {
    top: 60%;
    right: 12%;
    width: 40px;
    height: 40px;
    background: rgba(255,255,255,0.2);
    border-radius: 8px;
    transform: rotate(45deg);
    animation-delay: 2s;
}

.grocery-hero-shape--3 {
    bottom: 15%;
    left: 25%;
    width: 25px;
    height: 25px;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    animation-delay: 4s;
}

.grocery-hero-shape--4 {
    top: 30%;
    right: 30%;
    width: 35px;
    height: 35px;
    background: transparent;
    border: 3px solid rgba(255,255,255,0.25);
    border-radius: 50%;
    animation-delay: 1s;
}

@keyframes grocery-float {
    0%, 100% {
        transform: translateY(0) rotate(0deg);
    }
    25% {
        transform: translateY(-10px) rotate(5deg);
    }
    50% {
        transform: translateY(-5px) rotate(-3deg);
    }
    75% {
        transform: translateY(-12px) rotate(2deg);
    }
}

.grocery-page__hero-content {
    position: relative;
    z-index: 1;
    text-align: center;
}

.grocery-page__back {
    position: absolute;
    top: 0;
    left: 0;
    color: white;
}

.grocery-page__back:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.grocery-page__hero-text {
    margin-bottom: var(--space-4);
}

.grocery-page__hero-title {
    color: white;
    font-size: var(--text-3xl);
    font-weight: 700;
    margin: 0 0 var(--space-1) 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
}

.grocery-page__hero-title svg {
    width: 32px;
    height: 32px;
}

.grocery-page__hero-subtitle {
    color: rgba(255,255,255,0.9);
    font-size: var(--text-base);
    margin: 0;
}

/* Hero Stats */
.grocery-page__hero-stats {
    display: flex;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
    justify-content: center;
}

.grocery-hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-xl);
}

.grocery-hero-stat__value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: white;
    line-height: 1;
}

.grocery-hero-stat__label {
    font-size: var(--text-xs);
    color: rgba(255,255,255,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Hero Actions */
.grocery-page__hero-actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
    justify-content: center;
}

.grocery-page__hero-actions .btn--secondary {
    background: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.5);
}

.grocery-page__hero-actions .btn--secondary:hover {
    background: white;
}

/* Hero Progress Bar */
.grocery-hero-progress {
    max-width: 300px;
    margin: 0 auto;
}

.grocery-hero-progress__bar {
    height: 8px;
    background: rgba(255,255,255,0.3);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.grocery-hero-progress__fill {
    height: 100%;
    background: white;
    border-radius: var(--radius-full);
    transition: width 0.5s ease-out;
}

.grocery-hero-progress__text {
    text-align: center;
    color: rgba(255,255,255,0.9);
    font-size: var(--text-xs);
    margin-top: var(--space-1);
}

/* Hero Actions */
.grocery-hero-actions {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    margin-top: var(--space-4);
}

.grocery-hero-btn {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: var(--radius-lg);
    color: white;
    font-size: var(--text-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.grocery-hero-btn:hover {
    background: rgba(255,255,255,0.3);
    border-color: rgba(255,255,255,0.5);
}

.grocery-hero-btn svg {
    width: 16px;
    height: 16px;
}

/* Smart Suggestions Section */
.grocery-suggestions {
    padding: var(--space-4);
    background: linear-gradient(180deg, #ECFDF5 0%, white 100%);
    border-bottom: 1px solid var(--gray-200);
}

.grocery-suggestions__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin-bottom: var(--space-3);
}

.grocery-suggestions__title svg {
    width: 16px;
    height: 16px;
    color: #10B981;
}

.grocery-suggestions__list {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.grocery-suggestion {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    background: white;
    border: 1px solid #D1FAE5;
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: #059669;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.grocery-suggestion:hover {
    background: #D1FAE5;
    border-color: #10B981;
    transform: translateY(-1px);
}

.grocery-suggestion svg {
    width: 14px;
    height: 14px;
}

/* Empty State Illustration */
.grocery-empty__illustration {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto var(--space-4);
}

.grocery-empty__shapes {
    position: relative;
    width: 100%;
    height: 100%;
}

.grocery-empty__shape {
    position: absolute;
    border-radius: 50%;
    animation: grocery-empty-float 4s ease-in-out infinite;
}

.grocery-empty__shape--1 {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #10B981, #059669);
    top: 30%;
    left: 50%;
    transform: translateX(-50%);
    animation-delay: 0s;
}

.grocery-empty__shape--2 {
    width: 30px;
    height: 30px;
    background: #FCD34D;
    top: 15%;
    left: 20%;
    animation-delay: 0.5s;
}

.grocery-empty__shape--3 {
    width: 25px;
    height: 25px;
    background: #F87171;
    top: 20%;
    right: 20%;
    animation-delay: 1s;
}

.grocery-empty__shape--4 {
    width: 20px;
    height: 20px;
    background: #60A5FA;
    bottom: 25%;
    left: 25%;
    animation-delay: 1.5s;
}

.grocery-empty__shape--5 {
    width: 22px;
    height: 22px;
    background: #A78BFA;
    bottom: 30%;
    right: 25%;
    animation-delay: 2s;
}

@keyframes grocery-empty-float {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-8px);
    }
}

.grocery-empty__shape--1 {
    animation: grocery-empty-pulse 3s ease-in-out infinite;
}

@keyframes grocery-empty-pulse {
    0%, 100% {
        transform: translateX(-50%) scale(1);
        opacity: 0.9;
    }
    50% {
        transform: translateX(-50%) scale(1.05);
        opacity: 1;
    }
}

.grocery-empty__message {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-1) 0;
}

.grocery-empty__hint {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin: 0;
}

/* Card Hover Effects */
.grocery-item {
    transition: all var(--transition-fast);
}

.grocery-item:hover {
    transform: translateX(4px);
    box-shadow: var(--shadow-md);
}

/* Category Color Coding */
.grocery-category--produce .grocery-category__header { background: linear-gradient(135deg, #DCFCE7, #D1FAE5); border-color: #86EFAC; }
.grocery-category--produce .grocery-category__header svg { color: #22C55E; }

.grocery-category--dairy .grocery-category__header { background: linear-gradient(135deg, #DBEAFE, #BFDBFE); border-color: #93C5FD; }
.grocery-category--dairy .grocery-category__header svg { color: #3B82F6; }

.grocery-category--meat .grocery-category__header { background: linear-gradient(135deg, #FEE2E2, #FECACA); border-color: #FCA5A5; }
.grocery-category--meat .grocery-category__header svg { color: #EF4444; }

.grocery-category--bakery .grocery-category__header { background: linear-gradient(135deg, #FEF3C7, #FDE68A); border-color: #FCD34D; }
.grocery-category--bakery .grocery-category__header svg { color: #F59E0B; }

.grocery-category--frozen .grocery-category__header { background: linear-gradient(135deg, #E0E7FF, #C7D2FE); border-color: #A5B4FC; }
.grocery-category--frozen .grocery-category__header svg { color: #6366F1; }

.grocery-category--beverages .grocery-category__header { background: linear-gradient(135deg, #CFFAFE, #A5F3FC); border-color: #67E8F9; }
.grocery-category--beverages .grocery-category__header svg { color: #06B6D4; }

.grocery-category--pantry .grocery-category__header { background: linear-gradient(135deg, #FFEDD5, #FED7AA); border-color: #FDBA74; }
.grocery-category--pantry .grocery-category__header svg { color: #F97316; }

.grocery-category--household .grocery-category__header { background: linear-gradient(135deg, #F3E8FF, #E9D5FF); border-color: #D8B4FE; }
.grocery-category--household .grocery-category__header svg { color: #A855F7; }

.grocery-category--personal .grocery-category__header { background: linear-gradient(135deg, #FCE7F3, #FBCFE8); border-color: #F9A8D4; }
.grocery-category--personal .grocery-category__header svg { color: #EC4899; }

.grocery-category--other .grocery-category__header { background: linear-gradient(135deg, #F3F4F6, #E5E7EB); border-color: #D1D5DB; }
.grocery-category--other .grocery-category__header svg { color: #6B7280; }

/* Widget Category Color Bullets */
.grocery-widget__item-bullet--produce { background-color: #22C55E; }
.grocery-widget__item-bullet--dairy { background-color: #3B82F6; }
.grocery-widget__item-bullet--meat { background-color: #EF4444; }
.grocery-widget__item-bullet--bakery { background-color: #F59E0B; }
.grocery-widget__item-bullet--frozen { background-color: #6366F1; }
.grocery-widget__item-bullet--beverages { background-color: #06B6D4; }
.grocery-widget__item-bullet--pantry { background-color: #F97316; }
.grocery-widget__item-bullet--household { background-color: #A855F7; }
.grocery-widget__item-bullet--personal { background-color: #EC4899; }
.grocery-widget__item-bullet--other { background-color: #6B7280; }

/* Swipe Actions */
.grocery-item {
    position: relative;
    overflow: hidden;
}

.grocery-item__swipe-actions {
    position: absolute;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: stretch;
}

.grocery-item__swipe-actions--left {
    left: 0;
    transform: translateX(-100%);
}

.grocery-item__swipe-actions--right {
    right: 0;
    transform: translateX(100%);
}

.grocery-swipe-action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    color: white;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.grocery-swipe-action--check {
    background: #10B981;
}

.grocery-swipe-action--delete {
    background: #EF4444;
}

.grocery-swipe-action svg {
    width: 20px;
    height: 20px;
}

.grocery-item__main {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: var(--white);
    width: 100%;
    transition: transform 0.2s ease-out;
    position: relative;
    z-index: 1;
}

.grocery-item--swiping .grocery-item__main {
    transition: none;
}

/* Quantity Adjustment Buttons */
.grocery-item__quantity-controls {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    margin-left: auto;
}

.grocery-qty-btn {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gray-100);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    color: var(--gray-600);
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.grocery-qty-btn:hover {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.grocery-item__quantity-display {
    min-width: 50px;
    text-align: center;
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: help;
}

.grocery-item__quantity-display:hover {
    color: var(--primary);
}

/* Pantry Badge */
.grocery-item__pantry-badge {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    padding: 2px var(--space-2);
    background: #FEF3C7;
    border: 1px solid #FCD34D;
    border-radius: var(--radius-full);
    font-size: 10px;
    color: #B45309;
    white-space: nowrap;
}

.grocery-item__pantry-badge svg {
    width: 10px;
    height: 10px;
}

/* Pantry Modal */
.pantry-modal {
    max-width: 500px;
}

.pantry-empty {
    text-align: center;
    padding: var(--space-8) var(--space-4);
    color: var(--gray-500);
}

.pantry-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.4;
    color: var(--gray-400);
}

.pantry-empty p {
    font-weight: var(--font-medium);
    margin-bottom: var(--space-1);
}

.pantry-categories {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    max-height: 350px;
    overflow-y: auto;
    padding-right: var(--space-1);
}

.pantry-category {
    background: var(--cat-bg, var(--gray-50));
    border: 1px solid color-mix(in srgb, var(--cat-color, var(--gray-300)) 30%, transparent);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
}

.pantry-category__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin-bottom: var(--space-2);
}

.pantry-category__title svg {
    width: 16px;
    height: 16px;
}

.pantry-category__count {
    margin-left: auto;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--cat-color, var(--gray-500));
    background: white;
    padding: 2px 8px;
    border-radius: var(--radius-full);
}

.pantry-items {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.pantry-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-1) var(--space-1) var(--space-3);
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    transition: all var(--transition-fast);
}

.pantry-item:hover {
    border-color: var(--cat-color, var(--gray-300));
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.pantry-item__name {
    color: var(--gray-700);
}

.pantry-item__remove {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    background: var(--gray-100);
    border: none;
    border-radius: var(--radius-full);
    color: var(--gray-400);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.pantry-item__remove:hover {
    background: var(--danger-light);
    color: var(--danger);
}

.pantry-item__remove svg {
    width: 12px;
    height: 12px;
}

/* Share List Toast */
.grocery-share-toast {
    position: fixed;
    bottom: var(--space-6);
    left: 50%;
    transform: translateX(-50%);
    background: var(--gray-800);
    color: white;
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    display: flex;
    align-items: center;
    gap: var(--space-2);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    animation: grocery-toast-in 0.3s ease-out;
}

@keyframes grocery-toast-in {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

.grocery-share-toast svg {
    width: 16px;
    height: 16px;
    color: #10B981;
}

/* Widget Progress Bar */
.grocery-widget__progress {
    margin-bottom: var(--space-3);
}

.grocery-widget__progress-bar {
    height: 6px;
    background: var(--gray-100);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.grocery-widget__progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #10B981, #059669);
    border-radius: var(--radius-full);
    transition: width 0.3s ease-out;
}

.grocery-widget__progress-text {
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-align: center;
    margin-top: var(--space-1);
}

/* Grocery Responsive Updates */
@media (max-width: 768px) {
    .grocery-page__hero {
        padding: var(--space-4) var(--space-4) var(--space-6);
        border-radius: 0;
    }

    .grocery-hero-stats {
        gap: var(--space-4);
    }

    .grocery-hero-stat__value {
        font-size: var(--text-2xl);
    }

    .grocery-hero-actions {
        flex-wrap: wrap;
    }

    .grocery-hero-btn {
        flex: 1;
        justify-content: center;
        min-width: 100px;
    }

    .grocery-suggestions {
        padding: var(--space-3);
    }

    .grocery-suggestions__list {
        gap: var(--space-1);
    }

    .grocery-suggestion {
        font-size: var(--text-xs);
        padding: var(--space-1) var(--space-2);
    }

    .grocery-item__quantity-controls {
        gap: 2px;
    }

    .grocery-qty-btn {
        width: 28px;
        height: 28px;
    }

    .grocery-item__swipe-actions {
        display: flex;
    }
}

@media (min-width: 769px) {
    .grocery-item__swipe-actions {
        display: none;
    }
}

/* ==========================================================================
   Habits Full Page & Stats View
   ========================================================================== */

/* Habits Stats Page */
.habits-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: var(--space-6);
}

/* Colorful Stats Page Variant */
.habits-page--colorful {
    background: linear-gradient(180deg, #EEF2FF 0%, #F8FAFC 30%);
    min-height: 100vh;
    padding: 0;
}

.habits-page--colorful .habits-page__content {
    margin: 0 var(--space-6) var(--space-6);
}

/* Hero Section */
.habits-page__hero {
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #A855F7 100%);
    padding: var(--space-6) var(--space-6) var(--space-8);
    position: relative;
    overflow: hidden;
}

.habits-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
    border-radius: 50%;
}

.habits-page__hero::after {
    content: '';
    position: absolute;
    bottom: -30%;
    left: 5%;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.habits-page__hero .habits-page__back {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space-4);
    position: relative;
    z-index: 1;
}

.habits-page__hero .habits-page__back:hover {
    background: rgba(255, 255, 255, 0.15);
    color: white;
}

.habits-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.habits-page__hero .habits-page__title {
    color: white;
    font-size: var(--text-2xl);
    justify-content: center;
    margin-bottom: var(--space-2);
}

.habits-page__hero .habits-page__title svg {
    color: rgba(255, 255, 255, 0.9);
}

.habits-page__subtitle {
    color: rgba(255, 255, 255, 0.85);
    font-size: var(--text-sm);
    margin: 0;
}

/* Stats Cards Row */
.habits-page__stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
    margin: calc(-1 * var(--space-6)) var(--space-6) var(--space-6);
    position: relative;
    z-index: 2;
}

.habits-stat-card {
    background: white;
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-3);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid var(--gray-100);
}

.habits-stat-card__icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.habits-stat-card__icon svg {
    width: 24px;
    height: 24px;
}

.habits-stat-card--primary .habits-stat-card__icon {
    background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
    color: #6366F1;
}

.habits-stat-card--warning .habits-stat-card__icon {
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    color: #D97706;
}

.habits-stat-card--success .habits-stat-card__icon {
    background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
    color: #059669;
}

.habits-stat-card--info .habits-stat-card__icon {
    background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
    color: #2563EB;
}

.habits-stat-card__info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.habits-stat-card__value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    line-height: 1.2;
}

.habits-stat-card__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-weight: var(--font-medium);
}

/* Updated Navigation for Colorful Page */
.habits-page--colorful .habits-page__nav {
    background: white;
    margin: 0 var(--space-6) var(--space-4);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    justify-content: center;
}

.habits-page--colorful .habits-page__month {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

/* Responsive adjustments for stats cards */
@media (max-width: 900px) {
    .habits-page__stats-row {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 500px) {
    .habits-page__stats-row {
        grid-template-columns: 1fr;
        margin: calc(-1 * var(--space-4)) var(--space-4) var(--space-4);
    }

    .habits-page__hero {
        padding: var(--space-4) var(--space-4) var(--space-6);
    }

    .habits-page--colorful .habits-page__nav {
        margin: 0 var(--space-4) var(--space-4);
    }

    .habits-page--colorful .habits-page__content {
        margin: 0 var(--space-4) var(--space-4);
    }

    .habits-stat-card {
        padding: var(--space-3);
    }

    .habits-stat-card__icon {
        width: 40px;
        height: 40px;
    }

    .habits-stat-card__icon svg {
        width: 20px;
        height: 20px;
    }
}

.habits-page__header {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.habits-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    flex: 1;
    margin: 0;
}

.habits-page__title svg {
    width: 24px;
    height: 24px;
    color: var(--primary);
}

.habits-page__nav {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.habits-page__nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.habits-page__nav-btn:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.habits-page__nav-btn svg {
    width: 18px;
    height: 18px;
}

.habits-page__month {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 140px;
    text-align: center;
}

/* Habits Page Content Container */
.habits-page__content {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    overflow: hidden;
    padding: var(--space-4);
}

/* Habit Tracker - Table Based (like paper tracker) */
/* Desktop/Mobile toggle for habit tracker */
.habits-tracker--desktop {
    display: block;
}

.habits-tracker--mobile {
    display: none;
}

@media (max-width: 600px) {
    .habits-tracker--desktop {
        display: none;
    }

    .habits-tracker--mobile {
        display: block;
    }
}

.habits-tracker {
    overflow-x: auto;
}

.habits-tracker__table {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid var(--gray-400);
    margin-bottom: var(--space-4);
}

.habits-tracker__table--row2 {
    margin-bottom: 0;
}

/* Header Row */
.habits-tracker__header-row {
    background-color: var(--gray-50);
}

.habits-tracker__habit-header {
    width: 180px;
    min-width: 120px;
    padding: var(--space-2);
    border: 1px solid var(--gray-400);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    text-align: left;
}

.habits-tracker__day-header {
    width: 28px;
    min-width: 28px;
    padding: var(--space-1);
    border: 1px solid var(--gray-400);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    text-align: center;
}

.habits-tracker__day-header--today {
    background-color: var(--primary);
    color: var(--white);
    font-weight: var(--font-bold);
}

/* Habit Rows */
.habits-tracker__habit-row {
    border: 1px solid var(--gray-400);
}

.habits-tracker__habit-name {
    padding: var(--space-3) var(--space-4);
    border: 1px solid var(--gray-400);
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 220px;
    min-width: 150px;
}

/* Cells - Simple Darkened Box Design */
.habits-tracker__cell {
    width: 42px;
    height: 42px;
    min-width: 42px;
    padding: 4px;
    border: 1px solid var(--gray-400);
    background-color: var(--white);
    cursor: pointer;
    transition: background-color var(--transition-fast);
    position: relative;
    vertical-align: top;
}

.habits-tracker__cell:hover {
    background-color: var(--gray-100);
}

/* Day label inside cell (weekday + day number) */
.habits-tracker__day-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.habits-tracker__weekday-abbr {
    font-size: 9px;
    font-weight: var(--font-medium);
    color: var(--gray-400);
    text-transform: uppercase;
    line-height: 1;
}

.habits-tracker__day-num {
    font-size: 13px;
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    line-height: 1;
}

.habits-tracker__cell--done .habits-tracker__weekday-abbr,
.habits-tracker__cell--done .habits-tracker__day-num {
    color: var(--gray-300);
}

.habits-tracker__cell--disabled .habits-tracker__weekday-abbr,
.habits-tracker__cell--disabled .habits-tracker__day-num {
    color: var(--gray-300);
}

/* Completed cell - darkened/filled */
.habits-tracker__cell--done {
    background-color: var(--gray-700);
}

.habits-tracker__cell--done:hover {
    background-color: var(--gray-600);
}

/* Today's column indicator */
.habits-tracker__cell--today {
    box-shadow: inset 0 0 0 2px var(--primary);
}

.habits-tracker__cell--today.habits-tracker__cell--done {
    background-color: var(--primary);
}

/* Future dates - grayed out */
.habits-tracker__cell--future {
    background-color: var(--gray-50);
    cursor: default;
}

.habits-tracker__cell--future:hover {
    background-color: var(--gray-50);
}

/* Disabled cells (days that don't exist in month) */
.habits-tracker__cell--disabled {
    background-color: var(--gray-100);
    cursor: default;
}

.habits-tracker__cell--disabled:hover {
    background-color: var(--gray-100);
}

.habits-tracker__day-header--disabled {
    background-color: var(--gray-100);
    color: var(--gray-300);
}

/* Hidden habit name (for rowspan layout) */
.habits-tracker__habit-name--hidden {
    display: none;
}

/* Row1 and Row2 styling for paper tracker layout */
.habits-tracker__row1 {
    /* First data row - days 1-16 */
}

.habits-tracker__row2 {
    /* Second data row - days 17-31 */
}

.habits-tracker__row2--last {
    /* Last habit's row2 - no extra border needed */
}

/* Add visual separator between habits */
.habits-tracker__row2:not(.habits-tracker__row2--last) td {
    border-bottom: 2px solid var(--gray-500);
}

/* Habit name spanning 2 rows */
.habits-tracker__habit-name[rowspan="2"] {
    vertical-align: middle;
    background-color: var(--gray-50);
    border-right: 2px solid var(--gray-500);
}

/* ==========================================================================
   Mobile Habit Tracker Grid Layout
   ========================================================================== */
.habits-mobile-habit {
    background: white;
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
    margin-bottom: var(--space-4);
    overflow: hidden;
}

.habits-mobile-habit__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.habits-mobile-habit__icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

.habits-mobile-habit__icon svg {
    width: 18px;
    height: 18px;
}

.habits-mobile-habit__name {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.habits-mobile-habit__streak {
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 2px 8px;
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    border-radius: var(--radius-full);
    font-size: 11px;
    font-weight: var(--font-semibold);
    color: #B45309;
}

.habits-mobile-habit__streak svg {
    width: 12px;
    height: 12px;
}

.habits-mobile-habit__grid {
    padding: var(--space-2);
}

.habits-mobile-habit__row {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 4px;
    margin-bottom: 4px;
}

.habits-mobile-habit__row:last-child {
    margin-bottom: 0;
}

/* Mobile cell styles */
.habits-mobile-cell {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4px 2px;
    border-radius: var(--radius-md);
    background: var(--gray-50);
    cursor: pointer;
    transition: all var(--transition-fast);
    min-height: 44px;
    border: 1px solid var(--gray-200);
}

.habits-mobile-cell:hover {
    background: var(--gray-100);
}

.habits-mobile-cell__weekday {
    font-size: 9px;
    font-weight: var(--font-medium);
    color: var(--gray-400);
    text-transform: uppercase;
    line-height: 1;
}

.habits-mobile-cell__day {
    font-size: 13px;
    font-weight: var(--font-bold);
    color: var(--gray-700);
    line-height: 1.2;
}

/* Completed cell */
.habits-mobile-cell--done {
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
    border-color: #6366F1;
}

.habits-mobile-cell--done .habits-mobile-cell__weekday,
.habits-mobile-cell--done .habits-mobile-cell__day {
    color: white;
}

.habits-mobile-cell--done:hover {
    background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
}

/* Today's cell */
.habits-mobile-cell--today {
    border: 2px solid var(--primary);
    background: #EEF2FF;
}

.habits-mobile-cell--today.habits-mobile-cell--done {
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
}

/* Future cell */
.habits-mobile-cell--future {
    background: var(--gray-25, #FAFAFA);
    cursor: default;
    opacity: 0.6;
}

.habits-mobile-cell--future:hover {
    background: var(--gray-25, #FAFAFA);
}

/* Disabled cell (days beyond month) */
.habits-mobile-cell--disabled {
    background: transparent;
    border-color: transparent;
    cursor: default;
    opacity: 0.3;
}

.habits-mobile-cell--disabled:hover {
    background: transparent;
}

/* Rest day cell */
.habits-mobile-cell--rest {
    background: #FEF3C7;
    border-color: #FDE68A;
    cursor: default;
}

.habits-mobile-cell--rest:hover {
    background: #FEF3C7;
}

.habits-mobile-cell--rest .habits-mobile-cell__weekday,
.habits-mobile-cell--rest .habits-mobile-cell__day {
    color: #B45309;
}

/* Not scheduled cell */
.habits-mobile-cell--not-scheduled {
    background: var(--gray-50);
    opacity: 0.4;
    cursor: default;
}

.habits-mobile-cell--not-scheduled:hover {
    background: var(--gray-50);
}

/* Empty Grid State */
.habits-empty {
    text-align: center;
    padding: var(--space-8);
    color: var(--gray-400);
}

.habits-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.habits-empty p {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    margin: 0 0 var(--space-1) 0;
}

.habits-empty span {
    font-size: var(--text-sm);
}

/* Habits Page Summary Section */
.habits-page__summary {
    margin-top: var(--space-6);
    padding: var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.habits-page__summary h3 {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-4) 0;
}

.habits-summary-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-3);
}

.habits-summary-card {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--white);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
}

.habits-summary-card__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border-radius: var(--radius-md);
    flex-shrink: 0;
}

.habits-summary-card__icon svg {
    width: 20px;
    height: 20px;
    color: var(--gray-500);
}

.habits-summary-card__info {
    flex: 1;
    min-width: 0;
}

.habits-summary-card__name {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.habits-summary-card__stats {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: 2px;
}

.habits-summary-card__bar {
    width: 60px;
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
    flex-shrink: 0;
}

.habits-summary-card__progress {
    height: 100%;
    background-color: var(--primary);
    border-radius: var(--radius-full);
    transition: width var(--transition-base);
}

/* Responsive Habits Tracker */
@media (max-width: 768px) {
    .habits-page {
        padding: var(--space-4);
    }

    .habits-page__header {
        flex-direction: column;
        align-items: flex-start;
    }

    .habits-page__title {
        font-size: var(--text-lg);
    }

    .habits-page__nav {
        width: 100%;
        justify-content: center;
    }

    .habits-tracker__habit-name {
        font-size: var(--text-sm);
        padding: var(--space-2) var(--space-3);
        max-width: 120px;
        min-width: 100px;
    }

    .habits-tracker__cell {
        width: 34px;
        height: 34px;
        min-width: 34px;
        padding: 3px;
    }

    .habits-tracker__weekday-abbr {
        font-size: 7px;
    }

    .habits-tracker__day-num {
        font-size: 11px;
    }

    .habits-summary-cards {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .habits-tracker__habit-name {
        max-width: 90px;
        min-width: 70px;
        font-size: 11px;
    }

    .habits-tracker__cell {
        width: 26px;
        min-width: 26px;
        height: 26px;
        padding: 2px;
    }

    .habits-tracker__weekday-abbr {
        font-size: 6px;
    }

    .habits-tracker__day-num {
        font-size: 9px;
    }
}

/* Manage Habits Modal */
.manage-habits {
    padding: var(--space-2);
}

.manage-habits__current {
    margin-bottom: var(--space-4);
}

.manage-habits__section-title {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    margin: 0 0 var(--space-3) 0;
}

.manage-habits__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 200px;
    overflow-y: auto;
}

.manage-habits__item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.manage-habits__item-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.manage-habits__item-icon svg {
    width: 16px;
    height: 16px;
    color: var(--gray-500);
}

.manage-habits__item-name {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.manage-habits__item-delete {
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

.manage-habits__item:hover .manage-habits__item-delete {
    opacity: 1;
}

.manage-habits__add-section {
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-200);
}

.manage-habits__add-form {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
    align-items: flex-end;
}

.manage-habits__add-form .form-group {
    position: static;
}

.manage-habits__add-form select {
    position: static;
}

.manage-habits__add-input {
    flex: 1;
}

.manage-habits__suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.manage-habits__suggestion {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-100);
    border: 1px solid transparent;
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.manage-habits__suggestion:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.manage-habits__suggestion svg {
    width: 14px;
    height: 14px;
}

.manage-habits__empty {
    text-align: center;
    color: var(--gray-400);
    font-size: var(--text-sm);
    padding: var(--space-4);
}

/* Responsive */
@media (max-width: 768px) {
    .habits-page {
        padding: var(--space-4);
    }

    .habits-page__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .habits-page__nav {
        width: 100%;
        justify-content: space-between;
    }

    .habits-grid__header-cell--habit {
        min-width: 100px;
    }

    .habits-grid__cell {
        width: 24px;
        height: 24px;
    }

    .habits-grid__cell-inner {
        width: 20px;
        height: 20px;
    }

    .habits-summary {
        grid-template-columns: 1fr;
    }

    .manage-habits__add-form {
        flex-direction: column;
        align-items: stretch;
    }

    .manage-habits__add-form .form-group {
        width: 100% !important;
        min-width: 100% !important;
    }

    .manage-habits__add-form button {
        align-self: stretch !important;
    }
}

@media (max-width: 480px) {
    .habits-grid__header-cell {
        font-size: 10px;
        padding: var(--space-1);
    }

    .habits-grid__habit-name {
        font-size: var(--text-xs);
        padding: var(--space-2);
    }

    .habits-grid__cell {
        width: 20px;
        height: 20px;
    }

    .habits-grid__cell-inner {
        width: 16px;
        height: 16px;
    }

    .habits-grid__cell--completed .habits-grid__cell-inner svg {
        width: 10px;
        height: 10px;
    }
}

/* ==========================================================================
   Habits Widget - New Features (Streak, Categories, Circular Ring, etc.)
   ========================================================================== */

/* Celebration Animation Overlay */
.habit-celebration {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: celebrationFadeIn 0.3s ease-out;
}

.habit-celebration__content {
    text-align: center;
    animation: celebrationPop 0.5s ease-out;
}

.habit-celebration__emoji {
    font-size: 80px;
    margin-bottom: var(--space-4);
    animation: celebrationBounce 0.6s ease-out;
}

.habit-celebration__message {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--white);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

@keyframes celebrationFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes celebrationPop {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes celebrationBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

/* Rest Day Banner */
.habits-widget__rest-banner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3);
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
    color: #92400E;
    font-weight: var(--font-medium);
}

.habits-widget__rest-banner svg {
    width: 18px;
    height: 18px;
}

/* Habit Item with Streak */
.habit-item__streak {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--text-xs);
    color: var(--warning);
    font-weight: var(--font-semibold);
    padding: 2px 8px;
    background-color: #FEF3C7;
    border-radius: var(--radius-full);
    flex-shrink: 0;
}

.habit-item__streak svg {
    width: 12px;
    height: 12px;
}

/* Category-colored habit icons */
.habit-item__icon--health { color: #EF4444; }
.habit-item__icon--wellness { color: #8B5CF6; }
.habit-item__icon--productivity { color: #F59E0B; }
.habit-item__icon--fitness { color: #10B981; }
.habit-item__icon--learning { color: #3B82F6; }
.habit-item__icon--other { color: #6B7280; }

/* Stats Page - Rest Day and Not Scheduled Cells */
.habits-tracker__cell--rest {
    background: repeating-linear-gradient(
        45deg,
        var(--gray-100),
        var(--gray-100) 4px,
        var(--gray-200) 4px,
        var(--gray-200) 8px
    );
    cursor: default;
}

.habits-tracker__cell--rest:hover {
    background: repeating-linear-gradient(
        45deg,
        var(--gray-100),
        var(--gray-100) 4px,
        var(--gray-200) 4px,
        var(--gray-200) 8px
    );
}

.habits-tracker__cell--rest .habits-tracker__day-label {
    opacity: 0.5;
}

.habits-tracker__cell--not-scheduled {
    background-color: var(--gray-50);
    cursor: default;
}

.habits-tracker__cell--not-scheduled:hover {
    background-color: var(--gray-50);
}

.habits-tracker__cell--not-scheduled .habits-tracker__day-label {
    opacity: 0.3;
}

/* Streak Display in Habit Name Cell */
.habits-tracker__habit-streak {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--text-xs);
    color: var(--warning);
    font-weight: var(--font-medium);
    margin-top: 4px;
}

.habits-tracker__habit-streak svg {
    width: 12px;
    height: 12px;
}

/* Archived Habits Section in Stats Page */
.habits-page__archived {
    margin-top: var(--space-6);
    padding-top: var(--space-6);
    border-top: 1px solid var(--gray-200);
}

.habits-page__archived h3 {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    margin: 0 0 var(--space-4) 0;
}

.habits-page__archived h3 svg {
    width: 18px;
    height: 18px;
}

.habits-archived-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.habits-archived-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    opacity: 0.8;
    transition: opacity 0.2s;
}

.habits-archived-item:hover {
    opacity: 1;
}

.habits-archived-item__info {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex: 1;
}

.habits-archived-item__info i {
    width: 20px;
    height: 20px;
    color: var(--gray-400);
}

.habits-archived-item__info span {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.habits-archived-item__actions {
    display: flex;
    gap: var(--space-2);
    align-items: center;
}

.habits-archived-item__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.habits-archived-item__icon svg {
    width: 16px;
    height: 16px;
}

.habits-archived-item__name {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.habits-archived-item__stats {
    font-size: var(--text-xs);
    color: var(--gray-400);
    margin-top: 2px;
}

.habits-archived-item__restore {
    padding: var(--space-2) var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.habits-archived-item__restore:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

/* Manage Habits Modal - Category Grouping */
.manage-habits__category {
    margin-bottom: var(--space-4);
}

.manage-habits__category-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    margin-bottom: var(--space-2);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--gray-200);
}

.manage-habits__category-header svg {
    width: 16px;
    height: 16px;
}

.manage-habits__category-header--health { color: #EF4444; }
.manage-habits__category-header--wellness { color: #8B5CF6; }
.manage-habits__category-header--productivity { color: #F59E0B; }
.manage-habits__category-header--fitness { color: #10B981; }
.manage-habits__category-header--learning { color: #3B82F6; }
.manage-habits__category-header--other { color: #6B7280; }

/* Habit Item in Manage Modal - Schedule & Streak Info */
.manage-habits__item-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.manage-habits__item-schedule {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--text-xs);
    color: var(--gray-400);
}

.manage-habits__item-schedule svg {
    width: 12px;
    height: 12px;
}

.manage-habits__item-streak {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--text-xs);
    color: var(--warning);
    font-weight: var(--font-medium);
}

.manage-habits__item-streak svg {
    width: 12px;
    height: 12px;
}

/* Custom Days Picker */
.manage-habits__custom-days {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: var(--space-2);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.manage-habits__weekday {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.manage-habits__weekday:hover {
    border-color: var(--primary);
    color: var(--primary);
}

.manage-habits__weekday--selected {
    background-color: var(--primary);
    border-color: var(--primary);
    color: var(--white);
}

.manage-habits__weekday--selected:hover {
    background-color: var(--primary-hover);
    color: var(--white);
}

/* Edit Habit Form Stats */
.edit-habit-form__stats {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.edit-habit-form__stat {
    text-align: center;
    flex: 1;
}

.edit-habit-form__stat-value {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.edit-habit-form__stat-value svg {
    width: 16px;
    height: 16px;
    color: var(--warning);
}

.edit-habit-form__stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: 2px;
}

/* Icon Picker for Habits */
.icon-picker {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(44px, 1fr));
    gap: var(--space-2);
    padding: var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
}

.icon-picker__icon {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid transparent;
    background: white;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s;
    color: var(--gray-600);
}

.icon-picker__icon:hover {
    background: var(--primary-light);
    color: var(--primary);
    border-color: var(--primary);
    transform: scale(1.1);
}

.icon-picker__icon--selected {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.icon-picker__icon--selected:hover {
    background: var(--primary-dark);
    border-color: var(--primary-dark);
}

.icon-picker__icon i {
    width: 20px;
    height: 20px;
}

/* Mobile responsive icon picker */
@media (max-width: 768px) {
    .icon-picker {
        grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
        gap: var(--space-1);
        padding: var(--space-2);
    }

    .icon-picker__icon {
        width: 40px;
        height: 40px;
    }

    .icon-picker__icon i {
        width: 18px;
        height: 18px;
    }
}

/* Add Habit Form - Category & Schedule Fields */
.add-habit-form__field {
    margin-bottom: var(--space-4);
}

.add-habit-form__label {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    margin-bottom: var(--space-2);
}

.add-habit-form__select {
    width: 100%;
    padding: var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: pointer;
    transition: border-color var(--transition-fast);
}

.add-habit-form__select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

/* Category Select with Icons */
.add-habit-form__category-options {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-2);
}

.add-habit-form__category-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3);
    background-color: var(--white);
    border: 2px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.add-habit-form__category-option:hover {
    border-color: var(--gray-300);
}

.add-habit-form__category-option--selected {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.add-habit-form__category-option svg {
    width: 20px;
    height: 20px;
}

.add-habit-form__category-option span {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* Schedule Select */
.add-habit-form__schedule-options {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.add-habit-form__schedule-option {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.add-habit-form__schedule-option:hover {
    border-color: var(--gray-300);
}

.add-habit-form__schedule-option--selected {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.add-habit-form__schedule-option svg {
    width: 18px;
    height: 18px;
    color: var(--gray-500);
}

.add-habit-form__schedule-option--selected svg {
    color: var(--primary);
}

.add-habit-form__schedule-option span {
    font-size: var(--text-sm);
    color: var(--gray-700);
}

/* Rest Day Toggle Button */
.habits-widget__rest-toggle {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: transparent;
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.habits-widget__rest-toggle:hover {
    background-color: var(--gray-50);
    border-color: var(--gray-300);
}

.habits-widget__rest-toggle--active {
    background-color: #FEF3C7;
    border-color: #F59E0B;
    color: #92400E;
}

.habits-widget__rest-toggle svg {
    width: 14px;
    height: 14px;
}

/* Habits Actions Row */
.habits-widget__actions {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

/* Archive Button in Habit Item */
.habit-item__archive {
    padding: var(--space-1);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--gray-400);
    cursor: pointer;
    opacity: 0;
    transition: all var(--transition-fast);
}

.habit-item:hover .habit-item__archive {
    opacity: 1;
}

.habit-item__archive:hover {
    color: var(--gray-600);
    background-color: var(--gray-100);
}

.habit-item__archive svg {
    width: 14px;
    height: 14px;
}

/* Responsive for new features */
@media (max-width: 480px) {
    .manage-habits__custom-days {
        justify-content: center;
    }

    .add-habit-form__category-options {
        grid-template-columns: repeat(2, 1fr);
    }

    .habits-archived-item {
        flex-direction: column;
        align-items: stretch;
    }

    .habits-archived-item__info {
        width: 100%;
    }

    .habits-archived-item__actions {
        width: 100%;
        justify-content: stretch;
    }

    .habits-archived-item__actions button {
        flex: 1;
    }
}

/* ==========================================================================
   Recipes Widget
   ========================================================================== */

/* Widget View */
.recipes-widget__stats {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-4);
}

.recipes-widget__stat {
    text-align: center;
    flex: 1;
}

.recipes-widget__stat-value {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--gray-900);
    line-height: 1;
}

.recipes-widget__stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

.recipes-widget__section-title {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-2);
}

/* Horizontal Scroll Container */
.recipes-widget__scroll {
    display: flex;
    gap: var(--space-3);
    overflow-x: auto;
    padding-bottom: var(--space-2);
    margin: 0 calc(var(--space-4) * -1);
    padding-left: var(--space-4);
    padding-right: var(--space-4);
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.recipes-widget__scroll::-webkit-scrollbar {
    display: none;
}

/* Recipe Chip */
.recipe-chip {
    --recipe-color: var(--primary);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: 0;
    background: transparent;
    border: none;
    cursor: pointer;
    flex-shrink: 0;
    width: 72px;
    transition: transform var(--transition-fast);
}

.recipe-chip:hover {
    transform: translateY(-2px);
}

.recipe-chip__thumb,
.recipe-chip__icon {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-full);
    overflow: hidden;
    flex-shrink: 0;
    border: 2px solid transparent;
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.recipe-chip:hover .recipe-chip__thumb,
.recipe-chip:hover .recipe-chip__icon {
    border-color: var(--recipe-color);
    box-shadow: 0 4px 12px color-mix(in srgb, var(--recipe-color) 30%, transparent);
}

.recipe-chip__thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.recipe-chip__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--recipe-color) 20%, white),
        color-mix(in srgb, var(--recipe-color) 40%, white));
}

.recipe-chip__icon svg {
    width: 24px;
    height: 24px;
    color: var(--recipe-color);
}

.recipe-chip__name {
    font-size: var(--text-xs);
    font-weight: 500;
    color: var(--gray-700);
    text-align: center;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.recipes-widget__empty {
    text-align: center;
    padding: var(--space-6);
    color: var(--gray-400);
}

.recipes-widget__empty-icon {
    font-size: 48px;
    margin-bottom: var(--space-2);
}

.recipes-widget__empty-text {
    font-size: var(--text-sm);
}

/* Recipes Page */
.recipes-page {
    max-width: 1200px;
    margin: 0 auto;
}

/* Colorful Hero Header */
.recipes-page__hero {
    position: relative;
    background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 25%, #FEC89A 50%, #A8E6CF 75%, #6B9DFC 100%);
    padding: var(--space-8) var(--space-6);
    border-radius: 0 0 var(--radius-2xl) var(--radius-2xl);
    margin-bottom: var(--space-6);
    overflow: hidden;
}

.recipes-page__hero-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.recipes-hero-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.3;
    background: white;
}

.recipes-hero-shape--1 {
    width: 120px;
    height: 120px;
    top: -20px;
    right: 10%;
    animation: float 6s ease-in-out infinite;
}

.recipes-hero-shape--2 {
    width: 80px;
    height: 80px;
    bottom: -20px;
    left: 15%;
    animation: float 8s ease-in-out infinite reverse;
}

.recipes-hero-shape--3 {
    width: 60px;
    height: 60px;
    top: 30%;
    left: 5%;
    animation: float 5s ease-in-out infinite;
}

.recipes-hero-shape--4 {
    width: 100px;
    height: 100px;
    bottom: 10%;
    right: 5%;
    animation: float 7s ease-in-out infinite reverse;
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
}

.recipes-page__hero-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.recipes-page__back {
    position: absolute;
    top: 0;
    left: 0;
    color: white;
}

.recipes-page__back:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.recipes-page__hero-text {
    margin-bottom: var(--space-4);
}

.recipes-page__hero-title {
    font-size: var(--text-3xl);
    font-weight: 700;
    color: white;
    margin: 0 0 var(--space-2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.recipes-page__hero-title svg {
    width: 36px;
    height: 36px;
}

.recipes-page__hero-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: var(--text-base);
    margin: 0;
}

.recipes-page__hero-stats {
    display: flex;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
}

.recipes-hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-xl);
}

.recipes-hero-stat__value {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: white;
}

.recipes-hero-stat__label {
    font-size: var(--text-xs);
    color: rgba(255, 255, 255, 0.85);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.recipes-page__add-btn {
    background: white;
    color: #FF6B6B;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.recipes-page__add-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

/* Toolbar */
.recipes-page__toolbar {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: 0 var(--space-6);
    margin-bottom: var(--space-4);
}

/* Sort dropdown */
.recipes-page__sort {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-left: auto;
}

.recipes-page__sort-label {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--gray-500);
    white-space: nowrap;
}

.recipes-page__sort-label svg {
    width: 16px;
    height: 16px;
}

.recipes-page__sort select {
    min-width: 160px;
}

/* Filters row */
.recipes-page__filters {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
    align-items: center;
    padding: 0 var(--space-6);
    margin-bottom: var(--space-6);
}

.recipes-page__content {
    padding: 0 var(--space-6) var(--space-6);
}

/* Search */
.recipes-page__search {
    position: relative;
    width: 100%;
}

.recipes-page__search svg {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: var(--gray-400);
    pointer-events: none;
}

.recipes-page__search .form-input {
    width: 100%;
    padding: var(--space-3) var(--space-4);
    padding-left: var(--space-10);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    background-color: var(--gray-50);
    transition: all var(--transition-fast);
}

.recipes-page__search .form-input:focus {
    outline: none;
    border-color: var(--primary);
    background-color: var(--white);
    box-shadow: 0 0 0 3px var(--primary-light);
}

/* Tag Filters */
.recipes-filter {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-100);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipes-filter svg {
    width: 14px;
    height: 14px;
}

.recipes-filter:hover {
    background-color: var(--gray-200);
}

.recipes-filter--active {
    background-color: var(--primary);
    border-color: var(--primary);
    color: var(--white);
}

.recipes-filter--active:hover {
    background-color: var(--primary-dark);
}

.recipes-filter--favorites {
    background-color: #FFF0F0;
    border-color: #FFD4D4;
    color: #E53E3E;
}

.recipes-filter--favorites:hover {
    background-color: #FFE5E5;
}

.recipes-filter--favorites.recipes-filter--active {
    background-color: #E53E3E;
    border-color: #E53E3E;
    color: white;
}

/* Empty state with illustration */
.recipes-page__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-12) var(--space-6);
    text-align: center;
}

.recipes-page__empty-illustration {
    position: relative;
    width: 120px;
    height: 120px;
    margin-bottom: var(--space-4);
}

.recipes-empty-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #FF6B6B, #FEC89A);
    border-radius: 50%;
    color: white;
    z-index: 2;
}

.recipes-empty-icon svg {
    width: 40px;
    height: 40px;
}

.recipes-empty-shapes {
    position: absolute;
    inset: 0;
}

.recipes-empty-shape {
    position: absolute;
    border-radius: 50%;
    animation: pulse-float 3s ease-in-out infinite;
}

.recipes-empty-shape:nth-child(1) {
    width: 30px;
    height: 30px;
    top: 0;
    right: 10px;
    background: #A8E6CF;
    animation-delay: 0s;
}

.recipes-empty-shape:nth-child(2) {
    width: 20px;
    height: 20px;
    bottom: 10px;
    left: 0;
    background: #6B9DFC;
    animation-delay: 0.5s;
}

.recipes-empty-shape:nth-child(3) {
    width: 25px;
    height: 25px;
    top: 30%;
    left: 5px;
    background: #FF8E53;
    animation-delay: 1s;
}

@keyframes pulse-float {
    0%, 100% { transform: scale(1) translateY(0); opacity: 0.7; }
    50% { transform: scale(1.1) translateY(-5px); opacity: 1; }
}

.recipes-page__empty h3 {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--gray-800);
    margin: 0 0 var(--space-2);
}

.recipes-page__empty p {
    color: var(--gray-500);
    margin: 0 0 var(--space-4);
}

/* Recipe Tags */
.recipe-tag {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    background-color: var(--gray-100);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipe-tag:hover {
    background-color: var(--gray-200);
}

.recipe-tag--active {
    background-color: var(--primary);
    border-color: var(--primary);
    color: var(--white);
}

.recipe-tag--active:hover {
    background-color: var(--primary-dark);
}

.recipe-tag__remove {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 14px;
    height: 14px;
    margin-left: var(--space-1);
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.3);
}

.recipe-tag__remove svg {
    width: 10px;
    height: 10px;
}

/* Recipes Grid */
.recipes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-4);
}

/* Recipe Card (Full) - Fully Colored */
.recipe-card {
    --card-color: #6366F1;
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--card-color) 15%, white),
        color-mix(in srgb, var(--card-color) 25%, white));
    border-radius: var(--radius-xl);
    border: 1px solid color-mix(in srgb, var(--card-color) 30%, transparent);
    overflow: hidden;
    cursor: pointer;
    transition: all var(--transition-fast);
    position: relative;
}

.recipe-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 30px color-mix(in srgb, var(--card-color) 30%, transparent);
    border-color: color-mix(in srgb, var(--card-color) 50%, transparent);
}

/* Favorite Button on Card */
.recipe-card__favorite {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    z-index: 10;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.recipe-card__favorite svg {
    width: 18px;
    height: 18px;
    color: var(--gray-400);
    transition: all var(--transition-fast);
}

.recipe-card__favorite:hover {
    background: white;
    transform: scale(1.1);
}

.recipe-card__favorite:hover svg {
    color: #E53E3E;
}

.recipe-card--favorite .recipe-card__favorite svg {
    color: #E53E3E;
    fill: #E53E3E;
}

.recipe-card--favorite .recipe-card__favorite {
    background: #FFF0F0;
}

/* Recipe Card with Image */
.recipe-card--has-image {
    background: var(--white);
}

.recipe-card__image {
    width: 100%;
    height: 140px;
    overflow: hidden;
}

.recipe-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-fast);
}

.recipe-card--has-image:hover .recipe-card__image img {
    transform: scale(1.05);
}

.recipe-card--has-image .recipe-card__header {
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--card-color) 10%, white),
        color-mix(in srgb, var(--card-color) 20%, white));
}

.recipe-card--has-image .recipe-card__body {
    background: linear-gradient(180deg,
        color-mix(in srgb, var(--card-color) 5%, white),
        color-mix(in srgb, var(--card-color) 15%, white));
}

.recipe-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3) var(--space-4);
    background: linear-gradient(135deg,
        color-mix(in srgb, var(--card-color) 30%, transparent),
        color-mix(in srgb, var(--card-color) 50%, transparent));
}

.recipe-card__icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--card-color);
    border-radius: var(--radius-lg);
    color: var(--white);
}

.recipe-card__icon svg {
    width: 18px;
    height: 18px;
}

.recipe-card__actions {
    display: flex;
    gap: var(--space-1);
}

.recipe-card__action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border: none;
    background-color: rgba(255, 255, 255, 0.6);
    border-radius: var(--radius-md);
    cursor: pointer;
    color: var(--gray-600);
    transition: all var(--transition-fast);
}

.recipe-card__action:hover {
    background-color: rgba(255, 255, 255, 0.9);
}

.recipe-card__action--delete:hover {
    background-color: var(--red-100);
    color: var(--red-500);
}

.recipe-card__action svg {
    width: 14px;
    height: 14px;
}

.recipe-card__body {
    padding: var(--space-4);
}

.recipe-card__name {
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--gray-900);
    margin: 0 0 var(--space-1);
}

.recipe-card__description {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-3);
    line-height: 1.4;
}

.recipe-card__meta {
    display: flex;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.recipe-card__meta-item {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.recipe-card__meta-item svg {
    width: 14px;
    height: 14px;
    color: var(--card-color);
}

.recipe-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.recipe-card .recipe-tag {
    background-color: rgba(255, 255, 255, 0.7);
    border: 1px solid color-mix(in srgb, var(--card-color) 30%, transparent);
    color: var(--gray-700);
}

/* Nutrition info on card */
.recipe-card__nutrition {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
    padding: var(--space-2);
    background: rgba(255, 255, 255, 0.5);
    border-radius: var(--radius-md);
}

.recipe-card__nutrition-item {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

.recipe-card__nutrition-item strong {
    color: var(--gray-800);
    font-weight: 600;
}

.recipe-card__source {
    margin-top: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
    font-size: var(--text-xs);
    color: var(--gray-400);
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.recipe-card__source svg {
    width: 12px;
    height: 12px;
}

/* Add Recipe Card */
.recipe-card--add {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    border: 2px dashed var(--gray-300);
    background-color: var(--gray-50);
}

.recipe-card--add:hover {
    border-color: var(--primary);
    background-color: var(--primary-light);
    transform: none;
    box-shadow: none;
}

.recipe-card--add svg {
    width: 48px;
    height: 48px;
    color: var(--gray-400);
    margin-bottom: var(--space-2);
}

.recipe-card--add:hover svg {
    color: var(--primary);
}

.recipe-card--add span {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.recipe-card--add:hover span {
    color: var(--primary);
}

/* Recipe Detail Page */
.recipe-detail {
    padding: var(--space-6);
    max-width: 900px;
    margin: 0 auto;
}

.recipe-detail__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-6);
}

.recipe-detail__title-section {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.recipe-detail__back {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border: none;
    background-color: var(--gray-100);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipe-detail__back:hover {
    background-color: var(--gray-200);
}

.recipe-detail__back svg {
    width: 20px;
    height: 20px;
    color: var(--gray-600);
}

.recipe-detail__name {
    font-size: var(--text-3xl);
    font-weight: 700;
    color: var(--gray-900);
    margin: 0;
}

.recipe-detail__actions {
    display: flex;
    gap: var(--space-2);
}

.recipe-detail__action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: none;
    background-color: var(--gray-100);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
    color: var(--gray-600);
}

.recipe-detail__action-btn:hover {
    background-color: var(--gray-200);
}

.recipe-detail__action-btn--favorite {
    color: var(--gray-300);
}

.recipe-detail__action-btn--favorite.active {
    color: var(--amber-500);
}

.recipe-detail__action-btn--favorite.active svg {
    fill: var(--amber-500);
}

.recipe-detail__action-btn--delete:hover {
    background-color: var(--red-100);
    color: var(--red-500);
}

.recipe-detail__action-btn svg {
    width: 20px;
    height: 20px;
}

/* Recipe Info Cards */
.recipe-detail__info {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
    margin-bottom: var(--space-6);
}

.recipe-detail__info-card {
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    text-align: center;
}

.recipe-detail__info-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    margin: 0 auto var(--space-2);
    background-color: var(--white);
    border-radius: var(--radius-lg);
    color: var(--primary);
}

.recipe-detail__info-icon svg {
    width: 20px;
    height: 20px;
}

.recipe-detail__info-value {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--gray-900);
}

.recipe-detail__info-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

/* Recipe Two Column Layout */
.recipe-detail__two-col {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: var(--space-8);
}

/* Recipe Sections */
.recipe-detail__section {
    margin-bottom: var(--space-6);
}

.recipe-detail__section--ingredients {
    background-color: var(--gray-50);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
}

.recipe-detail__section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-4);
    gap: var(--space-3);
}

.recipe-detail__section-title {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--gray-900);
    margin: 0;
}

.recipe-detail__section--instructions .recipe-detail__section-title {
    margin-bottom: var(--space-4);
}

/* Ingredients List - Simple bullet style */
.recipe-detail__ingredients {
    list-style: disc;
    padding-left: var(--space-5);
    margin: 0;
}

.recipe-detail__ingredient {
    font-size: var(--text-sm);
    color: var(--gray-700);
    line-height: 1.8;
    padding: var(--space-1) 0;
}

.recipe-detail__ingredient::marker {
    color: var(--primary);
}

/* Instructions - Paragraph style */
.recipe-detail__instructions {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.recipe-detail__step {
    font-size: var(--text-base);
    color: var(--gray-700);
    line-height: 1.7;
    margin: 0;
}

.recipe-detail__step strong {
    color: var(--gray-900);
    font-weight: 600;
}

/* Notes Section */
.recipe-detail__notes {
    background-color: var(--amber-50);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    border-left: 4px solid var(--amber-400);
}

.recipe-detail__notes p {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--gray-700);
    line-height: 1.6;
}

/* Source Link */
.recipe-detail__source {
    margin-top: var(--space-6);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-200);
}

.recipe-detail__source-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--primary);
    font-size: var(--text-sm);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.recipe-detail__source-link:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

.recipe-detail__source-link svg {
    width: 16px;
    height: 16px;
}

/* Recipe Form Modal */
.recipe-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.recipe-form__row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-4);
}

.recipe-form__section--third {
    flex: 1;
}

.recipe-form__row:has(.recipe-form__section--third) {
    grid-template-columns: 1fr 1fr 1fr;
}

/* Prep section */
.recipe-form__prep-section {
    background-color: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-200, #FDE68A);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
}

.recipe-form__prep-details {
    margin-top: var(--space-3);
}

.recipe-form__prep-details.hidden {
    display: none;
}

.recipe-form__group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.recipe-form__label {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--gray-700);
}

.recipe-form__input,
.recipe-form__select,
.recipe-form__textarea {
    padding: var(--space-3);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    transition: all var(--transition-fast);
}

.recipe-form__input:focus,
.recipe-form__select:focus,
.recipe-form__textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

.recipe-form__textarea {
    min-height: 100px;
    resize: vertical;
}

/* Color Picker */
.recipe-form__colors {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
}

.recipe-color {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipe-color:hover {
    transform: scale(1.1);
}

.recipe-color--selected {
    border-color: var(--gray-900);
    box-shadow: 0 0 0 2px var(--white), 0 0 0 4px var(--gray-300);
}

/* Tags Input */
.recipe-form__tags-input {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    padding: var(--space-2);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    background-color: var(--white);
    min-height: 44px;
    align-items: center;
}

.recipe-form__tags-input:focus-within {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
}

.recipe-form__tag {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background-color: var(--primary-light);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--primary);
}

.recipe-form__tag-remove {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border: none;
    background: none;
    cursor: pointer;
    color: var(--primary);
    border-radius: 50%;
    transition: background-color var(--transition-fast);
}

.recipe-form__tag-remove:hover {
    background-color: var(--primary);
    color: var(--white);
}

.recipe-form__tag-remove svg {
    width: 12px;
    height: 12px;
}

.recipe-form__tag-input {
    flex: 1;
    min-width: 100px;
    border: none;
    outline: none;
    font-size: var(--text-sm);
    padding: var(--space-1);
}

.recipe-form__tag-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-1);
    margin-top: var(--space-1);
}

.recipe-form__tag-suggestion {
    padding: var(--space-1) var(--space-2);
    background-color: var(--gray-100);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipe-form__tag-suggestion:hover {
    background-color: var(--primary-light);
    color: var(--primary);
}

/* Ingredients Textarea */
.recipe-form__help {
    font-size: var(--text-xs);
    color: var(--gray-400);
    margin-top: var(--space-1);
}

/* URL Import */
.recipe-form__url-import {
    display: flex;
    gap: var(--space-2);
}

.recipe-form__url-import input {
    flex: 1;
}

.recipe-form__url-import button {
    white-space: nowrap;
}

/* Recipe Form - Import Section */
.recipe-form__import {
    background: linear-gradient(135deg, var(--indigo-50), var(--purple-50));
    border: 1px dashed var(--indigo-200);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
}

.recipe-form__import .form-label {
    color: var(--indigo-700);
    font-weight: 600;
    margin-bottom: var(--space-2);
}

.recipe-form__import-row {
    display: flex;
    gap: var(--space-2);
}

.recipe-form__import-row input {
    flex: 1;
}

.recipe-form__import-row button {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    white-space: nowrap;
}

.recipe-form__import-row button svg {
    width: 16px;
    height: 16px;
}

.recipe-form__hint {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-2);
    font-style: italic;
}

.recipe-form__divider {
    display: flex;
    align-items: center;
    text-align: center;
    margin: var(--space-4) 0;
    color: var(--gray-400);
    font-size: var(--text-sm);
}

.recipe-form__divider::before,
.recipe-form__divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid var(--gray-200);
}

.recipe-form__divider span {
    padding: 0 var(--space-3);
}

/* Recipe Form - Image Upload */
.recipe-form__image-upload {
    display: flex;
    gap: var(--space-4);
    align-items: flex-start;
}

.recipe-form__image-preview {
    width: 120px;
    height: 120px;
    border-radius: var(--radius-lg);
    background: var(--gray-100);
    border: 2px dashed var(--gray-300);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
}

.recipe-form__image-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.recipe-form__image-preview svg {
    width: 32px;
    height: 32px;
    color: var(--gray-400);
    margin-bottom: var(--space-1);
}

.recipe-form__image-preview span {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.recipe-form__image-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    flex: 1;
}

.recipe-form__image-actions .btn--sm {
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-sm);
}

.recipe-form__image-actions .btn--sm svg {
    width: 14px;
    height: 14px;
}

.recipe-form__or {
    font-size: var(--text-xs);
    color: var(--gray-400);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.form-input--sm {
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-sm);
}

/* Recipe Empty State */
.recipes-page__empty {
    text-align: center;
    padding: var(--space-12);
}

.recipes-page__empty-icon {
    font-size: 64px;
    margin-bottom: var(--space-4);
}

.recipes-page__empty-text {
    font-size: var(--text-lg);
    color: var(--gray-500);
    margin-bottom: var(--space-6);
}

/* Recipe Detail Image */
.recipe-detail__image {
    width: 100%;
    max-height: 300px;
    border-radius: var(--radius-xl);
    overflow: hidden;
    margin-bottom: var(--space-4);
}

.recipe-detail__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Recipe Hero Section */
.recipe-detail__hero {
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    margin-bottom: var(--space-6);
    text-align: center;
}

.recipe-detail__icon {
    width: 64px;
    height: 64px;
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-4);
    color: var(--white);
}

.recipe-detail__icon svg {
    width: 32px;
    height: 32px;
}

.recipe-detail__name {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--gray-900);
    margin: 0 0 var(--space-2);
}

.recipe-detail__description {
    font-size: var(--text-base);
    color: var(--gray-600);
    margin: 0 0 var(--space-4);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.recipe-detail__meta {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
}

.recipe-detail__meta-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.recipe-detail__meta-item svg {
    width: 18px;
    height: 18px;
}

.recipe-detail__meta-item--protein {
    color: var(--green-600, #059669);
    font-weight: var(--font-medium);
}

/* Prep Alert Banner */
.recipe-detail__prep-alert {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    background-color: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-300, #FCD34D);
    border-radius: var(--radius-lg);
    padding: var(--space-3) var(--space-4);
    margin-bottom: var(--space-4);
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
}

.recipe-detail__prep-alert > svg {
    width: 20px;
    height: 20px;
    color: var(--amber-600, #D97706);
    flex-shrink: 0;
    margin-top: 2px;
}

.recipe-detail__prep-alert-content {
    font-size: var(--text-sm);
}

.recipe-detail__prep-alert-content strong {
    color: var(--amber-800, #92400E);
}

.recipe-detail__prep-alert-content p {
    margin-top: var(--space-1);
    color: var(--gray-600);
}

/* Recipe Card Protein & Prep Indicators */
.recipe-card__meta-item--protein {
    color: var(--green-600, #059669);
}

.recipe-card__meta-item--prep {
    color: var(--amber-600, #D97706);
}

.recipe-detail__tags {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--space-2);
}

/* Favorite button in detail */
.recipe-detail__favorite {
    color: var(--gray-500);
}

.recipe-detail__favorite svg {
    width: 18px;
    height: 18px;
}

.recipe-detail__favorite--active {
    color: #E53E3E;
    background-color: #FFF0F0;
}

.recipe-detail__favorite--active svg {
    fill: #E53E3E;
}

.recipe-detail__favorite--active:hover {
    background-color: #FFE5E5;
}

/* Nutrition section in detail */
.recipe-detail__nutrition {
    margin-top: var(--space-4);
    padding: var(--space-4);
    background: rgba(255, 255, 255, 0.8);
    border-radius: var(--radius-lg);
}

.recipe-detail__nutrition-title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--gray-600);
    margin: 0 0 var(--space-3);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.recipe-detail__nutrition-grid {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    flex-wrap: wrap;
}

.recipe-detail__nutrition-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-2) var(--space-4);
    background: white;
    border-radius: var(--radius-md);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.recipe-detail__nutrition-value {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--gray-800);
}

.recipe-detail__nutrition-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
}

/* Notes section */
.recipe-detail__section--notes {
    margin-top: var(--space-6);
    padding: var(--space-4);
    background: var(--amber-50, #FFFBEB);
    border: 1px solid var(--amber-200, #FDE68A);
    border-radius: var(--radius-lg);
}

.recipe-detail__section--notes .recipe-detail__section-title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--amber-700, #B45309);
}

.recipe-detail__section--notes .recipe-detail__section-title svg {
    width: 20px;
    height: 20px;
}

.recipe-detail__notes {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.recipe-detail__notes-input {
    background: white;
    border-color: var(--amber-200, #FDE68A);
    resize: vertical;
}

.recipe-detail__notes-input:focus {
    border-color: var(--amber-400, #FBBF24);
    box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.2);
}

.recipe-detail__source {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-200);
}

.recipe-detail__source a {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--primary);
    font-size: var(--text-sm);
    text-decoration: none;
}

.recipe-detail__source a:hover {
    text-decoration: underline;
}

.recipe-detail__source svg {
    width: 16px;
    height: 16px;
}

/* Nutrition form row */
.recipe-form__nutrition-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-3);
}

.recipe-form__nutrition-field {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.form-label--sm {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

/* Responsive */
@media (max-width: 768px) {
    .recipes-page__hero {
        padding: var(--space-6) var(--space-4);
        border-radius: 0 0 var(--radius-xl) var(--radius-xl);
    }

    .recipes-page__hero-title {
        font-size: var(--text-2xl);
    }

    .recipes-page__hero-stats {
        gap: var(--space-3);
    }

    .recipes-hero-stat {
        padding: var(--space-2) var(--space-3);
    }

    .recipes-hero-stat__value {
        font-size: var(--text-lg);
    }

    .recipes-page__toolbar {
        flex-direction: column;
        padding: 0 var(--space-4);
    }

    .recipes-page__sort {
        margin-left: 0;
        width: 100%;
    }

    .recipes-page__sort select {
        flex: 1;
    }

    .recipes-page__search {
        width: 100%;
    }

    .recipes-page__filters {
        padding: 0 var(--space-4);
    }

    .recipes-page__content {
        padding: 0 var(--space-4) var(--space-4);
    }

    /* Better mobile grid - 2 columns on tablet */
    .recipes-grid {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: var(--space-3);
    }

    .recipe-card__favorite {
        width: 32px;
        height: 32px;
    }

    .recipe-card__favorite svg {
        width: 16px;
        height: 16px;
    }

    .recipe-detail {
        padding: var(--space-4);
    }

    .recipe-detail__two-col {
        grid-template-columns: 1fr;
        gap: var(--space-6);
    }

    .recipe-form__row {
        grid-template-columns: 1fr;
    }

    .recipe-form__nutrition-row {
        grid-template-columns: 1fr;
    }

    .recipe-form__image-upload {
        flex-direction: column;
        align-items: center;
    }

    .recipe-form__image-actions {
        width: 100%;
        align-items: stretch;
    }

    .recipe-form__import-row {
        flex-direction: column;
    }

    .recipes-widget__mini-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .recipes-page__hero {
        padding: var(--space-5) var(--space-3);
    }

    .recipes-page__hero-title {
        font-size: var(--text-xl);
        flex-direction: column;
        gap: var(--space-2);
    }

    .recipes-page__hero-title svg {
        width: 28px;
        height: 28px;
    }

    .recipes-page__hero-subtitle {
        font-size: var(--text-sm);
    }

    .recipes-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
    }

    .recipes-hero-shape--1,
    .recipes-hero-shape--4 {
        display: none;
    }

    /* Single column on mobile */
    .recipes-grid {
        grid-template-columns: 1fr;
    }

    .recipe-card:hover {
        transform: translateY(-2px) scale(1.01);
    }

    .recipe-detail__header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-3);
    }

    .recipe-detail__actions {
        width: 100%;
        justify-content: flex-end;
    }

    .recipe-detail__hero {
        padding: var(--space-4);
    }

    .recipe-detail__name {
        font-size: var(--text-xl);
    }

    .recipe-detail__nutrition-grid {
        gap: var(--space-3);
    }

    .recipe-detail__nutrition-item {
        padding: var(--space-2) var(--space-3);
    }
}


/* ==========================================================================
   Routine Widget
   ========================================================================== */

.routine-widget {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.routine-widget--empty {
    padding: var(--space-6);
}

.routine-widget__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    color: var(--gray-500);
}

.routine-widget__empty svg {
    width: 48px;
    height: 48px;
    color: var(--gray-300);
}

/* Header with Progress */
.routine-widget__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
}

.routine-widget__progress {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.routine-widget__progress-ring {
    position: relative;
    width: 48px;
    height: 48px;
}

.routine-widget__progress-ring svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}

.routine-widget__progress-ring circle {
    transition: stroke-dasharray 0.3s ease;
}

.routine-widget__progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    color: var(--gray-700);
}

.routine-widget__progress-info {
    display: flex;
    flex-direction: column;
}

.routine-widget__progress-label {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.routine-widget__progress-count {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.routine-widget__streak {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    background-color: color-mix(in srgb, var(--streak-color, var(--warning)) 15%, white);
    border-radius: var(--radius-full);
    color: var(--streak-color, var(--warning));
}

.routine-widget__streak svg {
    width: 16px;
    height: 16px;
}

.routine-widget__streak span {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
}

/* Period Section */
.routine-widget__period {
    background-color: color-mix(in srgb, var(--period-color, var(--primary)) 5%, white);
    border: 1px solid color-mix(in srgb, var(--period-color, var(--primary)) 20%, white);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
}

.routine-widget__period-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid color-mix(in srgb, var(--period-color, var(--primary)) 15%, white);
}

.routine-widget__period-header svg {
    width: 16px;
    height: 16px;
    color: var(--period-color, var(--primary));
}

.routine-widget__period-header span:first-of-type {
    flex: 1;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.routine-widget__period-count {
    font-size: var(--text-xs);
    color: var(--gray-500);
    background-color: var(--white);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

/* Steps List */
.routine-widget__steps {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.routine-step {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
    text-align: left;
    width: 100%;
}

.routine-step:hover {
    border-color: var(--period-color, var(--primary));
    background-color: color-mix(in srgb, var(--period-color, var(--primary)) 5%, white);
}

.routine-step--completed {
    background-color: color-mix(in srgb, var(--success) 10%, white);
    border-color: var(--success);
}

.routine-step--completed .routine-step__title {
    text-decoration: line-through;
    color: var(--gray-400);
}

.routine-step__check {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    color: var(--gray-300);
    transition: color var(--transition-fast);
}

.routine-step--completed .routine-step__check {
    color: var(--success);
}

.routine-step__check svg {
    width: 20px;
    height: 20px;
}

.routine-step__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background-color: color-mix(in srgb, var(--period-color, var(--primary)) 15%, white);
    border-radius: var(--radius-md);
}

.routine-step__icon svg {
    width: 14px;
    height: 14px;
    color: var(--period-color, var(--primary));
}

.routine-step--completed .routine-step__icon {
    background-color: color-mix(in srgb, var(--success) 15%, white);
}

.routine-step--completed .routine-step__icon svg {
    color: var(--success);
}

.routine-step__title {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

/* Period Buttons */
.routine-widget__periods {
    display: flex;
    gap: var(--space-2);
}

.routine-period-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    font-size: var(--text-xs);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.routine-period-btn svg {
    width: 14px;
    height: 14px;
}

.routine-period-btn:hover {
    border-color: var(--btn-color, var(--primary));
    color: var(--btn-color, var(--primary));
}

.routine-period-btn--active {
    background-color: color-mix(in srgb, var(--btn-color, var(--primary)) 10%, white);
    border-color: var(--btn-color, var(--primary));
    color: var(--btn-color, var(--primary));
}

.routine-period-btn--done {
    background-color: color-mix(in srgb, var(--success) 10%, white);
    border-color: var(--success);
    color: var(--success);
}

/* Footer */
.routine-widget__footer {
    display: flex;
    justify-content: flex-end;
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Routine Manager Modal
   ========================================================================== */

.routine-manager {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.routine-manager__tabs {
    display: flex;
    gap: var(--space-2);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid var(--gray-200);
}

.routine-manager__tab {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.routine-manager__tab svg {
    width: 16px;
    height: 16px;
}

.routine-manager__tab:hover {
    border-color: var(--tab-color, var(--primary));
    color: var(--tab-color, var(--primary));
}

.routine-manager__tab--active {
    background-color: color-mix(in srgb, var(--tab-color, var(--primary)) 10%, white);
    border-color: var(--tab-color, var(--primary));
    color: var(--tab-color, var(--primary));
}

.routine-manager__content {
    min-height: 200px;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.routine-manager__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: var(--space-8);
    color: var(--gray-400);
}

.routine-manager__empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
}

.routine-manager__empty-hint {
    font-size: var(--text-sm);
    color: var(--gray-400);
    margin-top: var(--space-1);
}

.routine-manager__add {
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-200);
}

/* Add Step Form */
.routine-add-form {
    display: flex;
    gap: var(--space-2);
}

.routine-add-form input {
    flex: 1;
}

/* Manage Step Item */
.routine-manage-step {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
}

.routine-manage-step__drag {
    color: var(--gray-400);
    cursor: grab;
}

.routine-manage-step__drag svg {
    width: 16px;
    height: 16px;
}

.routine-manage-step__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background-color: var(--white);
    border-radius: var(--radius-md);
}

.routine-manage-step__icon svg {
    width: 16px;
    height: 16px;
}

.routine-manage-step__title {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.routine-manage-step__delete {
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

.routine-manage-step:hover .routine-manage-step__delete {
    opacity: 1;
}

/* ==========================================================================
   Routine Widget - Frequency-Based
   ========================================================================== */

/* Alert Banner */
.routine-widget__alert {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
}

.routine-widget__alert svg {
    width: 16px;
    height: 16px;
}

.routine-widget__alert--overdue {
    background-color: #FEE2E2;
    color: #991B1B;
}

.routine-widget__alert--upcoming {
    background-color: #FEF3C7;
    color: #92400E;
}

/* Routine List */
.routine-widget__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* Routine Item */
.routine-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.routine-item:hover {
    background-color: var(--gray-100);
    border-color: var(--gray-300);
}

.routine-item--overdue {
    background-color: #FEF2F2;
    border-color: #FCA5A5;
}

.routine-item--due-soon,
.routine-item--new {
    background-color: #FFFBEB;
    border-color: #FCD34D;
}

.routine-item--done {
    opacity: 0.7;
}

.routine-item__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background-color: color-mix(in srgb, var(--routine-color, var(--primary)) 15%, white);
    border-radius: var(--radius-md);
}

.routine-item__icon svg {
    width: 18px;
    height: 18px;
    color: var(--routine-color, var(--primary));
}

.routine-item__info {
    flex: 1;
    min-width: 0;
}

.routine-item__title {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.routine-item__status {
    display: block;
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.routine-item--overdue .routine-item__status {
    color: #DC2626;
    font-weight: var(--font-medium);
}

.routine-item--due-soon .routine-item__status,
.routine-item--new .routine-item__status {
    color: #D97706;
}

.routine-item__check {
    flex-shrink: 0;
}

/* "+X more" button */
.routine-widget__more-btn {
    width: 100%;
    background: none;
    border: none;
    padding: var(--space-2);
    font-size: var(--text-sm);
    color: var(--primary);
    cursor: pointer;
    font-weight: var(--font-medium);
    transition: color var(--transition-fast);
    text-align: center;
}

.routine-widget__more-btn:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

/* Footer */
.routine-widget__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
}

.routine-widget__stats {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.routine-widget__stats svg {
    width: 14px;
    height: 14px;
    color: var(--success);
}

.routine-widget__actions {
    display: flex;
    gap: var(--space-1);
}

/* ==========================================================================
   Routines Full Page
   ========================================================================== */

.routines-page {
    max-width: 1000px;
    margin: 0 auto;
}

/* Hero Section */
.routines-page__hero {
    position: relative;
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 35%, #A78BFA 65%, #C4B5FD 100%);
    padding: var(--space-8) var(--space-6);
    border-radius: 0 0 var(--radius-2xl) var(--radius-2xl);
    margin-bottom: var(--space-6);
    overflow: hidden;
}

.routines-page__hero-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.routines-hero-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.2;
    background: white;
}

.routines-hero-shape--1 {
    width: 150px;
    height: 150px;
    top: -50px;
    right: -30px;
}

.routines-hero-shape--2 {
    width: 80px;
    height: 80px;
    bottom: 20px;
    left: 10%;
}

.routines-hero-shape--3 {
    width: 60px;
    height: 60px;
    top: 30%;
    left: 5%;
}

.routines-hero-shape--4 {
    width: 100px;
    height: 100px;
    bottom: -30px;
    right: 20%;
}

.routines-page__hero-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.routines-page__back {
    position: absolute;
    top: 0;
    left: 0;
    color: white;
    opacity: 0.9;
}

.routines-page__back:hover {
    opacity: 1;
    background: rgba(255, 255, 255, 0.1);
}

.routines-page__hero-text {
    margin-bottom: var(--space-4);
}

.routines-page__hero-title {
    font-size: var(--text-3xl);
    font-weight: 700;
    color: white;
    margin: 0 0 var(--space-2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
}

.routines-page__hero-title svg {
    width: 36px;
    height: 36px;
}

.routines-page__hero-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: var(--text-base);
    margin: 0;
}

.routines-page__hero-stats {
    display: flex;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
}

.routines-hero-stat {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    text-align: center;
}

.routines-hero-stat__value {
    display: block;
    font-size: var(--text-2xl);
    font-weight: 700;
    color: white;
}

.routines-hero-stat__label {
    font-size: var(--text-xs);
    color: rgba(255, 255, 255, 0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.routines-page__hero-actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
    justify-content: center;
}

.routines-page__hero-actions .btn--primary {
    background: white;
    color: #6366F1;
}

.routines-page__hero-actions .btn--primary:hover {
    background: rgba(255, 255, 255, 0.9);
}

/* Content area padding */
.routines-page__content {
    padding: 0 var(--space-6);
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.routines-page__batch-action {
    display: flex;
    justify-content: center;
    padding: var(--space-2);
    background: var(--color-amber-50);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.routines-page__batch-action .btn {
    background: var(--color-amber-500);
    color: white;
}

.routines-page__batch-action .btn:hover {
    background: var(--color-amber-600);
}

.routines-page__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--space-12);
    color: var(--gray-500);
}

.routines-page__empty svg {
    width: 64px;
    height: 64px;
    color: var(--gray-300);
    margin-bottom: var(--space-4);
}

.routines-page__empty h3 {
    margin: 0 0 var(--space-2);
    color: var(--gray-700);
}

.routines-page__empty p {
    margin: 0 0 var(--space-4);
}

/* Routine Sections */
.routines-section {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    box-shadow: var(--shadow-sm);
}

.routines-section__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin: 0 0 var(--space-4);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
}

.routines-section__title svg {
    width: 18px;
    height: 18px;
}

.routines-section--overdue .routines-section__title {
    color: #DC2626;
}

.routines-section--due-soon .routines-section__title {
    color: #D97706;
}

.routines-section--never-done .routines-section__title {
    color: #6366F1;
}

.routines-section--upcoming .routines-section__title {
    color: var(--primary);
}

.routines-section--done .routines-section__title {
    color: var(--success);
}

.routines-section--snoozed .routines-section__title {
    color: var(--text-tertiary);
}

.routines-section__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

/* Routine Card */
.routine-card {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
}

.routine-card:hover {
    box-shadow: var(--shadow-sm);
}

.routine-card--overdue {
    background-color: #FEF2F2;
    border-color: #FCA5A5;
}

.routine-card--due-soon,
.routine-card--new {
    background-color: #FFFBEB;
    border-color: #FCD34D;
}

.routine-card--done {
    opacity: 0.7;
    background-color: #F0FDF4;
    border-color: #86EFAC;
}

.routine-card--snoozed {
    opacity: 0.6;
    background-color: var(--background-secondary);
    border-color: var(--border-color);
}

.routine-card--snoozed .routine-card__icon {
    background-color: var(--background-tertiary);
}

.routine-card--snoozed .routine-card__icon svg {
    color: var(--text-tertiary);
}

.routine-card__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background-color: color-mix(in srgb, var(--routine-color, var(--primary)) 15%, white);
    border-radius: var(--radius-lg);
    flex-shrink: 0;
}

.routine-card__icon svg {
    width: 24px;
    height: 24px;
    color: var(--routine-color, var(--primary));
}

.routine-card__content {
    flex: 1;
    min-width: 0;
}

.routine-card__title {
    margin: 0 0 var(--space-1);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
}

.routine-card__meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.routine-card__frequency {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.routine-card__frequency svg {
    width: 14px;
    height: 14px;
}

.routine-card__status {
    color: var(--gray-600);
}

.routine-card--overdue .routine-card__status {
    color: #DC2626;
    font-weight: var(--font-medium);
}

.routine-card--due-soon .routine-card__status,
.routine-card--new .routine-card__status {
    color: #D97706;
}

.routine-card--snoozed .routine-card__status {
    color: var(--text-tertiary);
    font-style: italic;
}

.routine-card--done .routine-card__status {
    color: var(--color-green-600);
}

.routine-card__actions {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-shrink: 0;
}

.routine-card__actions-primary,
.routine-card__actions-secondary {
    display: flex;
    gap: var(--space-2);
}

/* Add a subtle separator between primary and secondary actions */
.routine-card__actions-secondary {
    padding-left: var(--space-3);
    border-left: 1px solid var(--gray-200);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.routine-card:hover .routine-card__actions-secondary {
    opacity: 1;
}

/* Always show the primary action (mark done) button */
.routine-card__actions-primary .btn--primary,
.routine-card__actions-primary .btn--success {
    opacity: 1;
}

/* Hide snooze/skip buttons until hover */
.routine-card__actions-primary .btn--ghost {
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.routine-card:hover .routine-card__actions-primary .btn--ghost {
    opacity: 1;
}

/* On mobile, always show actions since there's no hover */
@media (max-width: 768px) {
    .routine-card__actions-primary .btn--ghost,
    .routine-card__actions-secondary {
        opacity: 1;
    }
}

.routine-card__delete {
    color: var(--gray-400);
}

.routine-card__delete:hover {
    color: var(--danger);
}

/* Routine Form */
.routine-form__frequencies {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.routine-freq-option {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.routine-freq-option:hover {
    border-color: var(--primary);
}

.routine-freq-option input {
    display: none;
}

.routine-freq-option svg {
    width: 16px;
    height: 16px;
    color: var(--gray-400);
}

.routine-freq-option span {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.routine-freq-option--selected {
    background-color: var(--primary-light);
    border-color: var(--primary);
}

.routine-freq-option--selected svg,
.routine-freq-option--selected span {
    color: var(--primary);
}

.routine-form__icons,
.routine-form__colors {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

@media (max-width: 768px) {
    .routines-page__hero {
        padding: var(--space-6) var(--space-4);
        border-radius: 0 0 var(--radius-xl) var(--radius-xl);
    }

    .routines-page__hero-title {
        font-size: var(--text-2xl);
    }

    .routines-page__hero-stats {
        gap: var(--space-3);
    }

    .routines-hero-stat {
        padding: var(--space-2) var(--space-3);
    }

    .routines-page__content {
        padding: 0 var(--space-4);
    }

    .routine-card {
        flex-direction: column;
        align-items: flex-start;
    }

    .routine-card__actions {
        width: 100%;
        justify-content: flex-end;
    }
}

@media (max-width: 480px) {
    .routines-page__hero {
        padding: var(--space-5) var(--space-3);
    }

    .routines-page__hero-title {
        font-size: var(--text-xl);
        flex-direction: column;
        gap: var(--space-2);
    }

    .routines-page__hero-title svg {
        width: 28px;
        height: 28px;
    }

    .routines-page__hero-subtitle {
        font-size: var(--text-sm);
    }

    .routines-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
    }

    .routines-hero-shape--1,
    .routines-hero-shape--4 {
        display: none;
    }

    .routines-page__content {
        padding: 0 var(--space-3);
    }
}

/* Routine Widget - Stats Bar */
.routine-widget__stats-bar {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    background: var(--background-secondary);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-3);
}

.routine-stat {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.routine-stat svg {
    width: 14px;
    height: 14px;
}

.routine-stat--overdue {
    color: var(--danger-text);
}

.routine-stat--overdue svg {
    color: var(--color-red-500);
}

.routine-stat--due-soon {
    color: var(--warning-text);
}

.routine-stat--due-soon svg {
    color: var(--color-amber-500);
}

.routine-stat--done {
    color: var(--success-text);
}

.routine-stat--done svg {
    color: var(--color-green-500);
}

/* Routine Widget - Enhanced Empty State */
.routine-widget__empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--space-6);
    gap: var(--space-4);
}

.routine-widget__empty-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: var(--background-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
}

.routine-widget__empty-icon svg {
    width: 32px;
    height: 32px;
    color: var(--text-tertiary);
}

.routine-widget__empty-text {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.routine-widget__suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    justify-content: center;
}

.routine-suggestion-chip {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background: var(--background-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.routine-suggestion-chip:hover {
    background: var(--color-indigo-100);
    border-color: var(--color-indigo-300);
    color: var(--color-indigo-700);
}

.routine-suggestion-chip svg {
    width: 12px;
    height: 12px;
}

/* Routine Widget - Item Enhancements */
.routine-item__streak {
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: var(--font-size-xs);
    color: var(--color-amber-500);
    margin-left: auto;
}

.routine-item__streak svg {
    width: 12px;
    height: 12px;
}

.routine-item--snoozed {
    opacity: 0.6;
    background: var(--background-secondary);
}

.routine-item--snoozed .routine-item__status {
    color: var(--text-tertiary);
    font-style: italic;
}

.routine-item--skipped {
    opacity: 0.5;
    text-decoration: line-through;
}

/* Routine Widget - Snooze Menu */
.routine-snooze-menu {
    min-width: 140px;
    background: var(--background-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    animation: slideDown 0.2s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.routine-snooze-menu button {
    display: block;
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background: none;
    border: none;
    text-align: left;
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.15s ease;
}

.routine-snooze-menu button:hover {
    background: var(--background-secondary);
}

.routine-snooze-menu button:not(:last-child) {
    border-bottom: 1px solid var(--border-color);
}

.routine-snooze-menu__option {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.15s ease;
}

.routine-snooze-menu__option:hover {
    background: var(--background-secondary);
}

.routine-snooze-menu__option svg {
    width: 16px;
    height: 16px;
    color: var(--text-tertiary);
}

.routine-snooze-menu__option--skip {
    border-top: 1px solid var(--border-color);
    color: var(--text-tertiary);
}

/* Routine Widget - Celebration Animation */
.routine-celebration {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    z-index: 9999;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.routine-celebration__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-6);
    background: var(--background-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    animation: popIn 0.3s ease;
}

@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    70% {
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.routine-celebration__icon {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: var(--routine-color, var(--color-indigo-500));
    display: flex;
    align-items: center;
    justify-content: center;
    animation: bounce 0.5s ease 0.2s;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.routine-celebration__icon svg {
    width: 40px;
    height: 40px;
    color: white;
}

.routine-celebration__text {
    font-size: var(--font-size-xl);
    font-weight: 600;
    color: var(--text-primary);
}

.routine-celebration__streak {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--font-size-sm);
    color: var(--color-amber-500);
    font-weight: 500;
}

/* ==========================================================================
   Routine Widget - Dashboard Style
   ========================================================================== */

.routine-widget--dashboard {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

/* Stats Row */
.routine-widget--dashboard .routine-widget__stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-3);
}

.routine-widget__stat {
    text-align: center;
    padding: var(--space-3) var(--space-2);
    border-radius: var(--radius-lg);
    background: var(--gray-50);
}

.routine-widget__stat--danger {
    background: #FEF2F2;
}

.routine-widget__stat--warning {
    background: #FFFBEB;
}

.routine-widget__stat--success {
    background: #ECFDF5;
}

.routine-widget__stat-value {
    display: block;
    font-size: var(--text-2xl);
    font-weight: 700;
    line-height: 1;
    margin-bottom: var(--space-1);
}

.routine-widget__stat--danger .routine-widget__stat-value {
    color: #DC2626;
}

.routine-widget__stat--warning .routine-widget__stat-value {
    color: #D97706;
}

.routine-widget__stat--success .routine-widget__stat-value {
    color: #059669;
}

.routine-widget__stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Focus Card - Most Urgent */
.routine-widget__focus {
    background: linear-gradient(135deg, #6366F1, #8B5CF6);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    color: white;
}

.routine-widget__focus-label {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    opacity: 0.85;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-2);
}

.routine-widget__focus-label svg {
    width: 14px;
    height: 14px;
}

.routine-widget__focus-content {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.routine-widget__focus-icon {
    width: 44px;
    height: 44px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.routine-widget__focus-icon svg {
    width: 22px;
    height: 22px;
    color: white;
}

.routine-widget__focus-text {
    flex: 1;
    min-width: 0;
}

.routine-widget__focus-title {
    font-size: var(--text-base);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.routine-widget__focus-meta {
    font-size: var(--text-sm);
    opacity: 0.85;
    margin-top: 2px;
}

.routine-widget__focus-action {
    background: white;
    color: #6366F1;
    border: none;
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: var(--text-sm);
    cursor: pointer;
    flex-shrink: 0;
    transition: all var(--transition-fast);
}

.routine-widget__focus-action:hover {
    background: rgba(255, 255, 255, 0.9);
    transform: scale(1.02);
}

/* All Caught Up State */
.routine-widget__all-done {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-6);
    background: linear-gradient(135deg, #ECFDF5, #D1FAE5);
    border-radius: var(--radius-lg);
    color: #059669;
    text-align: center;
}

.routine-widget__all-done svg {
    width: 40px;
    height: 40px;
    margin-bottom: var(--space-2);
}

.routine-widget__all-done span {
    font-size: var(--text-base);
    font-weight: 600;
}

/* Up Next Section */
.routine-widget__upnext {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.routine-widget__upnext-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.routine-widget__upnext-header h4 {
    font-size: var(--text-sm);
    color: var(--gray-500);
    font-weight: 500;
    margin: 0;
}

.routine-widget__upnext-viewall {
    font-size: var(--text-xs);
    color: var(--primary);
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    font-weight: 500;
}

.routine-widget__upnext-viewall:hover {
    text-decoration: underline;
}

.routine-widget__upnext-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.routine-widget__upnext-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.routine-widget__upnext-item:hover {
    background: var(--gray-100);
}

.routine-widget__upnext-icon {
    width: 32px;
    height: 32px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.routine-widget__upnext-icon svg {
    width: 16px;
    height: 16px;
    color: white;
}

.routine-widget__upnext-info {
    flex: 1;
    min-width: 0;
}

.routine-widget__upnext-title {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--gray-800);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.routine-widget__upnext-meta {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.routine-widget__upnext-check {
    width: 24px;
    height: 24px;
    border: 2px solid var(--gray-300);
    border-radius: 50%;
    background: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all var(--transition-fast);
}

.routine-widget__upnext-check svg {
    width: 14px;
    height: 14px;
    color: var(--gray-300);
    transition: all var(--transition-fast);
}

.routine-widget__upnext-check:hover {
    border-color: #10B981;
    background: #ECFDF5;
}

.routine-widget__upnext-check:hover svg {
    color: #10B981;
}

/* Dashboard Footer */
.routine-widget--dashboard .routine-widget__footer {
    padding-top: var(--space-3);
    border-top: 1px solid var(--gray-100);
    margin-top: 0;
}

/* Mobile responsiveness */
@media (max-width: 480px) {
    .routine-widget--dashboard .routine-widget__stats {
        gap: var(--space-2);
    }

    .routine-widget__stat {
        padding: var(--space-2);
    }

    .routine-widget__stat-value {
        font-size: var(--text-xl);
    }

    .routine-widget__focus-content {
        flex-wrap: wrap;
    }

    .routine-widget__focus-text {
        flex: 1 1 100%;
        order: 2;
        margin-top: var(--space-2);
    }

    .routine-widget__focus-action {
        order: 3;
        width: 100%;
        text-align: center;
        margin-top: var(--space-2);
    }
}

/* Dark mode support */
[data-theme="dark"] .routine-widget__stat {
    background: var(--gray-800);
}

[data-theme="dark"] .routine-widget__stat--danger {
    background: rgba(239, 68, 68, 0.15);
}

[data-theme="dark"] .routine-widget__stat--warning {
    background: rgba(245, 158, 11, 0.15);
}

[data-theme="dark"] .routine-widget__stat--success {
    background: rgba(16, 185, 129, 0.15);
}

[data-theme="dark"] .routine-widget__all-done {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
}

[data-theme="dark"] .routine-widget__upnext-item {
    background: var(--gray-800);
}

[data-theme="dark"] .routine-widget__upnext-item:hover {
    background: var(--gray-700);
}

[data-theme="dark"] .routine-widget__upnext-check {
    background: var(--gray-800);
    border-color: var(--gray-600);
}

[data-theme="dark"] .routine-widget__upnext-check svg {
    color: var(--gray-500);
}

/* ==========================================================================
   Routines Due Today - Home Page Section
   ========================================================================== */

.routines-due-today {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.routine-due-card {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
}

.routine-due-card:hover {
    box-shadow: var(--shadow-sm);
    border-color: var(--gray-300);
}

.routine-due-card__icon {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.routine-due-card__icon svg {
    width: 20px;
    height: 20px;
    color: white;
}

.routine-due-card__content {
    flex: 1;
    min-width: 0;
}

.routine-due-card__title {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    color: var(--gray-900);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.routine-due-card__meta {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: 2px;
}

.routine-due-card__member {
    color: var(--gray-600);
}

.routine-due-card__status {
    font-weight: var(--font-medium);
}

.routine-due-card__status--overdue {
    color: #DC2626;
}

.routine-due-card__status--due-soon {
    color: #D97706;
}

.routine-due-card__status--new {
    color: var(--primary);
}

.routine-due-card__done {
    flex-shrink: 0;
}

/* Dark mode */
[data-theme="dark"] .routine-due-card {
    background: var(--gray-800);
    border-color: var(--gray-700);
}

[data-theme="dark"] .routine-due-card:hover {
    border-color: var(--gray-600);
}

[data-theme="dark"] .routine-due-card__title {
    color: var(--gray-100);
}

[data-theme="dark"] .routine-due-card__member {
    color: var(--gray-400);
}

/* Mobile responsive */
@media (max-width: 480px) {
    .routine-due-card {
        padding: var(--space-3);
    }

    .routine-due-card__icon {
        width: 36px;
        height: 36px;
    }

    .routine-due-card__icon svg {
        width: 18px;
        height: 18px;
    }

    .routine-due-card__title {
        font-size: var(--text-sm);
    }

    .routine-due-card__meta {
        flex-direction: column;
        align-items: flex-start;
        gap: 0;
    }
}

/* Routine Card - Enhancements */
.routine-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.routine-card__category {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    background: var(--background-tertiary);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.routine-card__category svg {
    width: 12px;
    height: 12px;
}

.routine-card__time {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--font-size-xs);
    color: var(--text-tertiary);
}

.routine-card__time svg {
    width: 12px;
    height: 12px;
}

.routine-card__streaks {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-top: var(--space-2);
    padding-top: var(--space-2);
    border-top: 1px solid var(--border-color);
}

.routine-card__streak,
.routine-card__best-streak {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: var(--font-size-xs);
}

.routine-card__streak svg,
.routine-card__best-streak svg {
    width: 14px;
    height: 14px;
}

.routine-card__streak {
    color: var(--color-amber-500);
}

.routine-card__best-streak {
    color: var(--color-indigo-500);
}

.routine-card__notes {
    margin-top: var(--space-2);
    padding: var(--space-2);
    background: var(--background-secondary);
    border-radius: var(--radius-md);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    font-style: italic;
}

/* Routines Page - Heatmap */
.routines-page__heatmap {
    margin-bottom: var(--space-6);
    padding: var(--space-4);
    background: var(--background-primary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
}

/* Routines Weekly Activity */
.routines-weekly {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    margin-bottom: var(--space-4);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
}

.routines-weekly__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.routines-weekly__title {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0;
}

.routines-weekly__total {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.routines-weekly__days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: var(--space-2);
}

.routines-weekly__day {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-3) var(--space-2);
    border-radius: var(--radius-lg);
    background: var(--gray-50);
    transition: all var(--transition-fast);
}

.routines-weekly__day--active {
    background: var(--primary-light);
}

.routines-weekly__day--today {
    border: 2px solid var(--primary);
}

.routines-weekly__day--today.routines-weekly__day--active {
    background: var(--primary);
}

.routines-weekly__day-name {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.routines-weekly__day--today .routines-weekly__day-name {
    color: var(--primary);
}

.routines-weekly__day--today.routines-weekly__day--active .routines-weekly__day-name {
    color: white;
}

.routines-weekly__day-num {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    line-height: 1.2;
}

.routines-weekly__day--today .routines-weekly__day-num {
    color: var(--primary);
}

.routines-weekly__day--today.routines-weekly__day--active .routines-weekly__day-num {
    color: white;
}

.routines-weekly__day-count {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

.routines-weekly__day--active .routines-weekly__day-count {
    color: var(--primary);
    font-weight: var(--font-semibold);
}

.routines-weekly__day--today.routines-weekly__day--active .routines-weekly__day-count {
    color: rgba(255, 255, 255, 0.9);
}

/* Dark mode */
[data-theme="dark"] .routines-weekly {
    background: var(--gray-800);
    border-color: var(--gray-700);
}

[data-theme="dark"] .routines-weekly__title {
    color: var(--gray-100);
}

[data-theme="dark"] .routines-weekly__day {
    background: var(--gray-700);
}

[data-theme="dark"] .routines-weekly__day--active {
    background: rgba(99, 102, 241, 0.2);
}

[data-theme="dark"] .routines-weekly__day-num {
    color: var(--gray-100);
}

/* Mobile responsive */
@media (max-width: 480px) {
    .routines-weekly__days {
        gap: var(--space-1);
    }

    .routines-weekly__day {
        padding: var(--space-2) var(--space-1);
    }

    .routines-weekly__day-name {
        font-size: 10px;
    }

    .routines-weekly__day-num {
        font-size: var(--text-base);
    }

    .routines-weekly__day-count {
        font-size: 10px;
    }
}

/* Routine Form - Additional Fields */
.routine-form__section {
    margin-bottom: var(--space-4);
}

.routine-form__section-title {
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: var(--space-2);
}

.routine-form__time-options {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.routine-time-option {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    background: var(--background-secondary);
    border: 2px solid transparent;
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.routine-time-option:hover {
    border-color: var(--border-color);
}

.routine-time-option input {
    display: none;
}

.routine-time-option svg {
    width: 16px;
    height: 16px;
}

.routine-time-option--selected {
    background: var(--color-indigo-100);
    border-color: var(--color-indigo-500);
    color: var(--color-indigo-700);
}

.routine-form__categories {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.routine-category-option {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background: var(--background-secondary);
    border: 2px solid transparent;
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    cursor: pointer;
    transition: all 0.2s ease;
}

.routine-category-option:hover {
    opacity: 0.8;
}

.routine-category-option input {
    display: none;
}

.routine-category-option svg {
    width: 14px;
    height: 14px;
}

.routine-category-option--selected {
    border-color: currentColor;
}

.routine-form__textarea {
    width: 100%;
    min-height: 80px;
    padding: var(--space-2);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    background: var(--background-primary);
    resize: vertical;
    font-family: inherit;
}

.routine-form__textarea:focus {
    outline: none;
    border-color: var(--color-indigo-500);
    box-shadow: 0 0 0 3px var(--color-indigo-100);
}

.routine-form__weekdays {
    display: flex;
    gap: var(--space-1);
    flex-wrap: wrap;
}

.routine-weekday {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: var(--background-secondary);
    border: 2px solid transparent;
    font-size: var(--font-size-xs);
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.routine-weekday:hover {
    border-color: var(--border-color);
}

.routine-weekday input {
    display: none;
}

.routine-weekday--selected {
    background: var(--color-indigo-500);
    color: white;
    border-color: var(--color-indigo-500);
}

.routine-form__interval {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.routine-form__interval-input {
    width: 60px;
    padding: var(--space-2);
    text-align: center;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
}

.routine-form__interval-input:focus {
    outline: none;
    border-color: var(--color-indigo-500);
}

/* Edit Routine Form - consistent with Edit Habit Form */
.edit-routine-form__stats {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    margin-top: var(--space-4);
}

.edit-routine-form__stat {
    text-align: center;
    flex: 1;
}

.edit-routine-form__stat-value {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.edit-routine-form__stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: 2px;
}

/* Color Picker */
.color-picker {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    padding: var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
}

.color-picker__btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 3px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
}

.color-picker__btn:hover {
    transform: scale(1.15);
}

.color-picker__btn--selected {
    border-color: var(--gray-900);
    box-shadow: 0 0 0 2px white, 0 0 0 4px var(--gray-400);
}

/* Routine Widget - Category Groups */
.routine-category-group {
    margin-bottom: var(--space-4);
}

.routine-category-group__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) 0;
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-secondary);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: var(--space-2);
}

.routine-category-group__header svg {
    width: 16px;
    height: 16px;
}

.routine-category-group__count {
    margin-left: auto;
    font-size: var(--font-size-xs);
    color: var(--text-tertiary);
    font-weight: normal;
}

/* Batch Actions */
.routine-batch-actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--color-amber-100);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-3);
}

.routine-batch-actions__text {
    flex: 1;
    font-size: var(--font-size-sm);
    color: var(--color-amber-800);
}

.routine-batch-actions__btn {
    padding: var(--space-1) var(--space-2);
    background: var(--color-amber-500);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--font-size-xs);
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s ease;
}

.routine-batch-actions__btn:hover {
    background: var(--color-amber-600);
}

/* Routine Page - Time of Day Groups */
.routine-time-group {
    margin-bottom: var(--space-6);
}

.routine-time-group__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding-bottom: var(--space-2);
    border-bottom: 2px solid var(--border-color);
    margin-bottom: var(--space-3);
}

.routine-time-group__icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--background-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
}

.routine-time-group__icon svg {
    width: 18px;
    height: 18px;
    color: var(--color-amber-500);
}

.routine-time-group__title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.routine-time-group__count {
    margin-left: auto;
    font-size: var(--font-size-sm);
    color: var(--text-tertiary);
}

/* ==========================================================================
   Vision Board Styles
   ========================================================================== */

/* Vision Board Widget */
.vision-board-widget {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.vision-board-widget--empty {
    padding: var(--space-4);
}

.vision-board-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    padding: var(--space-6);
}

.vision-board-empty__icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--primary-light), var(--primary));
    border-radius: var(--radius-full);
}

.vision-board-empty__icon svg {
    width: 28px;
    height: 28px;
    color: white;
}

.vision-board-empty__title {
    margin: 0;
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.vision-board-empty__text {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--gray-500);
    max-width: 250px;
}

/* Widget Summary Stats */
.vision-board-widget__summary {
    display: flex;
    gap: var(--space-4);
    padding: 0 var(--space-2);
}

.vision-board-stat {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.vision-board-stat__value {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.vision-board-stat__label {
    font-size: var(--text-xs);
    color: var(--gray-500);
}

/* Widget Goals List */
.vision-board-widget__goals {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.vision-board-goal-mini {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.vision-board-goal-mini:hover {
    background-color: var(--gray-100);
}

.vision-board-goal-mini__image {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-lg);
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
}

.vision-board-goal-mini__icon {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.vision-board-goal-mini__icon svg {
    width: 20px;
    height: 20px;
}

.vision-board-goal-mini__info {
    flex: 1;
    min-width: 0;
}

.vision-board-goal-mini__title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-800);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.vision-board-goal-mini__progress {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-top: var(--space-1);
}

.vision-board-goal-mini__bar {
    flex: 1;
    height: 4px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.vision-board-goal-mini__fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width var(--transition-normal);
}

.vision-board-goal-mini__percent {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-600);
    min-width: 32px;
    text-align: right;
}

.vision-board-goal-mini__update {
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.vision-board-goal-mini:hover .vision-board-goal-mini__update {
    opacity: 1;
}

/* Widget Footer */
.vision-board-widget__footer {
    display: flex;
    justify-content: space-between;
    gap: var(--space-2);
    padding-top: var(--space-2);
    border-top: 1px solid var(--gray-100);
}

/* ==========================================================================
   Vision Board Full Page
   ========================================================================== */

.vision-board-page {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--space-4);
}

.vision-board-page__header {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.vision-board-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin: 0;
    flex: 1;
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.vision-board-page__title svg {
    width: 28px;
    height: 28px;
    color: var(--primary);
}

/* Page Stats */
.vision-board-page__stats {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
    flex-wrap: wrap;
}

.vision-board-page-stat {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    flex: 1;
    min-width: 150px;
}

.vision-board-page-stat__icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
}

.vision-board-page-stat__icon svg {
    width: 24px;
    height: 24px;
}

.vision-board-page-stat__icon--active {
    background-color: #DBEAFE;
    color: #2563EB;
}

.vision-board-page-stat__icon--completed {
    background-color: #D1FAE5;
    color: #059669;
}

.vision-board-page-stat__icon--total {
    background-color: #EDE9FE;
    color: #7C3AED;
}

.vision-board-page-stat__info {
    display: flex;
    flex-direction: column;
}

.vision-board-page-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.vision-board-page-stat__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

/* Sections */
.vision-board-section {
    margin-bottom: var(--space-8);
}

.vision-board-section__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0 0 var(--space-4) 0;
}

.vision-board-section__title svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.vision-board-section__title--completed svg {
    color: #10B981;
}

/* Goals Grid */
.vision-board-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-4);
}

.vision-board-grid--completed {
    opacity: 0.85;
}

/* Goal Card */
.vision-board-card {
    background-color: var(--white);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-200);
    overflow: hidden;
    transition: all var(--transition-fast);
    position: relative;
}

.vision-board-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.vision-board-card--completed {
    border-color: #10B981;
}

.vision-board-card--has-image .vision-board-card__image {
    height: 140px;
    background-size: cover;
    background-position: center;
    position: relative;
}

.vision-board-card__overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, transparent 30%, rgba(0,0,0,0.6) 100%);
}

.vision-board-card__content {
    padding: var(--space-4);
}

.vision-board-card__content--over-image {
    position: relative;
    margin-top: -60px;
    z-index: 1;
}

.vision-board-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
    flex-wrap: wrap;
}

.vision-board-card__icon {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
}

.vision-board-card__icon svg {
    width: 18px;
    height: 18px;
}

.vision-board-card__category {
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

.vision-board-card__badge {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
    margin-left: auto;
}

.vision-board-card__badge--completed {
    background-color: #D1FAE5;
    color: #059669;
}

.vision-board-card__badge svg {
    width: 12px;
    height: 12px;
}

.vision-board-card__title {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
}

.vision-board-card__title--light {
    color: white;
    text-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.vision-board-card__notes {
    margin: 0 0 var(--space-3) 0;
    font-size: var(--text-sm);
    color: var(--gray-600);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.vision-board-card__notes--light {
    color: rgba(255,255,255,0.9);
}

/* Progress */
.vision-board-card__progress {
    margin-bottom: var(--space-3);
}

.vision-board-card__progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-1);
}

.vision-board-card__progress-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.vision-board-card__progress-value {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.vision-board-card__progress-bar {
    height: 8px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.vision-board-card__progress-fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width var(--transition-normal);
}

/* Dates */
.vision-board-card__date,
.vision-board-card__completed-date {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.vision-board-card__date svg,
.vision-board-card__completed-date svg {
    width: 14px;
    height: 14px;
}

.vision-board-card__date--light {
    color: rgba(255,255,255,0.8);
}

.vision-board-card__completed-date {
    color: #059669;
}

/* Card Actions */
.vision-board-card__actions {
    display: flex;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background-color: var(--gray-50);
    border-top: 1px solid var(--gray-100);
}

/* Empty Page State */
.vision-board-empty-page {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
}

.vision-board-empty-page__content {
    text-align: center;
    max-width: 400px;
}

.vision-board-empty-page__icon {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--primary-light), var(--primary));
    border-radius: var(--radius-full);
    margin: 0 auto var(--space-4);
}

.vision-board-empty-page__icon svg {
    width: 40px;
    height: 40px;
    color: white;
}

.vision-board-empty-page h2 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-xl);
    color: var(--gray-800);
}

.vision-board-empty-page p {
    margin: 0 0 var(--space-6) 0;
    color: var(--gray-500);
}

/* ==========================================================================
   Vision Board Form Styles
   ========================================================================== */

.vision-board-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.vision-board-form .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-4);
}

/* Icon Picker */
.vision-board-icon-picker__trigger {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background-color: var(--white);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: border-color var(--transition-fast);
}

.vision-board-icon-picker__trigger:hover {
    border-color: var(--primary);
}

.vision-board-icon-picker__trigger svg {
    width: 20px;
    height: 20px;
}

.vision-board-icon-picker__trigger svg:last-child {
    width: 14px;
    height: 14px;
    margin-left: auto;
    color: var(--gray-400);
}

.vision-board-icon-dropdown {
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
    padding: var(--space-3);
    max-width: 280px;
}

.vision-board-icon-dropdown__grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: var(--space-1);
}

.vision-board-icon-dropdown__item {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: 1px solid transparent;
    border-radius: var(--radius-lg);
    cursor: pointer;
    color: var(--gray-600);
    transition: all var(--transition-fast);
}

.vision-board-icon-dropdown__item:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.vision-board-icon-dropdown__item svg {
    width: 20px;
    height: 20px;
}

/* Image Upload */
.vision-board-image-upload {
    border: 2px dashed var(--gray-300);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: border-color var(--transition-fast);
}

.vision-board-image-upload:hover {
    border-color: var(--primary);
}

.vision-board-image-upload__placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-6);
    cursor: pointer;
    color: var(--gray-400);
}

.vision-board-image-upload__placeholder svg {
    width: 32px;
    height: 32px;
}

.vision-board-image-upload__placeholder span {
    font-size: var(--text-sm);
}

.vision-board-image-upload__preview {
    position: relative;
}

.vision-board-image-upload__preview img {
    width: 100%;
    height: 150px;
    object-fit: cover;
}

.vision-board-image-upload__remove {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0,0,0,0.6);
    color: white;
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: background-color var(--transition-fast);
}

.vision-board-image-upload__remove:hover {
    background-color: var(--danger);
}

.vision-board-image-upload__remove svg {
    width: 16px;
    height: 16px;
}

/* ==========================================================================
   Vision Board Update Modal
   ========================================================================== */

.vision-board-update {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.vision-board-update__goal {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-xl);
}

.vision-board-update__image {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-lg);
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
}

.vision-board-update__icon {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.vision-board-update__icon svg {
    width: 28px;
    height: 28px;
}

.vision-board-update__info {
    flex: 1;
    min-width: 0;
}

.vision-board-update__info h3 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.vision-board-update__current-progress {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.vision-board-update__bar {
    flex: 1;
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.vision-board-update__fill {
    height: 100%;
    border-radius: var(--radius-full);
}

.vision-board-update__current-progress span {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--gray-700);
    min-width: 40px;
    text-align: right;
}

.vision-board-update__no-track {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.vision-board-update__input-row {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.vision-board-update__input-row input {
    flex: 1;
}

.vision-board-update__unit {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.vision-board-update__of {
    font-size: var(--text-sm);
    color: var(--gray-500);
    white-space: nowrap;
}

.vision-board-update__quick-btns {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
}

.vision-board-update__no-progress-text {
    font-size: var(--text-sm);
    color: var(--gray-500);
    text-align: center;
    padding: var(--space-4);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.vision-board-update__bonus {
    display: inline-block;
    margin-left: var(--space-2);
    padding: 2px 8px;
    background: linear-gradient(135deg, #FCD34D 0%, #F59E0B 100%);
    color: #92400E;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    border-radius: var(--radius-full);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

/* ==========================================================================
   Vision Board Steps Styles
   ========================================================================== */

/* Steps in Goal Card */
.vision-board-card__steps {
    margin-bottom: var(--space-3);
}

.vision-board-card__steps-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.vision-board-card__steps-label {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.vision-board-card__steps-label svg {
    width: 14px;
    height: 14px;
}

.vision-board-card__steps-percent {
    font-size: var(--text-sm);
    font-weight: var(--font-bold);
    color: var(--goal-color, var(--primary));
}

.vision-board-card__steps-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    margin-top: var(--space-2);
}

.vision-board-card__step {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.vision-board-card__step svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    color: var(--gray-400);
}

.vision-board-card__step--done {
    text-decoration: line-through;
    color: var(--gray-400);
}

.vision-board-card__step--done svg {
    color: #10B981;
}

.vision-board-card__step--more {
    font-style: italic;
    color: var(--gray-400);
    padding-left: 22px;
}

/* Steps Modal */
.vision-board-steps-modal {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.vision-board-steps-modal__header {
    margin-bottom: var(--space-2);
}

.vision-board-steps-modal__goal {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
}

.vision-board-steps-modal__icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.vision-board-steps-modal__icon svg {
    width: 24px;
    height: 24px;
}

.vision-board-steps-modal__info {
    flex: 1;
    min-width: 0;
}

.vision-board-steps-modal__info h3 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.vision-board-steps-modal__progress {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.vision-board-steps-modal__bar {
    flex: 1;
    height: 6px;
    background-color: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.vision-board-steps-modal__fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width 0.3s ease;
}

.vision-board-steps-modal__progress span {
    font-size: var(--text-sm);
    color: var(--gray-600);
    white-space: nowrap;
}

.vision-board-steps-modal__add {
    display: flex;
    gap: var(--space-2);
}

.vision-board-steps-modal__add input {
    flex: 1;
}

.vision-board-steps-modal__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 300px;
    overflow-y: auto;
}

/* Individual Step Item */
.vision-board-step {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    transition: all 0.2s ease;
}

.vision-board-step:hover {
    background-color: var(--gray-100);
}

.vision-board-step--completed {
    background-color: #F0FDF4;
}

.vision-board-step__checkbox {
    position: relative;
    cursor: pointer;
}

.vision-board-step__checkbox input {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

.vision-board-step__checkmark {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border: 2px solid var(--gray-300);
    border-radius: var(--radius-md);
    background-color: var(--white);
    transition: all 0.2s ease;
}

.vision-board-step__checkbox input:checked + .vision-board-step__checkmark {
    background-color: #10B981;
    border-color: #10B981;
}

.vision-board-step__checkbox input:checked + .vision-board-step__checkmark::after {
    content: '';
    color: white;
    font-size: 14px;
    font-weight: bold;
}

.vision-board-step__title {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.vision-board-step--completed .vision-board-step__title {
    text-decoration: line-through;
    color: var(--gray-400);
}

.vision-board-step__delete {
    padding: var(--space-1);
    background: none;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.vision-board-step__delete:hover {
    color: #EF4444;
    background-color: #FEF2F2;
}

.vision-board-step__delete svg {
    width: 16px;
    height: 16px;
}

.vision-board-step__actions {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.vision-board-step:hover .vision-board-step__actions {
    opacity: 1;
}

.vision-board-step__add-task {
    padding: var(--space-1);
    background: none;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.vision-board-step__add-task:hover {
    color: var(--primary);
    background-color: var(--primary-light, #EFF6FF);
}

.vision-board-step__add-task svg {
    width: 16px;
    height: 16px;
}

/* Steps Input in Add/Edit Form */
.vision-board-steps-input {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.vision-board-steps-input__add {
    display: flex;
    gap: var(--space-2);
}

.vision-board-steps-input__add input {
    flex: 1;
}

.vision-board-steps-input__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.vision-board-steps-input__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-md);
}

.vision-board-steps-input__number {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary);
    color: white;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    border-radius: var(--radius-full);
    flex-shrink: 0;
}

.vision-board-steps-input__text {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.vision-board-steps-input__remove {
    padding: var(--space-1);
    background: none;
    border: none;
    color: var(--gray-400);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}

.vision-board-steps-input__remove:hover {
    color: #EF4444;
    background-color: #FEF2F2;
}

.vision-board-steps-input__remove svg {
    width: 14px;
    height: 14px;
}

/* Responsive */
@media (max-width: 768px) {
    .vision-board-page__header {
        flex-direction: column;
        align-items: stretch;
    }

    .vision-board-page__stats {
        flex-direction: column;
    }

    .vision-board-grid {
        grid-template-columns: 1fr;
    }

    .vision-board-form .form-row {
        grid-template-columns: 1fr;
    }

    .vision-board-icon-dropdown__grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

/* ============================================
   Vision Board - Template Layout (Zone-based)
   ============================================ */

/* Main Template Container */
.vb-template {
    padding: var(--space-4);
    background-color: var(--gray-50);
    min-height: 100%;
}

/* Header with decorative title */
.vb-template__header {
    text-align: center;
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--gray-200);
}

.vb-template__title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    font-family: 'Georgia', 'Times New Roman', serif;
    font-size: 2rem;
    font-weight: 400;
    color: #4A4A4A;
    letter-spacing: 0.1em;
    margin: 0;
}

.vb-template__divider {
    width: 100px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #BEB5A7, transparent);
}

/* Grid layout for zones */
.vb-template__grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
    max-width: 900px;
    margin: 0 auto;
}

.vb-template__row {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: var(--space-6);
    align-items: stretch;
}

.vb-template__row:nth-child(even) {
    grid-template-columns: 1.5fr 1fr;
}

/* Zone blocks */
.vb-zone {
    position: relative;
    padding: var(--space-5);
    border: 2px solid #D4C9B8;
    background-color: white;
    display: flex;
    flex-direction: column;
    min-height: 200px;
    transition: all 0.2s ease;
}

.vb-zone:hover {
    border-color: #B8A994;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Circle shape */
.vb-zone--circle {
    border-radius: 50%;
    aspect-ratio: 1;
    min-height: unset;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: var(--space-4);
}

/* Rectangle shape */
.vb-zone--rectangle {
    border-radius: var(--radius-xl);
}

/* Zone header */
.vb-zone__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-3);
}

.vb-zone--circle .vb-zone__header {
    flex-direction: column;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.vb-zone__title {
    font-family: 'Georgia', 'Times New Roman', serif;
    font-size: var(--text-lg);
    font-weight: 600;
    font-style: italic;
    color: #5A5A5A;
    margin: 0;
    cursor: pointer;
    transition: color 0.2s ease;
}

.vb-zone__title:hover {
    color: var(--primary);
}

.vb-zone--circle .vb-zone__title {
    font-size: var(--text-base);
    font-weight: 600;
    text-align: center;
}

.vb-zone__expand {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    color: var(--gray-500);
    transition: all 0.2s ease;
}

.vb-zone__expand:hover {
    background-color: var(--primary);
    color: white;
}

.vb-zone__expand svg {
    width: 16px;
    height: 16px;
}

/* Goals list within zone */
.vb-zone__goals {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.vb-zone--circle .vb-zone__goals {
    align-items: center;
}

.vb-zone__empty {
    font-size: var(--text-sm);
    color: var(--gray-400);
    font-style: italic;
    margin: 0;
    padding: var(--space-2) 0;
}

.vb-zone__goal {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    padding: var(--space-2) 0;
    cursor: pointer;
    transition: color 0.2s ease;
}

.vb-zone__goal:hover {
    color: var(--primary);
}

.vb-zone__goal-bullet {
    color: var(--primary);
    font-size: 10px;
    flex-shrink: 0;
    margin-top: 6px;
}

.vb-zone__goal-title {
    font-size: var(--text-lg);
    color: var(--gray-700);
    line-height: 1.4;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.vb-zone--circle .vb-zone__goal-title {
    font-size: var(--text-base);
    text-align: left;
}

.vb-zone__more {
    font-size: var(--text-xs);
    color: var(--gray-400);
    font-style: italic;
    padding-left: var(--space-5);
}

/* Zone footer */
.vb-zone__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: auto;
    padding-top: var(--space-3);
}

.vb-zone--circle .vb-zone__footer {
    flex-direction: column;
    gap: var(--space-2);
    padding-top: var(--space-2);
}

.vb-zone__add-btn {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background: none;
    border: 1px dashed var(--gray-300);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    color: var(--gray-500);
    cursor: pointer;
    transition: all 0.2s ease;
}

.vb-zone__add-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background-color: var(--primary-light);
}

.vb-zone__add-btn svg {
    width: 14px;
    height: 14px;
}

.vb-zone__completed {
    font-size: var(--text-xs);
    color: #059669;
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

/* Delete zone button (user-added zones only) */
.vb-zone__delete {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    color: var(--gray-400);
    opacity: 0;
    transition: all 0.2s ease;
}

.vb-zone:hover .vb-zone__delete {
    opacity: 1;
}

.vb-zone__delete:hover {
    background-color: #FEE2E2;
    color: #EF4444;
}

.vb-zone__delete svg {
    width: 14px;
    height: 14px;
}

/* Template footer */
.vb-template__footer {
    display: flex;
    justify-content: center;
    margin-top: var(--space-6);
    padding-top: var(--space-4);
    border-top: 1px dashed var(--gray-200);
}

/* Zone Page (expanded view) */
.vb-zone-page {
    padding: var(--space-6);
    max-width: 1200px;
    margin: 0 auto;
}

.vb-zone-page__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-6);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--gray-200);
}

.vb-zone-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-family: 'Georgia', 'Times New Roman', serif;
    font-size: var(--text-2xl);
    font-weight: 400;
    color: var(--gray-800);
    margin: 0;
}

.vb-zone-page__title svg {
    width: 28px;
    height: 28px;
    color: #F59E0B;
}

.vb-zone-page__stats {
    display: flex;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
}

.vb-zone-page-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--space-4) var(--space-6);
    background-color: var(--gray-50);
    border-radius: var(--radius-xl);
}

.vb-zone-page-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.vb-zone-page-stat__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.vb-zone-page__section {
    margin-bottom: var(--space-6);
}

.vb-zone-page__section-title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-4) 0;
}

.vb-zone-page__section-title svg {
    width: 20px;
    height: 20px;
}

.vb-zone-page__section-title--completed {
    color: #059669;
}

.vb-zone-page__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-12);
    text-align: center;
}

.vb-zone-page__empty-icon {
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--gray-100);
    border-radius: var(--radius-full);
    margin-bottom: var(--space-4);
}

.vb-zone-page__empty-icon svg {
    width: 40px;
    height: 40px;
    color: var(--gray-400);
}

.vb-zone-page__empty h2 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-xl);
    color: var(--gray-700);
}

.vb-zone-page__empty p {
    margin: 0 0 var(--space-4) 0;
    color: var(--gray-500);
}

/* Shape picker in add zone modal */
.vb-shape-picker {
    display: flex;
    gap: var(--space-4);
}

.vb-shape-option {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    cursor: pointer;
}

.vb-shape-option input {
    display: none;
}

.vb-shape-option__preview {
    width: 40px;
    height: 40px;
    border: 2px solid var(--gray-300);
    transition: all 0.2s ease;
}

.vb-shape-option__preview--circle {
    border-radius: 50%;
}

.vb-shape-option__preview--rectangle {
    border-radius: var(--radius-md);
}

.vb-shape-option input:checked + .vb-shape-option__preview {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .vb-template__title {
        font-size: 1.5rem;
    }

    .vb-template__row,
    .vb-template__row:nth-child(even) {
        grid-template-columns: 1fr;
    }

    .vb-zone--circle {
        aspect-ratio: unset;
        min-height: 180px;
    }

    .vb-zone-page__header {
        flex-direction: column;
        gap: var(--space-4);
        align-items: stretch;
    }

    .vb-zone-page__stats {
        flex-direction: column;
    }
}

/* ============================================
   Journal Widget - Classic Paper Journal Design
   ============================================ */

/* Widget View */
.journal-widget {
    padding: var(--space-3);
}

.journal-widget__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
}

.journal-widget__streak {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--gray-500);
}

.journal-widget__streak--active {
    color: var(--orange-500);
}

.journal-widget__streak--active svg {
    color: var(--orange-500);
}

.journal-widget__badge {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--green-600);
    background-color: var(--green-50);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

.journal-widget__badge svg {
    width: 14px;
    height: 14px;
}

/* Notebook Cover in Widget */
.journal-widget__notebook {
    margin-bottom: var(--space-3);
}

.journal-widget__cover {
    background: linear-gradient(135deg, #5B4636 0%, #3D2B1F 100%);
    border-radius: var(--radius-lg);
    padding: var(--space-6) var(--space-4);
    text-align: center;
    color: #F5F1EB;
    box-shadow:
        0 4px 6px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.journal-widget__cover svg {
    width: 40px;
    height: 40px;
    margin-bottom: var(--space-2);
    opacity: 0.9;
}

.journal-widget__cover h3 {
    font-family: 'Kalam', cursive;
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    margin: 0 0 var(--space-2);
}

.journal-widget__cover-prompt {
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    opacity: 0.8;
    font-style: italic;
    margin: 0;
}

.journal-widget__actions {
    margin-top: var(--space-3);
}

/* Journal Page */
.journal-page {
    padding: var(--space-4);
    max-width: 900px;
    margin: 0 auto;
}

.journal-page__header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-6);
}

.journal-page__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    margin: 0;
    flex: 1;
}

.journal-page__title svg {
    color: var(--primary-500);
}

.journal-page__stats {
    display: flex;
    gap: var(--space-4);
}

.journal-stat {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.journal-stat svg {
    width: 16px;
    height: 16px;
}

.journal-page__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

/* Classic Paper Notebook */
.journal-notebook {
    background: #F5F1EB;
    border-radius: var(--radius-xl);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.08),
        0 1px 3px rgba(0, 0, 0, 0.05);
    overflow: hidden;
}

.journal-notebook__paper {
    background:
        repeating-linear-gradient(
            transparent,
            transparent 31px,
            #B8D4E3 31px,
            #B8D4E3 32px
        ),
        linear-gradient(to right, #F8C8C8 0px, #F8C8C8 3px, transparent 3px);
    background-color: #FFFEF5;
    padding: var(--space-5);
    padding-left: calc(var(--space-5) + 20px);
    min-height: 300px;
    position: relative;
}

/* Red margin line */
.journal-notebook__paper::before {
    content: '';
    position: absolute;
    left: 35px;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #F8C8C8;
}

.journal-notebook__date {
    font-family: 'Kalam', cursive;
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: #5B4636;
    margin-bottom: var(--space-4);
    line-height: 32px;
}

.journal-notebook__prompt {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #6B5B4D;
    font-style: italic;
    margin-bottom: var(--space-4);
    line-height: 32px;
}

.journal-notebook__prompt svg {
    width: 20px;
    height: 20px;
    color: #D4A574;
    flex-shrink: 0;
    margin-top: 6px;
}

/* Mood Selection */
.journal-notebook__mood-section {
    margin-bottom: var(--space-4);
}

.journal-notebook__mood-label {
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    color: #6B5B4D;
    margin-bottom: var(--space-2);
    display: block;
    line-height: 32px;
}

.journal-notebook__moods {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.journal-mood {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    background-color: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 70px;
}

.journal-mood:hover {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: var(--mood-color);
}

.journal-mood--selected {
    background-color: var(--mood-color);
    border-color: var(--mood-color);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.journal-mood__emoji {
    font-size: 24px;
}

.journal-mood__label {
    font-family: 'Kalam', cursive;
    font-size: var(--text-xs);
    color: #5B4636;
}

/* Textarea for writing */
.journal-notebook__write {
    margin-bottom: var(--space-4);
}

.journal-notebook__textarea {
    width: 100%;
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #3D2B1F;
    background: transparent;
    border: none;
    resize: none;
    line-height: 32px;
    padding: 0;
    outline: none;
}

.journal-notebook__textarea::placeholder {
    color: #B0A090;
    font-style: italic;
}

.journal-notebook__save {
    display: flex;
    justify-content: flex-end;
}

/* Today's Entry Display */
.journal-notebook__entry {
    position: relative;
}

.journal-notebook__entry-mood {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background-color: var(--mood-color);
    border-radius: var(--radius-full);
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    margin-bottom: var(--space-3);
}

.journal-notebook__entry-content {
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #3D2B1F;
    line-height: 32px;
    white-space: pre-wrap;
}

.journal-notebook__entry-time {
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    color: #8B7B6B;
    margin-top: var(--space-4);
    font-style: italic;
}

/* Journal History */
.journal-history {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-4);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.journal-history__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0 0 var(--space-4);
}

.journal-history__title svg {
    width: 20px;
    height: 20px;
    color: var(--gray-500);
}

.journal-history__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.journal-history__entry {
    padding: var(--space-3);
    background-color: var(--gray-50);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.journal-history__entry:hover {
    background-color: var(--white);
    border-color: var(--gray-200);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.journal-history__entry-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-1);
}

.journal-history__entry-date {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.journal-history__entry-mood {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background-color: var(--mood-color);
    border-radius: var(--radius-full);
    font-size: 14px;
}

.journal-history__entry-preview {
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    color: var(--gray-600);
    line-height: 1.5;
}

/* Entry Modal */
.journal-entry-modal__date {
    font-family: 'Kalam', cursive;
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: #5B4636;
    margin-bottom: var(--space-3);
}

.journal-entry-modal__mood {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    background-color: var(--mood-color);
    border-radius: var(--radius-full);
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    margin-bottom: var(--space-4);
}

.journal-entry-modal__content {
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #3D2B1F;
    line-height: 1.8;
    padding: var(--space-4);
    background:
        repeating-linear-gradient(
            transparent,
            transparent 31px,
            #B8D4E3 31px,
            #B8D4E3 32px
        );
    background-color: #FFFEF5;
    border-radius: var(--radius-lg);
}

.journal-entry-modal__meta {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: var(--space-3);
    text-align: right;
}

.modal__footer-actions {
    display: flex;
    gap: var(--space-2);
    justify-content: flex-end;
    width: 100%;
}

.modal__footer-actions .btn--danger {
    margin-right: auto;
}

/* Edit Modal */
.journal-edit-modal {
    background:
        repeating-linear-gradient(
            transparent,
            transparent 31px,
            #B8D4E3 31px,
            #B8D4E3 32px
        ),
        linear-gradient(to right, #F8C8C8 0px, #F8C8C8 3px, transparent 3px);
    background-color: #FFFEF5;
    padding: var(--space-4);
    padding-left: calc(var(--space-4) + 20px);
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    position: relative;
}

/* Red margin line */
.journal-edit-modal::before {
    content: '';
    position: absolute;
    left: 35px;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #F8C8C8;
    z-index: 0;
}

.journal-edit-modal__mood-section,
.journal-edit-modal__content,
.journal-edit-modal__gratitude {
    position: relative;
    z-index: 1;
}

.journal-edit-modal__mood-section label,
.journal-edit-modal__content label {
    display: block;
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin-bottom: var(--space-2);
}

.journal-edit-modal textarea {
    font-family: 'Kalam', cursive;
    line-height: 32px;
}

/* All Entries Page */
.journal-all-entries {
    padding: var(--space-4);
    max-width: 900px;
    margin: 0 auto;
}

.journal-all-entries__count {
    font-size: var(--text-sm);
    color: var(--gray-500);
    background-color: var(--gray-100);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
}

.journal-all-entries__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.journal-month-group__title {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-3);
    padding-bottom: var(--space-2);
    border-bottom: 2px solid var(--gray-200);
}

/* Responsive */
@media (max-width: 640px) {
    .journal-page__header {
        flex-direction: column;
        align-items: flex-start;
    }

    .journal-page__stats {
        width: 100%;
        justify-content: space-between;
    }

    .journal-notebook__paper {
        padding: var(--space-4);
        padding-left: calc(var(--space-4) + 15px);
    }

    .journal-notebook__paper::before {
        left: 25px;
    }

    .journal-notebook__moods {
        justify-content: center;
    }

    .journal-mood {
        min-width: 60px;
        padding: var(--space-1);
    }

    .journal-mood__emoji {
        font-size: 20px;
    }

    .modal__footer-actions {
        flex-wrap: wrap;
    }
}

/* Journal Gratitude Section */
.journal-gratitude {
    margin-top: var(--space-4);
    border-top: 1px dashed var(--gray-300);
    padding-top: var(--space-4);
}

.journal-gratitude__toggle {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%);
    border: 1px solid #FCA5A5;
    border-radius: var(--radius-lg);
    padding: var(--space-2) var(--space-4);
    cursor: pointer;
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #991B1B;
    transition: all 0.2s ease;
    width: 100%;
    justify-content: center;
}

.journal-gratitude__toggle:hover {
    background: linear-gradient(135deg, #FECACA 0%, #FCA5A5 100%);
    transform: scale(1.01);
}

.journal-gratitude__toggle svg {
    width: 18px;
    height: 18px;
}

.journal-gratitude__chevron {
    transition: transform 0.2s ease;
    margin-left: auto;
}

.journal-gratitude__toggle--open .journal-gratitude__chevron {
    transform: rotate(180deg);
}

.journal-gratitude__content {
    margin-top: var(--space-3);
    animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.journal-gratitude__hint {
    font-family: 'Kalam', cursive;
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin: 0 0 var(--space-3);
    text-align: center;
}

.journal-gratitude__inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.journal-gratitude__inputs .form-input {
    font-family: 'Kalam', cursive;
    background: rgba(254, 226, 226, 0.3);
    border-color: #FCA5A5;
}

.journal-gratitude__inputs .form-input:focus {
    border-color: #F87171;
    box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.2);
}

/* Journal Gratitude Display (when viewing entry) */
.journal-notebook__gratitude-display {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px dashed var(--gray-300);
}

.journal-notebook__gratitude-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: #991B1B;
    margin-bottom: var(--space-3);
}

.journal-notebook__gratitude-header svg {
    width: 18px;
    height: 18px;
    color: #F87171;
}

.journal-notebook__gratitude-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.journal-notebook__gratitude-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    font-family: 'Kalam', cursive;
    font-size: var(--text-base);
    color: var(--gray-700);
    padding: var(--space-2) var(--space-3);
    background: linear-gradient(135deg, #FEE2E2 0%, rgba(254, 226, 226, 0.5) 100%);
    border-radius: var(--radius-md);
}

.journal-notebook__gratitude-item svg {
    width: 14px;
    height: 14px;
    color: #F87171;
    flex-shrink: 0;
    margin-top: 3px;
}

/* Edit Modal Gratitude Section */
.journal-edit-modal__gratitude {
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px dashed var(--gray-300);
}

.journal-edit-modal__gratitude > label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-weight: var(--font-medium);
    color: #991B1B;
    margin-bottom: var(--space-3);
}

.journal-edit-modal__gratitude > label svg {
    width: 16px;
    height: 16px;
    color: #F87171;
}

.journal-edit-modal__gratitude-inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.journal-edit-modal__gratitude-inputs .form-input {
    font-family: 'Kalam', cursive;
    background: rgba(254, 226, 226, 0.3);
    border-color: #FCA5A5;
}

.journal-edit-modal__gratitude-inputs .form-input:focus {
    border-color: #F87171;
    box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.2);
}

/* ==========================================================================
   JOURNAL PAGE - TABBED INTERFACE
   ========================================================================== */

/* Tabbed Journal Page */
.journal-page--tabbed {
    padding: 0;
    max-width: 100%;
}

/* Journal Hero Header */
.journal-page__hero {
    background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 50%, #FCA5A5 100%);
    padding: var(--space-6);
    position: relative;
    overflow: hidden;
}

.journal-page__hero::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 60%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    pointer-events: none;
}

.journal-page__back {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    color: #991B1B;
    z-index: 2;
}

.journal-page__back:hover {
    background-color: rgba(255, 255, 255, 0.3);
}

.journal-page__hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
}

.journal-page__hero-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #991B1B;
    margin: 0 0 var(--space-2) 0;
}

.journal-page__hero-title svg {
    width: 32px;
    height: 32px;
    color: #DC2626;
}

.journal-page__hero-subtitle {
    font-size: var(--text-base);
    color: #991B1B;
    opacity: 0.8;
    margin: 0;
}

.journal-page__hero-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.journal-hero-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
}

.journal-hero-stat__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: #991B1B;
}

.journal-hero-stat__label {
    font-size: var(--text-sm);
    color: #991B1B;
    opacity: 0.8;
}

/* Journal Tab Navigation */
.journal-page--tabbed .journal-page__tabs {
    display: flex;
    justify-content: center;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-6);
    background: var(--white);
    border-bottom: 1px solid var(--gray-200);
    position: sticky;
    top: 0;
    z-index: 10;
}

.journal-tab {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    border: none;
    background: transparent;
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.journal-tab svg {
    width: 16px;
    height: 16px;
}

.journal-tab:hover {
    background: var(--gray-100);
    color: var(--gray-800);
}

.journal-tab--active {
    background: linear-gradient(135deg, #DC2626 0%, #EF4444 100%);
    color: white;
}

/* Journal Page Content */
.journal-page--tabbed .journal-page__content {
    padding: var(--space-6);
    max-width: 900px;
    margin: 0 auto;
}

/* Write Section */
.journal-write-section {
    max-width: 700px;
    margin: 0 auto;
}

/* History Section */
.journal-history-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.journal-history-empty {
    text-align: center;
    padding: var(--space-8);
    background: var(--gray-50);
    border-radius: var(--radius-xl);
    color: var(--gray-500);
}

.journal-history-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.journal-history-empty p {
    font-size: var(--text-lg);
    font-weight: var(--font-medium);
    margin: 0 0 var(--space-2) 0;
    color: var(--gray-600);
}

.journal-history-empty span {
    font-size: var(--text-sm);
}

/* Stats Section */
.journal-stats-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
}

.journal-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: var(--space-4);
}

.journal-stat-card {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-sm);
}

.journal-stat-card__icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-lg);
    flex-shrink: 0;
}

.journal-stat-card__icon svg {
    width: 24px;
    height: 24px;
}

.journal-stat-card--primary .journal-stat-card__icon {
    background: #FEE2E2;
    color: #DC2626;
}

.journal-stat-card--success .journal-stat-card__icon {
    background: #DCFCE7;
    color: #16A34A;
}

.journal-stat-card--info .journal-stat-card__icon {
    background: #DBEAFE;
    color: #2563EB;
}

.journal-stat-card--warning .journal-stat-card__icon {
    background: #FEF3C7;
    color: #D97706;
}

.journal-stat-card__info {
    display: flex;
    flex-direction: column;
}

.journal-stat-card__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-800);
    line-height: 1;
}

.journal-stat-card__label {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

/* Month Progress Card */
.journal-month-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.journal-month-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.journal-month-card__header svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.journal-month-card__content {
    padding: var(--space-4);
}

.journal-month-card__progress {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.journal-month-card__bar {
    height: 12px;
    background: var(--gray-200);
    border-radius: var(--radius-full);
    overflow: hidden;
}

.journal-month-card__fill {
    height: 100%;
    background: linear-gradient(90deg, #DC2626 0%, #EF4444 100%);
    border-radius: var(--radius-full);
    transition: width 0.3s ease;
}

.journal-month-card__text {
    font-size: var(--text-sm);
    color: var(--gray-600);
    text-align: center;
}

/* Mood Distribution Card */
.journal-mood-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.journal-mood-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.journal-mood-card__header svg {
    width: 18px;
    height: 18px;
    color: #DC2626;
}

.journal-mood-card__content {
    padding: var(--space-4);
}

.journal-mood-card__grid {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    justify-content: center;
    margin-bottom: var(--space-4);
}

.journal-mood-card__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-3);
    background: var(--mood-color, var(--gray-100));
    border-radius: var(--radius-lg);
    min-width: 80px;
}

.journal-mood-card__emoji {
    font-size: 24px;
}

.journal-mood-card__count {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--gray-800);
}

.journal-mood-card__label {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

.journal-mood-card__most-common {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.journal-mood-card__most-common-mood {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background: var(--mood-color, var(--gray-200));
    border-radius: var(--radius-md);
    font-weight: var(--font-medium);
    color: var(--gray-800);
}

/* Responsive - Tabbed Journal Page */
@media (max-width: 768px) {
    .journal-page__hero {
        padding: var(--space-4);
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .journal-page__back {
        position: static;
        align-self: flex-start;
        margin-bottom: var(--space-2);
    }

    .journal-page__hero-content {
        text-align: center;
    }

    .journal-page__hero-title {
        font-size: var(--text-lg);
        gap: var(--space-2);
    }

    .journal-page__hero-title svg {
        width: 22px;
        height: 22px;
    }

    .journal-page__hero-subtitle {
        font-size: var(--text-sm);
        margin-bottom: var(--space-2);
    }

    .journal-page__hero-stats {
        gap: var(--space-4);
        margin-top: var(--space-3);
    }

    .journal-hero-stat__value {
        font-size: var(--text-xl);
    }

    .journal-hero-stat__label {
        font-size: var(--text-xs);
    }

    .journal-page--tabbed .journal-page__tabs {
        padding: var(--space-2) var(--space-3);
        gap: var(--space-1);
    }

    .journal-tab {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
    }

    .journal-page--tabbed .journal-page__content {
        padding: var(--space-4);
    }

    .journal-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .journal-stat-card {
        flex-direction: column;
        text-align: center;
        padding: var(--space-3);
    }

    .journal-stat-card__icon {
        width: 40px;
        height: 40px;
    }

    .journal-stat-card__icon svg {
        width: 20px;
        height: 20px;
    }

    .journal-stat-card__value {
        font-size: var(--text-xl);
    }

    .journal-mood-card__grid {
        gap: var(--space-2);
    }

    .journal-mood-card__item {
        min-width: 70px;
        padding: var(--space-2);
    }
}

@media (max-width: 480px) {
    .journal-page__hero-stats {
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-3);
    }

    .journal-stats-grid {
        grid-template-columns: 1fr;
    }

    .journal-stat-card {
        flex-direction: row;
        text-align: left;
    }
}

/* ==========================================================================
   Workout Monthly View - Calendar Layout
   ========================================================================== */

/* View Toggle Buttons */
.workout-page__view-toggle {
    display: flex;
    gap: var(--space-1);
    background: var(--gray-100);
    padding: 4px;
    border-radius: var(--radius-lg);
}

.workout-view-btn {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    border: none;
    background: transparent;
    color: var(--gray-600);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
}

.workout-view-btn svg {
    width: 16px;
    height: 16px;
}

.workout-view-btn:hover {
    color: var(--gray-800);
    background: var(--gray-200);
}

.workout-view-btn--active {
    background: var(--white);
    color: var(--primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.workout-view-btn--active:hover {
    background: var(--white);
    color: var(--primary);
}

/* Month Navigation */
.workout-page__nav--month {
    margin-bottom: var(--space-4);
}

.workout-page__month {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    min-width: 180px;
    text-align: center;
}

/* Monthly Calendar Grid */
.workout-calendar {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    overflow: hidden;
    margin-bottom: var(--space-6);
}

.workout-calendar__header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.workout-calendar__day-name {
    padding: var(--space-3) var(--space-2);
    text-align: center;
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.workout-calendar__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
}

.workout-calendar__cell {
    aspect-ratio: 1;
    min-height: 80px;
    padding: var(--space-2);
    border-right: 1px solid var(--gray-100);
    border-bottom: 1px solid var(--gray-100);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.workout-calendar__cell:nth-child(7n) {
    border-right: none;
}

.workout-calendar__cell:hover {
    background: var(--gray-50);
}

.workout-calendar__cell--other-month {
    background: var(--gray-50);
    opacity: 0.5;
}

.workout-calendar__cell--other-month:hover {
    background: var(--gray-100);
}

.workout-calendar__cell--today {
    background: rgba(99, 102, 241, 0.08);
    border: 2px solid var(--primary);
}

.workout-calendar__cell--today:hover {
    background: rgba(99, 102, 241, 0.12);
}

.workout-calendar__cell--future {
    cursor: default;
    opacity: 0.6;
}

.workout-calendar__cell--future:hover {
    background: transparent;
}

.workout-calendar__cell--has-workout {
    background: rgba(34, 197, 94, 0.1);
}

.workout-calendar__cell--has-workout:hover {
    background: rgba(34, 197, 94, 0.15);
}

.workout-calendar__cell-date {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.workout-calendar__cell--today .workout-calendar__cell-date {
    color: var(--primary);
    font-weight: var(--font-bold);
}

.workout-calendar__cell--has-workout .workout-calendar__cell-date {
    color: #16A34A;
}

.workout-calendar__cell-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: #22C55E;
    border-radius: 50%;
    color: var(--white);
}

.workout-calendar__cell-indicator svg {
    width: 14px;
    height: 14px;
}

.workout-calendar__cell-minutes {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: #16A34A;
}

.workout-calendar__cell-steps {
    font-size: 10px;
    color: var(--gray-500);
    display: flex;
    align-items: center;
    gap: 2px;
}

/* Monthly Summary Card */
.workout-month-summary {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    padding: var(--space-5);
}

.workout-month-summary__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0 0 var(--space-4) 0;
}

.workout-month-summary__title svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.workout-month-summary__stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
}

.workout-month-summary__stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--space-4);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
}

.workout-month-summary__stat-value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--primary);
}

.workout-month-summary__stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-top: var(--space-1);
}

/* Monthly Page Modifier */
.workout-page--monthly .workout-page__header {
    flex-wrap: wrap;
    gap: var(--space-3);
}

/* Responsive Calendar */
@media (max-width: 768px) {
    .workout-page__view-toggle {
        order: 3;
        width: 100%;
        justify-content: center;
    }

    .workout-calendar__cell {
        min-height: 60px;
        padding: var(--space-1);
    }

    .workout-calendar__cell-date {
        font-size: var(--text-xs);
    }

    .workout-calendar__cell-indicator {
        width: 20px;
        height: 20px;
    }

    .workout-calendar__cell-indicator svg {
        width: 12px;
        height: 12px;
    }

    .workout-calendar__cell-minutes {
        font-size: 10px;
    }

    .workout-month-summary__stats {
        grid-template-columns: repeat(3, 1fr);
        gap: var(--space-2);
    }

    .workout-month-summary__stat {
        padding: var(--space-3);
    }

    .workout-month-summary__stat-value {
        font-size: var(--text-xl);
    }
}

@media (max-width: 480px) {
    .workout-calendar__day-name {
        font-size: 10px;
        padding: var(--space-2) var(--space-1);
    }

    .workout-calendar__cell {
        min-height: 50px;
    }

    .workout-calendar__cell-steps {
        display: none;
    }
}

/* =========================================================================
   WORKOUT PAGE TABS
   ========================================================================= */

.workout-page__tabs {
    display: flex;
    gap: var(--space-1);
    background: var(--gray-100);
    padding: var(--space-1);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-4);
}

.workout-tab-btn {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-2) var(--space-3);
    border: none;
    background: transparent;
    color: var(--gray-600);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    flex: 1;
    justify-content: center;
}

.workout-tab-btn svg {
    width: 16px;
    height: 16px;
}

.workout-tab-btn:hover {
    color: var(--gray-800);
    background: var(--gray-200);
}

.workout-tab-btn--active {
    background: var(--white);
    color: var(--primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.workout-tab-btn--active:hover {
    background: var(--white);
    color: var(--primary);
}

/* =========================================================================
   WORKOUT HEATMAP (GITHUB-STYLE CALENDAR)
   ========================================================================= */

.workout-heatmap {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    padding: var(--space-4);
}

.workout-heatmap__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
    flex-wrap: wrap;
    gap: var(--space-2);
}

.workout-heatmap__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0;
}

.workout-heatmap__title svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.workout-heatmap__stats {
    display: flex;
    gap: var(--space-4);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.workout-heatmap__stats span {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.workout-heatmap__months {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-2);
    padding-left: 40px;
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.workout-heatmap__grid {
    display: flex;
    gap: var(--space-2);
}

.workout-heatmap__days {
    display: flex;
    flex-direction: column;
    gap: 2px;
    font-size: 10px;
    color: var(--gray-500);
    padding-right: var(--space-2);
}

.workout-heatmap__days span {
    height: 12px;
    display: flex;
    align-items: center;
}

.workout-heatmap__weeks {
    display: flex;
    gap: 2px;
    overflow-x: auto;
    flex: 1;
}

.workout-heatmap__week {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.workout-heatmap__cell {
    width: 12px;
    height: 12px;
    border-radius: 2px;
    cursor: pointer;
    transition: transform 0.1s ease;
}

.workout-heatmap__cell:hover {
    transform: scale(1.3);
}

.workout-heatmap__cell--level-0 {
    background: var(--gray-200);
    border: 1px solid var(--gray-300);
}

.workout-heatmap__cell--level-1 {
    background: #c6e48b;
    border: 1px solid #a8d46e;
}

.workout-heatmap__cell--level-2 {
    background: #7bc96f;
    border: 1px solid #5fb952;
}

.workout-heatmap__cell--level-3 {
    background: #239a3b;
    border: 1px solid #1a7a2e;
}

.workout-heatmap__cell--level-4 {
    background: #196127;
    border: 1px solid #124a1d;
}

.workout-heatmap__cell--today {
    outline: 2px solid var(--primary);
    outline-offset: 1px;
}

.workout-heatmap__legend {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--space-1);
    margin-top: var(--space-4);
    font-size: var(--text-xs);
    color: var(--gray-500);
}

.workout-heatmap__legend .workout-heatmap__cell {
    cursor: default;
}

.workout-heatmap__legend .workout-heatmap__cell:hover {
    transform: none;
}

/* Mobile hint - hidden by default on desktop */
.workout-heatmap__mobile-hint {
    display: none;
}

.workout-heatmap__detail {
    margin-top: var(--space-4);
    padding: var(--space-4);
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
}

.workout-heatmap__detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
}

.workout-heatmap__detail-workouts {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.workout-heatmap__detail-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2);
    background: var(--white);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
}

.workout-heatmap__detail-item svg {
    width: 16px;
    height: 16px;
    color: var(--primary);
}

.workout-heatmap__detail-steps {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-top: var(--space-2);
    padding: var(--space-2);
    background: var(--white);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.workout-heatmap__detail-steps svg {
    width: 16px;
    height: 16px;
}

.workout-heatmap__detail-add {
    margin-top: var(--space-3);
    width: 100%;
}

.workout-heatmap__detail-item .btn--icon {
    margin-left: auto;
    opacity: 0.5;
}

.workout-heatmap__detail-item:hover .btn--icon {
    opacity: 1;
}

/* =========================================================================
   WORKOUT CALENDAR CONTAINER & VIEW TOGGLE
   ========================================================================= */

.workout-calendar-container {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    padding: var(--space-4);
}

.workout-calendar__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-3);
    flex-wrap: wrap;
    gap: var(--space-2);
}

.workout-calendar__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0;
}

.workout-calendar__title svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.workout-calendar__view-toggle {
    display: flex;
    background: var(--gray-100);
    border-radius: var(--radius-md);
    padding: 2px;
}

.workout-calendar__view-btn {
    padding: var(--space-2) var(--space-3);
    border: none;
    background: transparent;
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-calendar__view-btn:hover {
    color: var(--gray-800);
}

.workout-calendar__view-btn--active {
    background: var(--white);
    color: var(--primary);
    box-shadow: var(--shadow-sm);
}

.workout-calendar__stats {
    display: flex;
    gap: var(--space-4);
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin-bottom: var(--space-4);
    flex-wrap: wrap;
}

.workout-calendar__stats span {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

/* =========================================================================
   MONTHLY CALENDAR VIEW
   ========================================================================= */

.workout-month-calendar {
    margin-top: var(--space-4);
}

.workout-month-calendar__nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.workout-month-calendar__nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background-color: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.workout-month-calendar__nav-btn:hover:not(:disabled) {
    background-color: var(--primary-light);
    border-color: var(--primary);
    color: var(--primary);
}

.workout-month-calendar__nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.workout-month-calendar__nav-btn svg {
    width: 18px;
    height: 18px;
}

.workout-month-calendar__month {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    min-width: 180px;
    text-align: center;
}

.workout-month-calendar__summary {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.workout-month-calendar__grid {
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.workout-month-calendar__header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background: var(--gray-50);
    border-bottom: 1px solid var(--gray-200);
}

.workout-month-calendar__header span {
    padding: var(--space-2);
    text-align: center;
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--gray-500);
    text-transform: uppercase;
}

.workout-month-calendar__days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
}

.workout-month-calendar__day {
    aspect-ratio: 1;
    min-height: 60px;
    padding: var(--space-2);
    border-right: 1px solid var(--gray-100);
    border-bottom: 1px solid var(--gray-100);
    display: flex;
    flex-direction: column;
    cursor: pointer;
    transition: background-color var(--transition-fast);
}

.workout-month-calendar__day:nth-child(7n) {
    border-right: none;
}

.workout-month-calendar__day:hover:not(.workout-month-calendar__day--empty):not(.workout-month-calendar__day--future) {
    background-color: var(--gray-50);
}

.workout-month-calendar__day--empty {
    background: var(--gray-50);
    cursor: default;
}

.workout-month-calendar__day--today {
    background: var(--primary-light);
}

.workout-month-calendar__day--future {
    opacity: 0.5;
    cursor: default;
}

.workout-month-calendar__day--level-1 {
    background: #c6e48b;
}

.workout-month-calendar__day--level-2 {
    background: #7bc96f;
}

.workout-month-calendar__day--level-3 {
    background: #239a3b;
}

.workout-month-calendar__day--level-4 {
    background: #196127;
}

.workout-month-calendar__day--level-3 .workout-month-calendar__day-num,
.workout-month-calendar__day--level-4 .workout-month-calendar__day-num,
.workout-month-calendar__day--level-3 .workout-month-calendar__day-info,
.workout-month-calendar__day--level-4 .workout-month-calendar__day-info {
    color: white;
}

.workout-month-calendar__day-num {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.workout-month-calendar__day--today .workout-month-calendar__day-num {
    color: var(--primary);
    font-weight: var(--font-bold);
}

.workout-month-calendar__day-info {
    display: flex;
    align-items: center;
    gap: 2px;
    margin-top: auto;
    font-size: 10px;
    color: var(--gray-600);
}

.workout-month-calendar__day-info svg {
    width: 12px;
    height: 12px;
}

/* Responsive Monthly Calendar */
@media (max-width: 768px) {
    .workout-month-calendar__day {
        min-height: 45px;
        padding: var(--space-1);
    }

    .workout-month-calendar__day-num {
        font-size: var(--text-xs);
    }

    .workout-month-calendar__day-info {
        display: none;
    }

    .workout-calendar__header {
        flex-direction: column;
        align-items: flex-start;
    }

    .workout-calendar__stats {
        flex-direction: column;
        gap: var(--space-1);
    }
}

@media (max-width: 480px) {
    .workout-month-calendar__day {
        min-height: 35px;
    }

    .workout-month-calendar__header span {
        font-size: 9px;
        padding: var(--space-1);
    }

    .workout-month-calendar__month {
        font-size: var(--text-base);
        min-width: 140px;
    }
}

/* =========================================================================
   WORKOUT BODY TAB (MEASUREMENTS IN HISTORY PAGE)
   ========================================================================= */

.workout-body-tab {
    background: var(--white);
    border-radius: var(--radius-xl);
    border: 1px solid var(--gray-200);
    padding: var(--space-4);
}

.workout-body-tab__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
    flex-wrap: wrap;
    gap: var(--space-3);
}

.workout-body-tab__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0;
}

.workout-body-tab__title svg {
    width: 20px;
    height: 20px;
    color: var(--primary);
}

.workout-body-tab__actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.workout-body-tab__summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: var(--space-3);
    margin-bottom: var(--space-4);
}

.workout-body-card {
    background: var(--gray-50);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    border: 1px solid var(--gray-200);
}

.workout-body-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2);
}

.workout-body-card__label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
}

.workout-body-card__trend {
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.workout-body-card__trend svg {
    width: 12px;
    height: 12px;
}

.workout-body-card__trend--up {
    color: var(--color-success);
}

.workout-body-card__trend--down {
    color: var(--color-danger);
}

.workout-body-card__trend--same {
    color: var(--gray-500);
}

.workout-body-card__value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
}

.workout-body-card__unit {
    font-size: var(--text-sm);
    font-weight: var(--font-normal);
    color: var(--gray-500);
}

.workout-body-card__date {
    font-size: var(--text-xs);
    color: var(--gray-500);
    margin-top: var(--space-1);
}

.workout-body-tab__history {
    border-top: 1px solid var(--gray-200);
    padding-top: var(--space-4);
}

.workout-body-tab__subtitle {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    margin: 0 0 var(--space-3) 0;
}

.workout-body-tab__subtitle svg {
    width: 18px;
    height: 18px;
    color: var(--gray-500);
}

.workout-body-tab__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 400px;
    overflow-y: auto;
}

.workout-body-history-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--gray-50);
    border-radius: var(--radius-md);
    border: 1px solid var(--gray-100);
}

.workout-body-history-item__date {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    min-width: 100px;
}

.workout-body-history-item__values {
    flex: 1;
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.workout-body-history-item__values span {
    background: var(--white);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    border: 1px solid var(--gray-200);
}

.workout-body-history-item__delete {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.workout-body-history-item:hover .workout-body-history-item__delete {
    opacity: 1;
}

.workout-body-tab__footer {
    display: flex;
    justify-content: center;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-200);
}

.workout-body-tab__footer .btn {
    color: var(--gray-600);
}

.workout-body-tab__footer .btn:hover {
    color: var(--primary);
}

.workout-body-tab__chart {
    margin-top: var(--space-4);
}

.workout-body-tab__chart .measurements-chart {
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
}

.workout-body-tab__chart .measurements-chart__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-800);
    margin: 0 0 var(--space-3) 0;
}

.workout-body-tab__chart .measurements-chart__title svg {
    width: 18px;
    height: 18px;
    color: var(--primary);
}

.workout-body-tab__chart .measurements-chart__container {
    margin-bottom: var(--space-3);
}

.workout-body-tab__chart .measurements-chart__legend {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    justify-content: center;
}

.workout-body-tab__empty {
    text-align: center;
    padding: var(--space-8) var(--space-4);
}

.workout-body-tab__empty svg {
    width: 48px;
    height: 48px;
    color: var(--gray-300);
    margin-bottom: var(--space-3);
}

.workout-body-tab__empty p {
    margin: 0 0 var(--space-2) 0;
    color: var(--gray-600);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .workout-page__tabs {
        overflow-x: auto;
    }

    .workout-tab-btn {
        white-space: nowrap;
    }

    .workout-heatmap {
        padding: var(--space-3);
    }

    .workout-heatmap__months {
        display: none;
    }

    .workout-heatmap__days {
        display: none;
    }

    .workout-heatmap__grid {
        gap: var(--space-1);
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding-bottom: var(--space-2);
    }

    .workout-heatmap__weeks {
        gap: 3px;
        justify-content: flex-start;
        flex-wrap: nowrap;
        min-width: max-content;
    }

    .workout-heatmap__week {
        gap: 3px;
    }

    .workout-heatmap__cell {
        width: 14px;
        height: 14px;
        border-radius: 3px;
        flex-shrink: 0;
    }

    .workout-heatmap__stats {
        flex-direction: column;
        gap: var(--space-1);
    }

    .workout-heatmap__legend {
        justify-content: center;
    }

    /* Mobile yearly view hint */
    .workout-heatmap__mobile-hint {
        display: block;
        text-align: center;
        font-size: var(--text-xs);
        color: var(--gray-500);
        margin-top: var(--space-2);
        padding: var(--space-2);
        background: var(--gray-50);
        border-radius: var(--radius-md);
    }

    .workout-heatmap__mobile-hint svg {
        width: 14px;
        height: 14px;
        vertical-align: middle;
        margin-right: var(--space-1);
    }

    .workout-body-tab__summary {
        grid-template-columns: 1fr 1fr;
    }

    .workout-body-history-item {
        flex-direction: column;
        align-items: flex-start;
    }

    .workout-body-history-item__date {
        min-width: auto;
    }

    .workout-body-history-item__delete {
        position: absolute;
        right: var(--space-2);
        top: var(--space-2);
    }

    .workout-body-history-item {
        position: relative;
    }
}

@media (max-width: 480px) {
    .workout-body-tab__summary {
        grid-template-columns: 1fr;
    }

    .workout-heatmap__cell {
        width: 12px;
        height: 12px;
    }

    .workout-heatmap__weeks {
        gap: 2px;
    }

    .workout-heatmap__week {
        gap: 2px;
    }

    .workout-heatmap__title {
        font-size: var(--text-base);
    }

    .workout-heatmap__header {
        flex-direction: column;
        align-items: flex-start;
    }
}


/* =========================================================================
   BODY MEASUREMENTS STYLES
   ========================================================================= */

.measurements-modal {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.measurements-modal__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-3);
}

.measurements-modal__unit-toggle {
    display: flex;
    background: var(--color-gray-100);
    border-radius: var(--radius-md);
    padding: 2px;
}

.measurements-unit-btn {
    padding: var(--space-2) var(--space-3);
    border: none;
    background: transparent;
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-gray-600);
    cursor: pointer;
    transition: all 0.2s ease;
}

.measurements-unit-btn--active {
    background: var(--color-white);
    color: var(--color-gray-900);
    box-shadow: var(--shadow-sm);
}

.measurements-unit-btn:hover:not(.measurements-unit-btn--active) {
    color: var(--color-gray-800);
}

/* Latest measurements display */
.measurements-latest {
    background: var(--color-gray-50);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
}

.measurements-latest__header {
    margin-bottom: var(--space-3);
}

.measurements-latest__date {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-gray-600);
}

.measurements-latest__date svg {
    width: 14px;
    height: 14px;
}

.measurements-latest__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-3);
}

/* Metric cards */
.measurements-metric-card {
    background: var(--color-white);
    border-radius: var(--radius-md);
    padding: var(--space-3);
    text-align: center;
    box-shadow: var(--shadow-sm);
}

.measurements-metric-card__label {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-1);
}

.measurements-metric-card__value {
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--color-gray-900);
}

.measurements-metric-card__unit {
    font-size: var(--text-sm);
    font-weight: 400;
    color: var(--color-gray-500);
}

.measurements-metric-card__change {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    font-size: var(--text-xs);
    margin-top: var(--space-1);
}

.measurements-metric-card__change svg {
    width: 12px;
    height: 12px;
}

.measurements-metric-card__change--up {
    color: var(--color-red-500);
}

.measurements-metric-card__change--down {
    color: var(--color-green-500);
}

.measurements-metric-card__change--same {
    color: var(--color-gray-400);
}

.measurements-metric-card__goal {
    font-size: var(--text-xs);
    color: var(--color-primary);
    margin-top: var(--space-1);
}

/* Empty state */
.measurements-empty {
    text-align: center;
    padding: var(--space-6);
    color: var(--color-gray-500);
}

.measurements-empty svg {
    width: 48px;
    height: 48px;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.measurements-empty p {
    margin: 0;
}

/* Log button */
.measurements-log-btn {
    width: 100%;
}

/* History section */
.measurements-history {
    border-top: 1px solid var(--color-gray-200);
    padding-top: var(--space-4);
}

.measurements-history__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-gray-700);
    margin: 0 0 var(--space-3) 0;
}

.measurements-history__title svg {
    width: 16px;
    height: 16px;
}

.measurements-history__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.measurements-history__item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
}

.measurements-history__date {
    font-weight: 500;
    color: var(--color-gray-700);
    min-width: 60px;
}

.measurements-history__values {
    flex: 1;
    color: var(--color-gray-500);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.measurements-history__delete {
    opacity: 0;
    transition: opacity 0.2s ease;
}

.measurements-history__item:hover .measurements-history__delete {
    opacity: 1;
}

/* Collapsible History */
.measurements-history--collapsed .measurements-history__content {
    display: none;
}

.measurements-history__toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: var(--space-2) 0;
    background: none;
    border: none;
    cursor: pointer;
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-gray-700);
}

.measurements-history__toggle:hover {
    color: var(--color-primary);
}

.measurements-history__toggle-text {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.measurements-history__toggle-text svg {
    width: 16px;
    height: 16px;
}

.measurements-history__toggle-icon {
    width: 16px;
    height: 16px;
    transition: transform 0.2s ease;
}

.measurements-history--collapsed .measurements-history__toggle-icon {
    transform: rotate(0deg);
}

.measurements-history:not(.measurements-history--collapsed) .measurements-history__toggle-icon {
    transform: rotate(180deg);
}

.measurements-history__content {
    padding-top: var(--space-3);
}

.measurements-history__view-all {
    width: 100%;
    margin-top: var(--space-3);
}

/* Mini Chart */
.measurements-chart {
    margin: var(--space-4) 0;
    padding: var(--space-4);
    background: var(--color-gray-50);
    border-radius: var(--radius-lg);
}

.measurements-chart__title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-gray-700);
    margin: 0 0 var(--space-3) 0;
}

.measurements-chart__title svg {
    width: 16px;
    height: 16px;
    color: var(--color-primary);
}

.measurements-chart__container {
    min-height: 100px;
}

.measurements-chart__legend {
    display: flex;
    gap: var(--space-2);
    margin-top: var(--space-3);
    flex-wrap: wrap;
}

.measurements-chart__legend-btn {
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-xs);
    background: var(--white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: all 0.2s ease;
}

.measurements-chart__legend-btn:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.measurements-chart__legend-btn--active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--white);
}

/* Mini Chart SVG */
.measurements-mini-chart__header {
    display: flex;
    align-items: baseline;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.measurements-mini-chart__metric {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
}

.measurements-mini-chart__current {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--color-gray-800);
}

.measurements-mini-chart__change {
    font-size: var(--text-xs);
    font-weight: 500;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.measurements-mini-chart__change--up {
    background: var(--color-red-100);
    color: var(--color-red-600);
}

.measurements-mini-chart__change--down {
    background: var(--color-green-100);
    color: var(--color-green-600);
}

.measurements-mini-chart__change--same {
    background: var(--color-gray-100);
    color: var(--color-gray-600);
}

.measurements-mini-chart__svg {
    width: 100%;
    height: 80px;
}

.measurements-mini-chart__labels {
    display: flex;
    justify-content: space-between;
    font-size: var(--text-xs);
    color: var(--color-gray-400);
    margin-top: var(--space-1);
}

/* Full History Modal */
.measurements-full-history {
    max-height: 400px;
    overflow-y: auto;
}

.measurements-full-history__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* Log form */
.measurements-log-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.measurements-log-form__fields {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--space-3);
}

.measurements-log-form__hint {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-xs);
    color: var(--color-gray-500);
    margin: 0;
}

.measurements-log-form__hint svg {
    width: 14px;
    height: 14px;
}

.form-label__unit {
    font-weight: 400;
    color: var(--color-gray-500);
}

/* Settings */
.measurements-settings {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.measurements-settings__title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-gray-700);
    margin: 0;
}

.measurements-settings__list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-2);
}

.measurements-settings__item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background 0.2s ease;
}

.measurements-settings__item:hover {
    background: var(--color-gray-100);
}

.measurements-settings__checkbox {
    width: 18px;
    height: 18px;
    accent-color: var(--color-primary);
}

.measurements-settings__label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-gray-700);
}

.measurements-settings__label svg {
    width: 16px;
    height: 16px;
    color: var(--color-gray-400);
}

.measurements-settings__goals {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.form-group--inline {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.form-group--inline .form-label {
    flex: 1;
    margin: 0;
}

.form-group--inline .form-input {
    width: 120px;
}

/* Responsive */
@media (max-width: 480px) {
    .measurements-latest__grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .measurements-settings__list {
        grid-template-columns: 1fr;
    }

    .measurements-log-form__fields {
        grid-template-columns: 1fr;
    }
}

/* =========================================================================
   CIRCUIT TIMER WIDGET STYLES
   ========================================================================= */

/* Widget Card */
.circuit-timer-widget {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

/* Card Grid Layout */
.circuit-timer-widget__grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: var(--space-3);
}

/* Timer Preset Card */
.circuit-timer-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
}

.circuit-timer-card:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.circuit-timer-card__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    margin-bottom: var(--space-1);
}

.circuit-timer-card__icon svg {
    width: 22px;
    height: 22px;
}

.circuit-timer-card__icon--add {
    background: var(--color-gray-100);
    color: var(--color-gray-500);
    border: 2px dashed var(--color-gray-300);
}

.circuit-timer-card--add:hover .circuit-timer-card__icon--add {
    background: var(--color-primary-50);
    color: var(--color-primary);
    border-color: var(--color-primary);
}

.circuit-timer-card__name {
    font-weight: 600;
    font-size: var(--text-sm);
    color: var(--color-gray-900);
}

.circuit-timer-card__details {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
}

.circuit-timer-card__duration {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--color-primary);
    padding: var(--space-1) var(--space-2);
    background: var(--color-primary-50);
    border-radius: var(--radius-full);
    margin-top: var(--space-1);
}

/* Footer */
.circuit-timer-widget__footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--space-2);
    padding-top: var(--space-2);
    border-top: 1px solid var(--color-gray-100);
}

/* Create Timer Form */
.create-timer-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.create-timer-form__blocks {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-3);
}

.create-timer-block {
    padding: var(--space-3);
    border-radius: var(--radius-md);
}

.create-timer-block--work {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.3);
}

.create-timer-block--rest {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.3);
}

.create-timer-block .form-label {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
}

.create-timer-block .form-label svg {
    width: 16px;
    height: 16px;
}

.create-timer-block--work .form-label {
    color: var(--color-green-700);
}

.create-timer-block--rest .form-label {
    color: var(--color-blue-700);
}

.create-timer-block__input {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.create-timer-block__unit {
    font-size: var(--text-sm);
    color: var(--color-gray-500);
}

.create-timer-form__extras {
    display: flex;
    gap: var(--space-4);
}

.create-timer-form__preview {
    text-align: center;
    padding: var(--space-3);
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
    font-weight: 600;
    color: var(--color-gray-700);
}

/* Manage Presets */
.manage-presets__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.manage-presets__item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
}

.manage-presets__info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.manage-presets__name {
    font-weight: 500;
    color: var(--color-gray-900);
}

.manage-presets__details {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
}

.manage-presets__actions {
    display: flex;
    gap: var(--space-1);
}

/* Timer Screen (Full Screen Overlay) */
.circuit-timer-screen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.circuit-timer-screen__content {
    width: 100%;
    max-width: 500px;
    padding: var(--space-6);
    text-align: center;
    color: white;
}

.circuit-timer-screen__header {
    margin-bottom: var(--space-6);
}

.circuit-timer-screen__name {
    display: block;
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-2);
    opacity: 0.9;
}

.circuit-timer-screen__round {
    font-size: var(--text-sm);
    opacity: 0.7;
}

.circuit-timer-screen__display {
    margin-bottom: var(--space-6);
}

.circuit-timer-screen__time {
    font-size: 120px;
    font-weight: 700;
    font-family: 'Inter', monospace;
    line-height: 1;
    margin-bottom: var(--space-4);
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.circuit-timer-screen__phase {
    display: inline-block;
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-full);
    font-size: var(--text-xl);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.circuit-timer-screen__phase--warmup {
    background: rgba(251, 191, 36, 0.3);
    color: #fbbf24;
}

.circuit-timer-screen__phase--work {
    background: rgba(34, 197, 94, 0.3);
    color: #22c55e;
}

.circuit-timer-screen__phase--rest {
    background: rgba(59, 130, 246, 0.3);
    color: #3b82f6;
}

.circuit-timer-screen__phase--cooldown {
    background: rgba(139, 92, 246, 0.3);
    color: #8b5cf6;
}

.circuit-timer-screen__progress {
    height: 8px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-full);
    overflow: hidden;
    margin-bottom: var(--space-6);
}

.circuit-timer-screen__progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #22c55e, #3b82f6);
    border-radius: var(--radius-full);
    transition: width 1s linear;
}

.circuit-timer-screen__controls {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
}

.circuit-timer-btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    border: none;
    border-radius: var(--radius-lg);
    font-size: var(--text-md);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.circuit-timer-btn svg {
    width: 20px;
    height: 20px;
}

.circuit-timer-btn--pause {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.circuit-timer-btn--pause:hover {
    background: rgba(255, 255, 255, 0.3);
}

.circuit-timer-btn--stop {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.circuit-timer-btn--stop:hover {
    background: rgba(239, 68, 68, 0.3);
}

/* Completion Screen */
.circuit-timer-screen__content--complete {
    animation: fadeIn 0.5s ease;
}

.circuit-timer-complete {
    text-align: center;
}

.circuit-timer-complete__icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-4);
    animation: bounce 1s ease infinite;
}

.circuit-timer-complete__icon svg {
    width: 50px;
    height: 50px;
    color: white;
}

.circuit-timer-complete__title {
    font-size: var(--text-3xl);
    font-weight: 700;
    margin: 0 0 var(--space-4) 0;
}

.circuit-timer-complete__stats {
    display: flex;
    justify-content: center;
    gap: var(--space-6);
    margin-bottom: var(--space-6);
}

.circuit-timer-complete__stat {
    text-align: center;
}

.circuit-timer-complete__stat-value {
    display: block;
    font-size: var(--text-3xl);
    font-weight: 700;
}

.circuit-timer-complete__stat-label {
    font-size: var(--text-sm);
    opacity: 0.7;
}

.circuit-timer-complete__actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.circuit-timer-complete__actions .btn {
    width: 100%;
}

/* Log Workout Prompt */
.log-workout-prompt {
    text-align: center;
}

.log-workout-prompt__list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-3);
    margin-top: var(--space-4);
}

.log-workout-prompt__routine {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4);
    background: var(--color-gray-50);
    border: 2px solid var(--color-gray-200);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
}

.log-workout-prompt__routine:hover {
    background: var(--color-primary-50);
    border-color: var(--color-primary);
}

.log-workout-prompt__routine svg {
    width: 32px;
    height: 32px;
    color: var(--color-primary);
}

.log-workout-prompt__routine span {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-gray-700);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Responsive */
@media (max-width: 480px) {
    .circuit-timer-screen__time {
        font-size: 80px;
    }

    .circuit-timer-screen__phase {
        font-size: var(--text-md);
    }

    .create-timer-form__blocks {
        grid-template-columns: 1fr;
    }

    .create-timer-form__extras {
        flex-direction: column;
        gap: var(--space-2);
    }
}

/* ========================================
   Recipe Bulk Import
   ======================================== */

.recipe-import {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.recipe-import__info {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--color-primary-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-primary-100);
}

.recipe-import__info-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-primary);
    color: white;
    border-radius: var(--radius-md);
    flex-shrink: 0;
}

.recipe-import__info-icon svg {
    width: 20px;
    height: 20px;
}

.recipe-import__info-text h4 {
    margin: 0 0 var(--space-1) 0;
    font-size: var(--text-md);
    font-weight: 600;
    color: var(--color-gray-800);
}

.recipe-import__info-text p {
    margin: 0;
    font-size: var(--text-sm);
    color: var(--color-gray-600);
}

.recipe-import__format {
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-gray-200);
    overflow: hidden;
}

.recipe-import__example {
    margin: 0;
    padding: var(--space-3);
    font-size: var(--text-xs);
    font-family: 'SF Mono', 'Consolas', monospace;
    color: var(--color-gray-700);
    white-space: pre-wrap;
    line-height: 1.5;
    max-height: 200px;
    overflow-y: auto;
}

.recipe-import__input-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.recipe-import__textarea {
    font-family: 'SF Mono', 'Consolas', monospace;
    font-size: var(--text-sm);
    line-height: 1.5;
    min-height: 250px;
    resize: vertical;
}

.recipe-import__preview {
    background: var(--color-gray-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-gray-200);
    padding: var(--space-3);
}

.recipe-import__preview-title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin: 0 0 var(--space-3) 0;
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-green-600);
}

.recipe-import__preview-title svg {
    width: 16px;
    height: 16px;
}

.recipe-import__preview-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 200px;
    overflow-y: auto;
}

.recipe-import__preview-item {
    background: white;
    border-radius: var(--radius-md);
    padding: var(--space-2) var(--space-3);
    border: 1px solid var(--color-gray-200);
}

.recipe-import__preview-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-1);
}

.recipe-import__preview-num {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-primary);
    color: white;
    font-size: var(--text-xs);
    font-weight: 600;
    border-radius: 50%;
    flex-shrink: 0;
}

.recipe-import__preview-header strong {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--color-gray-800);
}

.recipe-import__preview-tags {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
    padding: 2px 8px;
    background: var(--color-gray-100);
    border-radius: var(--radius-full);
}

.recipe-import__preview-meta {
    display: flex;
    gap: var(--space-3);
    font-size: var(--text-xs);
    color: var(--color-gray-500);
}

.recipe-import__preview-meta span {
    display: flex;
    align-items: center;
    gap: 4px;
}

.recipe-import__preview-meta svg {
    width: 12px;
    height: 12px;
}

/* Hero actions on recipes page */
.recipes-page__hero-actions {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
    justify-content: center;
}

.recipes-page__hero-actions .btn--secondary {
    background: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.5);
}

.recipes-page__hero-actions .btn--secondary:hover {
    background: white;
}

/* ============================================
   MEAL PLAN IMPORT MODAL
   ============================================ */

.meal-import {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.meal-import__info {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--color-blue-50);
    border: 1px solid var(--color-blue-200);
    border-radius: var(--radius-lg);
    color: var(--color-blue-800);
}

.meal-import__info svg {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    margin-top: 2px;
}

.meal-import__info p {
    margin: 0;
    font-size: var(--text-sm);
    line-height: 1.5;
}

.meal-import__format {
    background: var(--color-gray-50);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-gray-200);
}

.meal-import__format details {
    padding: var(--space-3);
}

.meal-import__format summary {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    cursor: pointer;
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-gray-700);
}

.meal-import__format summary svg {
    width: 16px;
    height: 16px;
}

.meal-import__format pre {
    margin: var(--space-3) 0;
    padding: var(--space-3);
    background: white;
    border-radius: var(--radius-md);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    line-height: 1.6;
    overflow-x: auto;
    white-space: pre-wrap;
    border: 1px solid var(--color-gray-200);
}

.meal-import__format-notes {
    font-size: var(--text-xs);
    color: var(--color-gray-600);
    line-height: 1.6;
    margin: 0;
}

.meal-import__textarea {
    width: 100%;
    min-height: 200px;
    padding: var(--space-3);
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    line-height: 1.6;
    border: 2px solid var(--color-gray-200);
    border-radius: var(--radius-lg);
    resize: vertical;
    transition: border-color 0.2s ease;
}

.meal-import__textarea:focus {
    outline: none;
    border-color: var(--color-primary);
}

.meal-import__textarea::placeholder {
    color: var(--color-gray-400);
}

.meal-import__options {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    padding: var(--space-3);
    background: var(--color-gray-50);
    border-radius: var(--radius-lg);
}

.meal-import__options .form-checkbox {
    margin: 0;
}

.meal-import__preview {
    border: 2px solid var(--color-green-200);
    border-radius: var(--radius-lg);
    background: var(--color-green-50);
    overflow: hidden;
}

.meal-import__preview h4 {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin: 0;
    padding: var(--space-3);
    background: var(--color-green-100);
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-green-800);
}

.meal-import__preview h4 svg {
    width: 16px;
    height: 16px;
}

.meal-import__preview-content {
    padding: var(--space-3);
}

.meal-import__preview-days {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.meal-import__preview-day {
    background: white;
    border-radius: var(--radius-md);
    padding: var(--space-3);
    border: 1px solid var(--color-gray-200);
}

.meal-import__preview-day-header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
    padding-bottom: var(--space-2);
    border-bottom: 1px solid var(--color-gray-100);
    color: var(--color-gray-800);
}

.meal-import__preview-day-header svg {
    width: 16px;
    height: 16px;
    color: var(--color-primary);
}

.meal-import__preview-meals {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.meal-import__preview-meal {
    display: flex;
    gap: var(--space-2);
    font-size: var(--text-sm);
}

.meal-import__preview-type {
    display: flex;
    align-items: center;
    gap: 4px;
    font-weight: 500;
    color: var(--color-gray-600);
    min-width: 100px;
}

.meal-import__preview-type svg {
    width: 14px;
    height: 14px;
}

.meal-import__preview-items {
    color: var(--color-gray-800);
}

.meal-import__preview-count {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    margin: var(--space-3) 0 0;
    padding-top: var(--space-3);
    border-top: 1px solid var(--color-green-200);
    font-size: var(--text-sm);
    color: var(--color-green-700);
}

.meal-import__preview-count svg {
    width: 16px;
    height: 16px;
}

/* ============================================
   TASK DRAG AND DROP STYLES
   ============================================ */

/* Drag handle for task items */
.task-item__drag-handle,
.task-page-item__drag-handle,
.kid-task-item__drag-handle,
.kid-task-page-item__drag-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    flex-shrink: 0;
    cursor: grab;
    color: var(--color-gray-400);
    opacity: 0;
    transition: opacity 0.2s ease, color 0.2s ease;
}

.task-item__drag-handle svg,
.task-page-item__drag-handle svg,
.kid-task-item__drag-handle svg,
.kid-task-page-item__drag-handle svg {
    width: 16px;
    height: 16px;
}

/* Show drag handle on hover */
.task-item:hover .task-item__drag-handle,
.task-page-item:hover .task-page-item__drag-handle,
.kid-task-item:hover .kid-task-item__drag-handle,
.kid-task-page-item:hover .kid-task-page-item__drag-handle {
    opacity: 1;
}

.task-item__drag-handle:hover,
.task-page-item__drag-handle:hover,
.kid-task-item__drag-handle:hover,
.kid-task-page-item__drag-handle:hover {
    color: var(--color-gray-600);
}

.task-item__drag-handle:active,
.task-page-item__drag-handle:active,
.kid-task-item__drag-handle:active,
.kid-task-page-item__drag-handle:active {
    cursor: grabbing;
}

/* Dragging state */
.task-item--dragging,
.task-page-item--dragging,
.kid-task-item--dragging,
.kid-task-page-item--dragging {
    opacity: 0.5;
    background: var(--color-gray-100);
    border-style: dashed !important;
}

/* Drag over state (drop target) */
.task-item--drag-over,
.task-page-item--drag-over {
    border-color: var(--color-primary) !important;
    background: var(--color-primary-50);
    box-shadow: 0 0 0 2px var(--color-primary);
}

.kid-task-item--drag-over,
.kid-task-page-item--drag-over {
    border-color: var(--color-kid-primary) !important;
    background: rgba(var(--color-kid-primary-rgb), 0.1);
    box-shadow: 0 0 0 2px var(--color-kid-primary);
}

/* Task item layout updates for drag handle */
.task-item,
.task-page-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.task-item[draggable="true"],
.task-page-item[draggable="true"] {
    cursor: default;
    user-select: none;
}

.kid-task-item,
.kid-task-page-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.kid-task-item[draggable="true"],
.kid-task-page-item[draggable="true"] {
    cursor: default;
    user-select: none;
}

/* Touch-friendly drag handle */
@media (hover: none) {
    .task-item__drag-handle,
    .task-page-item__drag-handle,
    .kid-task-item__drag-handle,
    .kid-task-page-item__drag-handle {
        opacity: 0.6;
    }
}

/* Animation for smooth reordering */
.task-item,
.task-page-item,
.kid-task-item,
.kid-task-page-item {
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
}

/* ==========================================================================
   Dark Mode Widget Overrides
   ========================================================================== */

/* Gratitude entries in dark mode */
html.dark-mode .journal-notebook__gratitude-header {
    color: #F87171;
}

html.dark-mode .journal-notebook__gratitude-item {
    background: linear-gradient(135deg, rgba(127, 29, 29, 0.4) 0%, rgba(127, 29, 29, 0.2) 100%);
    color: var(--gray-300);
}

html.dark-mode .journal-notebook__gratitude-item svg {
    color: #F87171;
}

/* Gratitude input fields in dark mode */
html.dark-mode .journal-gratitude__inputs .form-input,
html.dark-mode .journal-edit-modal__gratitude-inputs .form-input {
    background: rgba(127, 29, 29, 0.2);
    border-color: #7F1D1D;
    color: var(--gray-300);
}

html.dark-mode .journal-gratitude__inputs .form-input:focus,
html.dark-mode .journal-edit-modal__gratitude-inputs .form-input:focus {
    border-color: #F87171;
    box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.3);
}

html.dark-mode .journal-gratitude__inputs .form-input::placeholder,
html.dark-mode .journal-edit-modal__gratitude-inputs .form-input::placeholder {
    color: var(--gray-500);
}

/* Gratitude section header in edit modal */
html.dark-mode .journal-edit-modal__gratitude > label {
    color: #F87171;
}
